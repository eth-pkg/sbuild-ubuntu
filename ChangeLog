commit 5ba6126dd2abe41448cb71cbea87a209c86b1349
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 11 23:19:34 2009 +0000

    [debian] Close #519276

commit 508cec92f2b85c1cab6df7301d859b49cececa7b
Author: Francois-Denis Gonthier <fdgonthier@kryptiva.com>
Date:   Wed Mar 11 23:16:08 2009 +0000

    [sbuild] Don't erase default chroot environment
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 3f15b8166d4f94dea041fbb837312b6b7f83577b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 11 22:49:18 2009 +0000

    [debian] configure sets DCMD, SCHROOT and SUDO explicitly.
    
    Closes: #519097

commit 04d7105f14309bce23c6adb99152719dbc8846c6
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 11 22:44:48 2009 +0000

    [build] Bump version to 0.58.1

commit b8e50ae888d7a15a0e6c6a5efc53d2d566845734
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 21:54:33 2009 +0000

    [debian] Install NEWS

commit a492624655d0ddd107b8c3e1804d8f3a9e7aa424
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 21:53:13 2009 +0000

    [debian] Update NEWS and change distribution to unstable

commit 5209a862ef5d1d8f98fd520e90a9bfae2fa82c88
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 21:51:53 2009 +0000

    [man] Add wanna-build-statistics manual page

commit 0e2041c5b79614c40aff4ae0d897beb14285e2a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 21:51:15 2009 +0000

    [NEWS] Document additional user-visible changes

commit b8272e23af0f6a9d8cb2506c491bcc38d3a67bb2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:57:10 2009 +0000

    [man] Add wanna-build-merge-packages manual page
    
    Also add symlink for wanna-build-merge-quinn.

commit 6f6b9dd1636a9a18493b8f4ebcc2d829aa366f52
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:46:41 2009 +0000

    [README] Remove README.mail, documented in wanna-build-mail.1.in

commit 71dbec1b3e27a751f03044aab58da895899deda8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:44:46 2009 +0000

    [man] Add wanna-build-mail manual page

commit 9e6d2aaa3ff7485ba951c47b80e60d9aaee9a691
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:19:07 2009 +0000

    [build] Install WannaBuild::Options

commit 3d90c58ad548d9c73ba5684be398f03ecf3b9ed9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 20:18:29 2009 +0000

    [man] Add wanna-build-catdb.1 manual page
    
    Add symlinks for wanna-build-catgdbm and wanna-build-catmldbm.

commit ecba364e577a0606b78362b8374bf9811200efca
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:54:25 2009 +0000

    [wanna-build] Add missing parentheses

commit 55f4104f17c6a0100a00783d6809a4bea683ef4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:53:52 2009 +0000

    [wanna-build] Make $ctime global

commit 5274e736b660eb58d13017cd99e47d63c2275a0e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:43:43 2009 +0000

    [debian] Don't configure with --with-postgresql
    
    debversion code has been moved to postgresql-debversion.git.

commit 034ee591d4bda54da18c865bf088e77ea4a9c914
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:41:31 2009 +0000

    [debian] Use dh_prep in place of dh_clean -k

commit 54282ed31e530558463b59687e07d311c9a5b5ba
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 19:28:39 2009 +0000

    [db] Install Sbuild::DB modules

commit e7f1a4dee9b5f6f769b305231c940b57f8e597fa
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 19:13:09 2009 +0100

    [db] Populate the suite_arches table
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit e06ce9d5ca4985ed28f0d44ea2463432ba7a4337
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 19:13:08 2009 +0100

    [db] Use long VALUES lists instead of separate INSERT statements
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit aaf0e7c0424adc2b16b3a7649e953c8a5adbe687
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 18:42:49 2009 +0100

    [db] Delete extra comma in build_status_properties

commit 45e24615beef6724832e974603ab3a0c93b689eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 18:08:08 2009 +0000

    [build] Install SQL database creation scripts
    
    - db.sql is generated to use the correct paths for sourcing files.
    - SQL files are installed and distributed correctly.

commit 56ef2c201726579dd0e77ecdbc7b0a98d4c89284
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 16:47:12 2009 +0000

    [debian] control: wanna-build recommends postgresql-8.3-debversion
    
    Needed for the debversion datatype install script sourced by db.sql.

commit b27487008883dbb7e7ac8824d9a73bdca636dd14
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 16:36:29 2009 +0000

    [db] Split database creation into separate files
    
    archive-data.sql: Initial data for archive tables
    archive.sql: Tables for archive information, Packages and Sources data
    build-data.sql: Initial data for build status
    build.sql: Build status, history, logs and buildd information
    db.sql: Sources all other files
    functions.sql: Functions and triggers

commit 065e54512f67b6491945d65ec5f5595524bbcdef
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 16:24:30 2009 +0000

    [db] language.sql: Split procedural language setup from db.sql

commit ac4acf683741eb2602fc0c6a383d4df9717723a1
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:59:17 2009 +0000

    [db] set_ctime: Add missing semicolon
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7c538b99dd490295e93a7d38c1bc56bcbad033d2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 8 15:52:50 2009 +0000

    [db] install.sql: Split database creation into a separate file

commit ed1d0504b1457b081d528fbf9f36237691fa66a9
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:30:07 2009 +0000

    [db] Create a "suite_arches" table to list the architectures in a suite
    
    The database schema was missing a list of architectures in each suite.
    This is needed, because one can't simply use the "architectures" table
    to decide what arches to act on, eg. when importing packages
    information, or when creating a web interface: that table may contain no
    longer active architectures (which are kept around for build_logs), and
    many actions really need the list of architectures specific to a suite.
    
    This commit introduces a "suite_arches" table, with a relation of what
    architectures are available in each suite. It also adds foreign keys
    towards this table from suite_binaries and build_status; this way, it is
    ensured that dropping an architecture from a suite will clean up those
    tables from no longer relevant entries.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit a1d33bd7650f8c7ad1afa6ad4698d92f74cd7135
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:23:49 2009 +0000

    [db] Add triggers for build_status
    
    Triggers keep the ctime column up to date, validate the
    bin_nmu field and insert the record into build_status_history.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 0d0dbc8b27f7615d83a5b2393ae70c5b98f7141c
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:14:55 2009 +0000

    [db] build_status.ctime defaults to 'epoch'
    
    Value will be set with a trigger.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 3925f5712b726ec947cc10665c1c8cfbb389623d
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:13:50 2009 +0000

    [db] build_status.builder can be NULL
    
    This allows changes to be made by people as well as buildds.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 9703826459a9ff4e800acdf7d76e8f2d67685882
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 15:12:37 2009 +0000

    [db] Add bin_nmu column to build_status and build_status_history
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit b099ba631062c23a26ca2c5558f5b0d1d3d255bb
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 14:58:53 2009 +0000

    [db] Drop index on build_status.ctime
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 5e73ac9b178fbe6724b2988579775dbb64c705e2
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 14:57:25 2009 +0000

    [db] Rename build_state.state to build_state.status
    
    Also rename in build_status history.
    Reformat build_state.user.
    Update comments.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 2731512af04222f58a0b3f7af5b2b95cc1f30558
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sun Mar 8 14:48:14 2009 +0000

    [db] Remove job id number from build_status and build_status_history
    
    Also update build_status_properties to use the new primary key
    of build_status.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 253d6d0514657eb69c006b785abbd2888843a70f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 7 19:35:43 2009 +0000

    [db] Rename job_states to package_states (update comments)

commit b15007cd6a3273162315f54d3b02b87aa46a8513
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 7 19:34:23 2009 +0000

    [db] Rename job_states to package_states

commit a6075a18c1a05499d68f57623ab296b21a02c87b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 7 19:31:41 2009 +0000

    [db] Duplicate build_status as build_status_history
    
    This will store a history of the changes in the build_status
    table.  Currently, it retains all of the constraints, but
    future commits will drop referential integrity on some of the
    columns.

commit 6d87fa6a3b94f15d945ecd53bc87c2098ad75fec
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Sat Mar 7 19:10:52 2009 +0000

    [db] Rename build_jobs to build_status
    
    Also rename build_job_properties to build_status_properties.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit d30083905929c2a1bbf9123a74f912f93ccac819
Author: Adeodato Simó <dato@net.com.org.es>
Date:   Fri Mar 6 07:54:27 2009 +0100

    Create indexes for (pkg_name, version) in suite_{sources,binaries}
    
    These two indexes make faster joins between sources and suite_sources,
    and binaries and suite_binaries, since the join key will be indexed on
    both sides. The difference is particularly noticeable for the binaries,
    since suite_binaries has more than half a million rows.

commit 4d30d593bd3348d0e7529ddd82c9275634c9627c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 7 17:55:34 2009 +0000

    [db] Add missing semicolon
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit c73f479b7ab766b46a4f4f96d8a77ad8125f56bd
Author: Adeodato Simó <adeodato@debian.org>
Date:   Thu Mar 5 23:15:37 2009 +0000

    [db] Rename "version" to "source_version" when it refers to source packages
    
    Rename all columns named "version" to "source_version" when they
    refer to the version of a source package. This is done to ease JOIN
    statements, making it possible to use NATURAL JOIN or JOIN ... USING()
    between source and binary packages.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 3c0e9372aad31e507bb57dd47b149f90a81b731d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 5 22:34:56 2009 +0000

    [Sbuild::Sysconfig] Fix typo in %programs export

commit 486858fdd58b1d56af9c49defd32be626514d65d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 5 22:30:31 2009 +0000

    [Sbuild::Build] uninstall_debs: Don't use uninitialised $output
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 32bf3914b992430bea8866ae0739b354740b4640
Merge: 7ca714b 641feb8
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 4 23:53:34 2009 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit 7ca714b6f6771339812bab91f999064dc5be6945
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 4 23:53:10 2009 +0000

    [build] Remove DISTCHECK_CONFIGURE_FLAGS

commit 7efcaa609880204fb8d943dadf5cf6bbb41cc5cd
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 4 23:51:00 2009 +0000

    [debian] Remove postgresql-8.3-debversion
    
    rules: Comment out binary-arch commands
    control: Remove package and build-dependencies

commit e749b27e3e722712ca3d393f41161aa0151d3362
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 4 23:47:23 2009 +0000

    [db] Remove debversion
    
    debversion has been split into a separate git repository
    (postgresql-debversion).

commit 641feb85078e18440b4b98116d1eaa3dbdc46c66
Author: Philipp Kern <pkern@debian.org>
Date:   Wed Mar 4 14:11:36 2009 +0100

    [Sbuild] declare charset and transfer-encoding in sent mails
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 0a6140e14bc8ea4e5ef006f487d14e0814a0b3c5
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 3 23:56:47 2009 +0100

    [Sbuild::Conf] obey $arch in .sbuildrc
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 07a9756f553b370ab9ee96208e797cbb16316e96
Author: Philipp Kern <pkern@debian.org>
Date:   Tue Mar 3 23:41:36 2009 +0100

    [build] lib/Sbuild/Makefile.am: add ConfBase.pm
    
    Signed-off-by: Philipp Kern <pkern@debian.org>

commit 7e91bb9dc7dc49ea86ae33ea3f8b9d0cfb3985fd
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 3 00:26:23 2009 +0000

    [debian] Correctly package postgresql-8.3-debversion
    
    debian/rules calls configure with --enable-postgresql, and
    adds a functional binary-arch target (previously was for
    arch-any only).

commit 7bf8c497551ab8bf934526638870682254016b8d
Merge: e620116 2415b95
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 2 23:22:18 2009 +0000

    Merge branch 'wb-backend'
    
    Conflicts:
    	debian/changelog

commit 2415b957d6f64659cc644d23da93e3751ff2f9c1
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 2 23:20:13 2009 +0000

    [debian] Add postgresql-8.3-debversion to changelog

commit fe2104f1083535ed9bfeddc1fd2c9c237b6bdc15
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 2 23:16:07 2009 +0000

    [debian] New package: postgresql-8.3-debversion

commit 5d6e581e396cc23ef2357c83375df8d585a29a23
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 2 23:15:29 2009 +0000

    [build] Add support for conditionally building debversion type

commit e62011685f1a35419691aa1b39efc0dfc3f40030
Author: Luk Claes <luk@debian.org>
Date:   Sun Mar 1 16:17:32 2009 +0100

    Set sectval to -125 = 165 + 40 (highest used value) if used section is not in the list

commit 92efcaae42e708f1da87e19593233b319d683b5d
Author: Luk Claes <luk@debian.org>
Date:   Sat Feb 28 15:35:54 2009 +0100

    Add 'a'ge before 's'ection

commit 95b9263713cf9748affc6b0585d1ccab97528a20
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 28 13:03:26 2009 +0000

    Add .gitignore for db

commit 71a83bd9e0dd230374c970402371c8d2fd3d8e5b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 28 13:03:02 2009 +0000

    [db] Add PGXS Makefile for out-of-tree building

commit 20549cb13d20ad07c182ab546e0a5b02540d2707
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 28 13:02:05 2009 +0000

    [build] lib/Sbuild/Makefile.am: Add DB to SUBDIRS
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 369d90a58bdb1b8ada295c1f4158185b1c1d528b
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 11:06:36 2009 +0000

    [db] Fix the primary key in the suite_binaries table
    
    The primary key in "suite_binaries" was a composite key of (pacakge,
    suite), but it is obvious that (package, suite) has to be duplicated
    once per arch: add "arch" to the primary key.
    
    Additionally, the UNIQUE constraint is unnecessary: with (package, arch,
    suite) being unique already due to the primary key, there'll be only one
    version for each combination.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit dbfda1cbb8dfdecf54d3f2b84cd627bac5756d63
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 10:58:08 2009 +0000

    [db] Add "oldstable" to the suites table
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 5c6e57be5ade416af970cc8f32291c41ef3d3ea2
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 10:57:48 2009 +0000

    [db] Add "hurd-i386" to the architectures table
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7afc324c2a8612e7b32bb2345b6ccbf08ae5ef4c
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 10:57:00 2009 +0000

    [db] Add a new value "skipped" to the build_log_result table
    
    The build log database on buildd.debian.org shows this state was in use
    until 2004-06-24 (and contains around 1150 logs in this state).
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7e8521a088ee7ce48b843969558a6386833a23e0
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sat Feb 28 10:20:35 2009 +0000

    [db] Update name of constraint for build_logs.result to match column name
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit ecea578ab208c4b63812f67012718e30dacb4229
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 28 09:36:50 2009 +0000

    [Sbuild::Options] --make-binNMU doesn't reset binNMU version if already set
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit da9d8c46857a2e003f26427fbdba7fbb0200372a
Author: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
Date:   Sat Feb 28 09:33:00 2009 +0000

    [man] Fix WANNA_BUILD_LIBEXEC_DIR
    
    WANNABUILD_LIBEXEC_DIR got renamed to WANNA_BUILD_LIBEXEC_DIR
    
    Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 360f4e3d70ff2c7567e640abee7c936c777cbb2f
Author: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
Date:   Sat Feb 28 09:31:36 2009 +0000

    [build] Fix WANNA_BUILD_LIBEXEC_DIR
    
    WANNABUILD_LIBEXEC_DIR renamed to WANNA_BUILD_LIBEXEC_DIR
    
    Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc>
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit a0f1083f6804e7e05254b41057ca528fadca5113
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Feb 27 22:24:45 2009 +0000

    [WannaBuild::Options] Use Sbuild::DB::Info

commit 88a42fa05f67f6a8606a83adda28a76413cac19c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Feb 27 22:23:58 2009 +0000

    [Sbuild::DB::Base] New common base class for database backends

commit 5d5e0ce6d89cf560cf5c67a9c8a509b1224c26da
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 26 19:40:41 2009 +0000

    [Sbuild::Options] --make-binNMU doesn't reset NMU version to 1

commit 890de1e0cec0e9b9a25f207a95a475bda7e56345
Author: Kees Cook <kees@outflux.net>
Date:   Sun Feb 22 11:04:36 2009 +0000

    [debian] Close #505747
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 1509eca85db68a7b762d06ae28c0555880eee9a9
Author: Kees Cook <kees@outflux.net>
Date:   Sun Feb 22 11:02:09 2009 +0000

    [Sbuild] version_compare: Handle =*=PROVIDED=*= by never matching
    
    If we're trying to compare versions against a provided package,
    always return "not satisfied", forcing an install attempt.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 82bb1190f20da3f5fc3fd93e8b08b8dd0539ef5d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 31 11:25:03 2009 +0000

    [db] Default to using the public namespace

commit 2c9a523e32089d6100d8f5176ec7e8cbf46c7da0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 31 10:49:39 2009 +0000

    [db] Update debversion copyright and quote LANGUAGE

commit 28bd34d2cc73ff29ef2b37d59a83a8481923c737
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 26 22:01:54 2009 +0000

    [db] Update copyright notice
    
    Add Adeodato Simó and update dates.

commit 4861ff29c0a7945017d119a28d4ba606a53e3846
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 22:00:43 2009 +0000

    [db] Add table to list the admin(s) of each buildd
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 8d73c33722f8fef06ee02a1554f1b76ee974c18a
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:59:14 2009 +0000

    [db] Add an "arch" column to the builder table
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 911aab0a77b0059718312da2e2c31793f97cad15
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:58:27 2009 +0000

    [db] Prefer column names derived from table name, and drop _name suffix
    
    Instead of using a column "name" in every table, use a name derived from
    the table name, eg. "source" in sources and "arch" in architectures. Also,
    when creating references, don't name such columns with a "_name" suffix;
    instead, just use the name of the referenced column if possible. (It is not
    possible, for example, in binaries, where there are two version numbers.)
    
    With this, it is possible to create queries more easily, and natural joins
    are possible.
    
    Incidentally, this commits removes the long listing of package section,
    which is unnecessary given that they will be auto-inserted via a trigger
    when populating the sources and binaries table.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 42ec770e8f1c7397b43a848d65f255a7c7f72a73
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:53:48 2009 +0000

    [db] Add a build_logs table to store a list of all available build logs
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit c79e87a6e7735a6be73a8730dba1aa5bce216b07
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:49:46 2009 +0000

    [db] Make "uploaders" be a one-to-many mapping, rather than a single value
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit ce831262b4b0e081f4c56196eec20ffac3c5a8cc
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:48:02 2009 +0000

    [db] Distinguish between arches with buildds, and the Architecture field
    
    Previously, the architectures table was holding real architectures like
    "alpha" and "mipsel", and other values like "any" and "all". However, the
    architectures table is referenced from places like build_jobs and builder,
    where only the former group makes sense.
    
    This commit splits the two groups, keeping the architectures table for the
    real architectures (or, rather, architectures supported by each wanna-build
    instance), and creates a new table package_architectures for values found in
    the Architecture field of Sources/Packages files.
    
    Additionally, a trigger is created to populate package_architectures upon
    insertion on source_architectures and binaries. It is not feasible to
    populate this table in advance: at the time of this writing, there are 38
    different names in the Architecture field in Sources.gz, with more appearing
    in an unforeseeable manner.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit dd2fefc430dcdc79061c180e3bc04475808f8999
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:44:58 2009 +0000

    [db] Add a "value" column to package_priorities so that they are sortable
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit fd046185cb8c69cee92a7fdf25e245bed231d01c
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:43:42 2009 +0000

    [db] Add an "address" column to the builders table
    
    This column is meant to store the address of the buildd software in the
    remote machine, to which eg. ACCEPTED mails from dak should be sent to.
    
    It should be stored in the database so that there is no duplication of
    information between the DB (list of builders) and our aliases file (list
    of builders and their addresses).
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit b3a5c26fd55df7e54d9712ddaf8396d518a92ada
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:42:44 2009 +0000

    [db] Ensure names for all PRIMARY KEY constraints end with _pkey
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 797f875aab6263225f80b9a9881109682cf896cb
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:41:54 2009 +0000

    [db] Rename "distribution" to "suite" (to be consistent with dak)
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 6d423c452bc4b1dcd0771705c3c63e3a44660217
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 26 21:40:24 2009 +0000

    [db] Create PL/pgSQL language if not already present
    
    This is needed by the package_checkrel() function.

commit 6bc50fa0cfeb376fd8e7b1367a28a8a8a21b94eb
Author: Adeodato Simó <adeodato@debian.org>
Date:   Mon Jan 26 21:15:39 2009 +0000

    [db] Source debversion.sql and not version.sql from db.sql
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit bca3939151fa730128762937cca7fea29811a5a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 22:06:41 2009 +0000

    [db] Add code to uninstall debversion type from database

commit 3f47147c79f8ec32078b47dc6311c94e7a5c35ce
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 22:06:17 2009 +0000

    [db] Add hash operator class to debversion type

commit 361687c421f3ad1ca182711ec3dada56f2e39ff1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 22:05:06 2009 +0000

    [db] Keep faster C implementation of debversion only

commit 692678942060152824a727b20b9aa69e14444191
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sun Jan 25 17:48:18 2009 +0000

    [db] Don't insert arches that have not ever been in the official wanna-build
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 730ee723b2c3c4acdab2ce3e1dd8225de02bf82d
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sun Jan 25 17:47:03 2009 +0000

    [db] Rename sections to components
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit a27b1b4b88f98a93b01188422e6b2599f77ca440
Author: Adeodato Simó <adeodato@debian.org>
Date:   Sun Jan 25 17:44:08 2009 +0000

    [db] Change order of package sections
    
    This makes it easier to spot missing sections.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 11b5134d2bbdf439526a33bc253296653661ad09
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 17:40:24 2009 +0000

    [db] Remove commented out debversion domain

commit 81fd39259953853632a7d0e2198cfc745d270fe3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 15:14:30 2009 +0000

    [db] Add C implementation of debversion type

commit f34d6ddfea81d9bd0951e4d30345c64a16c93038
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 15:10:56 2009 +0000

    [db] Rename debversion_compare* to debversion_cmp* for compatibility
    
    Other implementations use the latter naming

commit 40c71b43c8c2c4e271dbb00213ff26e827053741
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 15:08:49 2009 +0000

    [db] Add untrusted debversion type
    
    This type uses PL/PerlU to use Dpkg::Version directly, to avoid code
    duplication.

commit 0f26a15ffdba21464669777ff5023a662f85d386
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 25 15:06:45 2009 +0000

    [db] debversion type is created from text primitives
    
    A domain based upon text as used previously can define its
    own operators and operator class, but postgres does not
    allow these to be used by default in place of the base
    class operators.

commit fa9829e5744883d8305599249acb0c24dcf9e07d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 24 18:42:21 2009 +0000

    [db] debversion: Add btree operator class

commit 1b7d81df055bed0906a82fc566bd1e03a5934a77
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 24 18:41:17 2009 +0000

    [db] debversion: Use correct procedure for operator !=

commit 38dd87a21b925eca2c936adb9530530b1854cd07
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 16:08:37 2009 +0000

    [db] Update schema comments and constraints
    
    - Comment all relations, functions and triggers.
    - Clean up dependent relastions using ON DELETE CASCADE where appropriate.
    - Add triggers to create missing references, where appropriate.
    - Remove complex architecture group ↔ source package mapping tables, and
      replace with simpler mapping at the expense of using more disc space.
    - Add additional unique constraints and indices.
    - Add log table for storing changelog.

commit e74599278f8ad59aab37b171fcf49149c13d16eb
Merge: 366f398 29db70c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:56:55 2009 +0000

    Merge branch 'wb-object'

commit 29db70c9a36aa0fe6807e7e500babee4bf909c4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:56:17 2009 +0000

    [wanna-build-statistics] Document needed options parsing work

commit aed9d5426bd503ac4ad0cec14de886fdbfccaac7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:47:06 2009 +0000

    [wanna-build-statistics] Update valid wanna-build states

commit 17f3a48dbb882fb37bae8fec6a2214c1a0c3f2d6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:46:18 2009 +0000

    [wanna-build-statistics] Add oldstable and oldstable-security

commit 19c4efe397081f5067774ffc8730d916d11301ad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 17 11:45:04 2009 +0000

    [etc] sbuild.conf: Remove extra newline

commit 366f3981916a9ddfb6a69253c0f3c967a5117196
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 11 23:35:58 2009 +0000

    [debian] Close #511314

commit 2546b0249e49effeb32839e792cb6bac570bc528
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 11 23:01:34 2009 +0000

    [debian] Close #511095

commit 1dddc9d19d00d807eaa8543f0f3272da63d8581a
Author: Robert Millan <rmh@debian.org>
Date:   Sun Jan 11 23:00:13 2009 +0000

    [build-mail-wrapper] Use getloadavg in place of sysinfo.
    
    Use more portable BSD getloadavg in place of Linux-specific sysinfo.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 7e7abc543283c59a3cbe193bb7432eb0b6d24747
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 10 20:46:33 2009 +0000

    [db] Use debversion

commit 8fc4f2d8ee5bba8d8d1b8688380b33684f344115
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 10 20:45:51 2009 +0000

    [db] Correct version check to not recurse infinitely

commit e151e7bb96567817a580118c8c0d5b6cf1fa9b38
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 3 18:49:26 2009 +0000

    [db] Add debversion type and operators

commit 92f8ab18e1ca7c6e0c07737788da2b8031bffed2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 23:06:33 2008 +0000

    [db] Add initial PostgreSQL database schema

commit 9cf5cc02f982afc1406c871fe18ac7086c295fb0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 23:05:14 2008 +0000

    [build] Distribute database modules
    
    Add missing modules to Makefiles.
    Adjust module package names for new location.

commit 544956b701a1901c267f0d7cb3bba647d182ba80
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 12:03:13 2008 +0000

    [wanna-build] Rename %dbs to %databases

commit 2fb4e05291f023b5a36618ce47ec43400d3bbe0a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 11:59:34 2008 +0000

    [Sbuild::DB] Rename to Sbuild::DB::MLDBM
    
    Also rename Sbuild::DBInfo to Sbuild::DB::Info

commit cd7e85fb5689b19c533b8c77da9f943b84014117
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 11:56:13 2008 +0000

    [Sbuild::DB] Move MLDBM functionality from wanna-build

commit 2c83e55c4de613241977311a994ee81bd0642c28
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 28 11:42:52 2008 +0000

    [WannaBuild::Options] Use Sbuild::isin

commit 12c6e902c67d560dae04f58ab49396bd2c4ca142
Merge: 89ccc1c e6273c7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 22:10:37 2008 +0000

    Merge branch 'wb-object'

commit e6273c7b03c2a2513e59030002e5fd9c067ea83a
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Dec 27 22:06:18 2008 +0000

    [WannaBuild::Conf] Introduce a buildd mail domain

commit 7a5a8c57990d5c210f5c57b9be16776a437e44bc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:31:18 2008 +0000

    [wanna-build] log_ta: dist and db are no longer arguments

commit 41b9be5801c3e345592688aa5490da24cb7e979e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:30:16 2008 +0000

    [wanna-build] Replace usage with Sbuild::usage_error

commit 648ae83520352a6c18f0155f735864117c1189f0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:29:17 2008 +0000

    [wanna-build] Remove set_dep_wait

commit a384b946a114d8ab0029ebdb918ed84e8d63513c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:28:41 2008 +0000

    [wanna-build] Remove exists_in_other_dist

commit 6c49457365f96f97e4ad920fca724ca114d4a121
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:24:48 2008 +0000

    [wanna-build] Update regex, version and dependency handling

commit e0d865b68d9fb818abc37751c854362b04c61608
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:22:29 2008 +0000

    [wanna-build] Add missing brace

commit 62e4d98741f909cd2b794091d0d6bf38da85ce16
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:21:50 2008 +0000

    [wanna-build] Update bin NMU logic

commit 8a95cf973db1ace9ce928711a1d82bbb4c564712
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:19:50 2008 +0000

    [wanna-build] Use auto_dep_wait, add_one_built and add_one_attempted
    
    Use new build states.

commit 034cf819b3ac697b7a5d5db383167dc2dc30c0da
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 21:14:01 2008 +0000

    [wanna-build] Don't import Sbuild::Sysconfig variables into namespace

commit 253cef775e8e008b2bf81406866a7f892cc8db26
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 19:27:11 2008 +0000

    [wanna-build] Remove Dep-Wait-Removed

commit d865650d45cb798f09a0efe142d2a4e2bd3d9852
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 19:17:40 2008 +0000

    [wanna-build] parse_deplist: Check dependency syntax

commit c3bc666779ef218e7eb3b81860fe23fb9be64219
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 19:12:22 2008 +0000

    [wanna-build] Remove propagate_ta

commit 0f1e5b9d626637e6022f9bf547b2134c30abbf05
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 19:11:00 2008 +0000

    [wanna-build] Remove use of propagate_ta

commit 936e795be9795b4651f24c7abcb4ec0677081cf3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 18:39:04 2008 +0000

    [wanna-build] Add add_one_attempted and add_one_built functions

commit 2fae9e0d01aeeff8efaded618d398e5163e07ba7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 18:20:46 2008 +0000

    [wanna-build] Add get_unsatisfied_dep and auto_dep_wait functions

commit 85ebbf24a50fa88fa517908042781f74fa96d054
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 27 18:18:45 2008 +0000

    [WannaBuild::Conf] Add priority, noadw and hidden distribution parameters

commit 89ccc1c2ce81f5cfdf86030c65c739206fd9ff9d
Merge: ad04168 74e1e62
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 12:47:25 2008 +0000

    Merge branch 'wb-object'

commit 74e1e62aa4795e777349e5f7cfb67435d665b18c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 12:47:07 2008 +0000

    [Sbuild] Use timegm in place of timelocal

commit ad04168c6a297d7e536f1524327038f29087a6af
Merge: 8db88f4 2f31371
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:57:02 2008 +0000

    Merge branch 'wb-object'

commit 2f313711ffa393dc09d85395c321ab942ed18159
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:56:35 2008 +0000

    [TODO] Add explanation of reference issues

commit 911afbe40b274307e44031e876b8601c58b4c5c2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:53:26 2008 +0000

    [TODO] Add new items

commit 3674c7e4cff6368242e90a16b5c6c21e2939b200
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:52:28 2008 +0000

    [WannaBuild::Conf] Merge DB_DISTRIBUTIONS and DB_DISTRIBUTION_ORDER

commit 1275d2a43a30a5d9285d00fcd7453652043d4507
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:36:37 2008 +0000

    [wanna-build-statistics] Add Built and Attempted

commit b13d2463c90891c0a0e662f3d7970d23e927abec
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:35:34 2008 +0000

    [WannaBuild::Options] Add new --built and --attempted options
    
    Also update list states

commit bb10748357b43644e9d737cd468e32fef9116c44
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:34:39 2008 +0000

    [WannaBuild::Conf] Deprecate propagation and down-propagation
    
    Also remove from WannaBuild::Options.

commit ebac97b7d9dc29c023a24b15220ce820b191db5b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 24 11:30:17 2008 +0000

    [wanna-build] Use gmtime in place of localtime

commit 8db88f4e0e3b4b890671284a7d0ee80be5620404
Merge: 82b6b08 52332cc
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 23:18:43 2008 +0000

    Merge branch 'wb-object'

commit 52332cc6070129697d1bbc58cab33c44624cf80e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 23:11:27 2008 +0000

    [bin] Add comments for future work

commit cf4ae61569dc91a8fe0c02d51f58bca8e1387b1e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 15:18:47 2008 +0000

    Remove redundant function prototypes from object oriented code

commit de421674aa234d0fa344eb4f164712563d2ac3d4
Merge: 38b051a 1dc51c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 14:48:32 2008 +0000

    Merge branch 'wb-object' of ssh://git.debian.org/git/users/rleigh/sbuild into wb-object

commit 38b051a1777ad2a3fc0d717d5939509363b6857d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:19:34 2008 +0000

    [Sbuild::Utility] Use Sysconfig program paths

commit c9b8961aed77145a3e3bc037dc59530d29761189
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:19:04 2008 +0000

    [WannaBuild::Options] Use correct program name

commit a0a0b600ac7b32e19192641a2ff02d219c39aa06
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:17:11 2008 +0000

    [Conf*] Use DEFAULT values in configuration setup
    
    All "our" variables used by configuration files are now
    undefined, so that the defaults will be used if they are
    not set.

commit d07c49da637e6ade1254bf9f79e6106790946ccb
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:14:51 2008 +0000

    [Sbuild::ChrootSudo] Remove unused modules and use Sysconfig program paths

commit 043a28a3da22dc8fb7b8f22a25b60d26ef474a77
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:14:11 2008 +0000

    [Sbuild::ChrootSchroot] Remove unused modules

commit 702ec289dae92dd9453226693071cf89702c0208
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:13:32 2008 +0000

    [Sbuild::ChrootPlain] Update to use new option hash chroot commands

commit ce43ffe7362b0de99efbb458d05768b67053917b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:11:38 2008 +0000

    [Sbuild::ChrootInfo] Update arch handling for default arch in Sbuild::Conf

commit 1e1cbd7d8a790cd8cc0f6f2dcb449b29885bf2d4
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:10:39 2008 +0000

    [Sbuild::Build] Use Sysconfig release_date and program paths

commit 59fb8f1ecfe1f16ec422a8c5898fb4557b74b132
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 23 11:01:18 2008 +0000

    [Sbuild::Sysconfig] Add additional programs and paths

commit 9b881119617320175ab916d7cbf64e1fadb24060
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 22 10:32:24 2008 +0000

    [sbuild-*] Use new Sysconfig paths and chroot command exit status

commit 1dc51c997047712b8610bff954c1fb563b06b15b
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 19 21:21:59 2008 +0000

    [wanna-build] Include DB_BASE_NAME in transactlog name

commit 82b6b08d8502489ceb44d6be789c673798c9eb4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 19 21:17:37 2008 +0000

    [wanna-build] Revert transactlog initialisation

commit f85a86ac75d35ad5af0ab75869640eaa5f0541d7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 18 23:25:52 2008 +0000

    [Sbuild::Conf] Split into Sbuild::ConfBase and WannaBuild::Conf

commit c23db98c1888267364337862004c9af891563d9f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 23:04:38 2008 +0000

    [Sbuild::Sysconfig] Update copyright

commit a0b09c87efe3ffbbf1bd9d1fffdffa27e596db24
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 23:02:56 2008 +0000

    [Sbuild::Sysconfig] Add paths and program paths from configure

commit e570d719d156ec236a9bcece1e852b072c76fe7a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 22:16:22 2008 +0000

    [Sbuild::Conf] Split check_config into separate validation functions

commit 34686a86299fc79223ebf9deb47bd059e3ac22c4
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 18:10:36 2008 +0000

    [Sbuild::Conf] get and set can call key-specific methods
    
    Used to validate values, and perform additional tasks.

commit 718a0ef9fec51175ccc1dcf1883d6274c49656b4
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 16 18:02:43 2008 +0000

    [Sbuild::Conf] Store defaults and values inside allowed keys hash

commit c385a490e994f99d44ef2727f88741d5b431fbb8
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 15 23:11:07 2008 +0000

    [wanna-build] Use Sbuild::Conf in place of WannaBuild::Conf

commit d9c4201acdea03f351e10644c9e708be038e0357
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 15 22:02:06 2008 +0000

    [WannaBuild::Options] Add Getopt::Long options parser for wanna-build
    
    * wanna-build uses both the new Sbuild::Conf options, and this new parser.
    * wanna-build also uses hostname from Sbuild::Conf, and version and release
      date from Sbuild::Sysconfig.
    * Sbuild::Conf sets HOSTNAME to the FQDN.
    * Sbuild::Conf sets additional allowed keys for non-configuration file
      configuration options required for option processing.
    * Sbuild::DBInfo.pm provides additional metadata needed by wanna-build.

commit bb67fc851d3609e079a5f46661466d8f698e08aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 15 00:49:53 2008 +0000

    [Sbuild::Conf] Add roles to parse different key subsets

commit 95374ad78dd858c5557e10f26c2d9c3c845b2c58
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 15 00:05:24 2008 +0000

    [Sbuild::Conf] Add wanna-build configuration with db_ prefix

commit ff011c3d182174f48d85eee3653be89d9d7d49c7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 22:40:26 2008 +0000

    [wanna-build-merge-*] Rename from do-merge-*

commit 6be633a3bc25083bd105746372f239b68784e2b7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 03:22:54 2008 +0000

    [build] Install wanna-build-catdb* symlinks

commit 6d899809640787a1a3958333dd204b5aaa2b8777
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 03:19:21 2008 +0000

    [Sbuild::DB] Update module description and copyright dates

commit b3fc8dfb96cbdc176b01decc1724d5dfd21a258e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 03:18:25 2008 +0000

    [wanna-build-catdb] Support MLDBM format databases

commit 1ad37c2bbbcdddc974c5c94c268eab05f9dafb9a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:50:39 2008 +0000

    [sbuild-stats] Remove support for avg-pkg-build-* symlinks

commit 30a62010d31a8bce1c0480462fd18c3ca8780593
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:49:53 2008 +0000

    [debian] wanna-build: install state directory and script symlinks

commit 7ee1dceae160f17364438d9ab20c038eee673110
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:17:53 2008 +0000

    [wanna-build] Reindent parse_quinn_diff regexes

commit c2ab50a4f8b59ddf16eec26fb06fbfc585a153b0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:17:19 2008 +0000

    [wanna-build] import and export _userinfo data

commit 5dfb390b872afe3e15c9f33f963a2334bb8469ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 02:15:42 2008 +0000

    [wanna-build] Use isin from Sbuild

commit 8e3bf427cbf8a97fcf3f839d3b869244cf14919f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 14 01:09:41 2008 +0000

    [wanna-build] Fix uninitialised variables

commit 078a88b1e3f40697a7bcdcc121f804cb4c489656
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 11 21:09:09 2008 +0000

    [Sbuild::DB] New wanna-build database abstraction class

commit 22a8bc66dc64b1275644c28a656364f4de98333d
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Dec 4 20:14:22 2008 +0100

    [Sbuild::Build] add hostname to log output

commit 51424d5835235702e2d9d6f44f5538d63cc675ed
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 3 01:06:28 2008 +0000

    [Sbuild::Build] Use Source: rather than Package: when parsing DSC

commit a2a7457bbb783792660447d68848712fa5d8ccbb
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 3 00:54:19 2008 +0000

    [Sbuild::Build] Split set_dsc version logic into set_version
    
    set_version is called after downloading sources with the
    version set in the DSC file.  This prevents the epoch
    being lost (since it is not part of the downloaded DSC
    filename, which was previously used to get the version).

commit 2745141596f438de9c2603728bd5f62ff1bf9630
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 3 00:37:13 2008 +0000

    [Sbuild::Build] set_dsc splits version into epoch, upstream and debian parts
    
    The DSC Dir parameter now only uses the upstream part, which will
    quell dpkg-source warnings about the directory used to unpack
    the sources containing the debian version.

commit 9ff060b7633587b6a7e98c94e137a26b3a4426c6
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Dec 2 23:49:32 2008 +0000

    [Sbuild::Build] filter_dependencies apt policy checking fix
    
    Check that a package exists in the apt policy results before
    doing version checks.
    get_apt_policy returns a hashref rather than a hash.

commit 6e717cff0023e877aa46287b1148535033163af9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 23:28:13 2008 +0000

    [Sbuild::Build] Don't display "Hack binNMU" message by default

commit 95b45d121cf051479ac636414d916db8251ae2ee
Merge: 800f332 b065f5a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 23:26:35 2008 +0000

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit b065f5a476a2bc5900df1e25f24f26bccbebc81a
Author: Philipp Kern <pkern@debian.org>
Date:   Sat Nov 29 21:15:44 2008 +0100

    [Sbuild::Build] check if BIN_NMU_VERSION is defined

commit ee2f32a4228c3d0faf9a97d26e138ef940e14e43
Author: Luk Claes <luk@debian.org>
Date:   Sat Nov 29 20:55:21 2008 +0100

    Add the binNMU version if any

commit 800f3321c8201523ebcf57befc19f9eca74904ac
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 10:11:09 2008 +0000

    [Sbuild::Build] Restore log symlink for non-buildd use

commit 4ec8035e34e20bd588e56f663c8bd0736fd7c0f9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 00:35:44 2008 +0000

    [Sbuild::Build] uninstall_debs: Don't concatenate array members

commit 1e6c59748bd2f349c23eded7318a339654ed0182
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 00:34:45 2008 +0000

    [Sbuild::Chroot] Remove default use of global environment
    
    sbuild sets environment in chroot defaults.

commit d1a73cbf35b3d5c05029a26fe553576a6075858e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 00:02:49 2008 +0000

    [Sbuild::Chroot] Add run_command_internal and run_pipe_internal
    
    Needed to define INTCOMMAND without clobbering it if
    previously set by run_apt_*.

commit 6a14627241847129cc8d190b8b0de16e81282a71
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 29 00:02:02 2008 +0000

    [sbuild-upgrade] Upgrade rather than update

commit 7d6d752310b9f4b08c8bff10f118715499c36a3a
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:11:24 2008 +0000

    [TODO] Remove completed items

commit da9085830dd6733471509fee0114f8a23cac12c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:07:25 2008 +0000

    [Sbuild] Add devnull stream

commit ac36369c8e049f44c2177288c746b746b8150aae
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:06:35 2008 +0000

    [sbuild] Set default chroot command I/O streams

commit ec49ae9cc6669b9a60d04b0a9186181b93748153
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:08:39 2008 +0000

    [Sbuild::Chroot] Update to use command defaults
    
    - Redirect streams if set in command hash or in
      command defaults
    - Set environment correctly
    - Set split mode APT command correctly
    - ChrootSchroot and ChrootSudo handle host commands
      correctly
    - ChrootSudo re-quotes argv for su shell execution

commit 15fa28a7494dbc1ea2ffe2fa3da830a2e382b73b
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:05:27 2008 +0000

    [bin/sbuild-*] Update utilities to use new chroot exec hash functions

commit efc3a0cbfec037248034aa526ac5c9d411bf4617
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:01:46 2008 +0000

    [Sbuild::Conf] Fix typo in sudo sanity checks

commit d561e9949fa1602be8f0e61f4d13052578bedb65
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 21:00:54 2008 +0000

    [Sbuild::ChrootInfoSudo] Add get_info method

commit e25f798dc248d920dc163683909735424242c03d
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 20:59:06 2008 +0000

    [Sbuild::Base] Log to STDERR if Log Stream is unset

commit 68adb64c25730c6f1fd47ad4e314a46fa6f8fa4f
Merge: a88e709 2d0d8dd
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:56:53 2008 +0000

    Merge branch 'master' into chroot-exec-hash2

commit 2d0d8dd7a21e1e417c6cf0ede383e5ad32022cd5
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:55:14 2008 +0000

    [sbuild] Set build Log Stream before and after opening build log

commit a88e7096186491b9d0f2eb0e996137b36339d291
Merge: 92d7501 35883e6
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:43:52 2008 +0000

    Merge branch 'master' into chroot-exec-hash2
    
    Conflicts:
    
    	lib/Sbuild/Chroot.pm

commit 35883e645d5f22a883e2d16333ac5f511939dd96
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:28:39 2008 +0000

    [Sbuild::Build] Don't default Arch; it must come from chroot_arch()

commit d96b06307aadc51ab7b0d228e5a1252614064f1c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:25:50 2008 +0000

    [Sbuild::Conf] Allow ARCH default specification as $arch

commit 0c0b22289b0880022381d5829aa07492e7ab3d63
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:21:34 2008 +0000

    [Sbuild::Conf] Rename USER_ARCH to ARCH

commit 850c881527bf89c57da7420095413e3b3c2fc6ac
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:18:22 2008 +0000

    [Sbuild::Conf] Rename ARCH to HOST_ARCH

commit 05f19e48a6f63429f77c43e47eddf0c7bbf7a5fa
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 13:14:02 2008 +0000

    [Sbuild::Build] Use chroot-specific Arch in favour of global ARCH

commit 92d7501acac145e75003281645d796f979aaadd6
Merge: 2b1231d e176d54
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Nov 28 12:23:39 2008 +0000

    Merge branch 'master' into chroot-exec-hash

commit e176d541cc363283f6aca543ff8a8e2cb0aa88d9
Author: Luk Claes <luk@debian.org>
Date:   Fri Nov 28 12:44:44 2008 +0100

    Also show the architecture in the subject

commit 29ea88b2dea55224a640244bad32467c92cf5de4
Author: Luk Claes <luk@debian.org>
Date:   Fri Nov 28 11:42:36 2008 +0100

    Temporarily make ARCH user configurable

commit e0424f9c957586aed6d123bd9f207b29f97e78d0
Author: Luk Claes <luk@debian.org>
Date:   Fri Nov 28 10:28:27 2008 +0100

    Don't barf when main::current_job is not set

commit 60fb8e6850ad1b2822ae8b6b1c0ab6f826b87125
Author: Philipp Kern <pkern@debian.org>
Date:   Fri Nov 28 10:16:38 2008 +0100

    [Sbuild::Options] tell getopt that --archive needs a string argument

commit 13f40aa248a07b1a588f3ec8d12653006f5b8059
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Nov 27 20:49:29 2008 +0100

    [Sbuild::Options] correct a typo

commit 15f02471ac9db4fb6dbc50780fd0a35229632f17
Author: Philipp Kern <pkern@debian.org>
Date:   Thu Nov 27 20:48:45 2008 +0100

    [Sbuild::Conf] declare $archive

commit ecf47d17540569730d4ea8b8523d47ef7bb46fdb
Author: Luk Claes <luk@debian.org>
Date:   Thu Nov 27 19:44:52 2008 +0100

    Multiple archive support

commit 6d1f3dcb6e4b1b9d8ce86618f3cabfaa3d7d2673
Author: Riku Voipio <riku@debian.org>
Date:   Tue Nov 25 21:26:41 2008 +0000

    [buildd-mail] Decode Base64 and quoted-printable mail
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit e3686a370e51461151861659c356f3df5404c5ef
Author: Kumar Appaiah <akumar@debian.org>
Date:   Tue Nov 18 22:44:25 2008 +0000

    [man] sbuild.1.in: Document --use-snapshot
    
    Thanks to Kumar Appaiah for this patch.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 2b1231d0ff8adf60a8a5f28ecdb5f47a738365b2
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 11 00:10:48 2008 +0000

    [Sbuild::Chroot] pipe_command can open pipes in both directions
    
    Piping is now possible in (stdout from child to parent) or out
    (parent to child stdin) using the PIPE command option.

commit 74c2c35b45b96830157521ed4b0fe82e9867e284
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 11 00:09:53 2008 +0000

    [Sbuild::Build] Pass files with correct pathnames to check_space
    
    check_space now always runs on the host

commit 692933a9fa2eedce0fdf401e77a397d5b72cdaaa
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 10 23:16:35 2008 +0000

    [Sbuild::Chroot] _command functions take single hash argument

commit f95ac6af7c9f4d9e07d07310f0fcd9f8ca8e90fe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 21:52:31 2008 +0000

    [debian] compat: Update to debhelper version 7.
    
    debian/control: Build-Depend on debhelper 7.

commit 623b23020380e891a52cfc7e4afa2c14b6c20c31
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 21:50:53 2008 +0000

    [debian] rules: Clean up old unused code
    
    Also correct patching of config.status and config.guess.

commit c8efa2815c4d93b6e351bacf35b26bc51e1bf056
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 21:26:50 2008 +0000

    [Sbuild::Build] Improve startup message logging
    
    File lists at build end use subsubsections to log package names.

commit 90dd74524e5f5cbf21ee636ceea4180fbfb0262e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 20:32:37 2008 +0000

    [Sbuild::Build] Use chroot pipe functions
    
    Replace use of IPC::Open3 with Sbuild::Chroot pipe functions.
    This handles piping, logging correctly in all cases.
    
    DEVNULL stream removed from sbuild, now reimplemented in
    Sbuild::Chroot.

commit 0d9d909ee580ac0abf9fb3f8d4ec0028ca024637
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 20:28:49 2008 +0000

    [Sbuild::Chroot] Add pipe functions
    
    pipe_command and pipe_apt_command underlie the current
    run_command and run_apt_command functions, and call
    exec_command in the child process.  These redirect stdin, stdout,
    and stderr appropriately.
    
    Logging functions moved from Sbuild::Build to
    Sbuild::Base, so any derived class can use the log stream.
    
    The build log stream is set in the chroot object after creation.

commit 0b027c1f32017ee5d32f4d2e0313b6a072117126
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 20:22:51 2008 +0000

    [Sbuild::Log] Rename SAVED_STDERR to main::SAVED_STDERR

commit a19e3f90143dc07673ca9e23fa846c9285e3d04d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 20:21:55 2008 +0000

    [Sbuild] Move send_mail from Sbuild::Build

commit b2bed97c17e8f2cdc340098bd373e9bb6f6ee0be
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 8 14:49:28 2008 +0000

    [Sbuild::Log] close_log takes Sbuild::Conf as an argument

commit 8ac73f1498ba5a0766bc4c75e4b885b4d3ad3068
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 13:10:25 2008 +0000

    [Sbuild::Log] Remove *_pkg_log, log_symlink and send_mail
    
    These functions are now merged into Sbuild::Build

commit 6491a380e91bf44079028b199cb024b26aa7ea9e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 8 14:45:50 2008 +0000

    [Sbuild::Conf] Be verbose by default on a tty
    
    Move from sbuild, to allow user to override.

commit b0913071f7ef1f6d2b8c0a23b8da7cb1a14f6e5d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 13:04:12 2008 +0000

    [Sbuild::Build] Merge Sbuild::Log::*_pkg_log into *_build_log
    
    Sbuild::Log saves STDOUT to main::SAVED_STDOUT instead of
    SAVED_STDOUT to make it accessible to other code.

commit f4cb3520c9db209d01db560b4cb6e4723f884cfe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 13:03:34 2008 +0000

    [Sbuild::Conf] Override MAINTAINER_NAME only if unset

commit a47d89036198897f9125a7276c7e036fdb6f1d58
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 13:02:50 2008 +0000

    [Sbuild::Conf] Add LOG_DIR_AVAILABLE

commit e82ee2b9390b7f95e71bca9d4251160b120ffbf4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 11:14:49 2008 +0000

    [Sbuild::Build] Add and use log_info, _warning and _error functions

commit c3143a1700822da934eaa45a4aa6c74477fa7510
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Oct 13 00:30:04 2008 +0100

    [Sbuild] Move debug logic from Sbuild::Build
    
    Sbuild::Conf sets global debugging state

commit 2baf96c4da6fca7a90a4d84384c076e855299c33
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 12 19:32:56 2008 +0100

    [Sbuild::Build] Set 'Sub PID' to undef

commit db25caae9e230cdee841f9817f5d8ff60bc29e7b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 12 19:09:29 2008 +0100

    [TODO] Remove completed items, add new item

commit bbb85a66ff73d268f52e9d77beb474cf6e718bae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Oct 12 19:06:45 2008 +0100

    [Sbuild::Build] set_dsc: Add debugging message

commit f4eb70bec598bb57e9e0c7679a1986bf79be9522
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 11:10:23 2008 +0000

    [Sbuild::Build] build: Don't access member data directly

commit 7e05780199144eafb87b7e2b53f060a4fd729883
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 11:09:39 2008 +0000

    [Sbuild::Build] Use get and set methods outside strings

commit b41da7dddac3c9866b668a6e9cab0bbab368a13b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 9 11:04:45 2008 +0000

    [PATCH] [Sbuild::Build] Add log and debug functions
    
    Rather than using PLOG and STDERR directly, add logging functions to
    abstract logging.
    Also use build get and set functions in sbuild.

commit 9b2e4b124414a0ecbce0160b57199121b9dd5f66
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Oct 1 00:27:23 2008 +0100

    [Sbuild] check_packages takes a chroot argument directly

commit facb2b0dd3c540f34aaf167e7d0d54d3e2586d5a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 22:49:40 2008 +0100

    [Sbuild] Move package checking from sbuild-checkpackages
    
    sbuild-createchroot now calls check_packages to set initial
    packages reference list after chroot creation.

commit cbf1d41c38847051bf684a93b3b77499423db01d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 22:49:19 2008 +0100

    [Sbuild::ChrootPlain] Always use split mode

commit 25e134e4c65dbfae4a9b6c9403ace3c63c10c6f9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 22:48:37 2008 +0100

    [Sbuild::Utility] Use new Sbuild::ChrootInfo chroot creation

commit a2e6716f315252816a15d6901b2aef7eee4eca91
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 21:25:07 2008 +0100

    [TODO] Remove completed item

commit 22409663cd7233dd4f3531829c5a78147060b51c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 21:23:21 2008 +0100

    [Sbuild::ChrootPlain] Fix to match new chroot interface
    
    Use in sbuild-createchroot to update package lists

commit b0aaeb35eb59fdc05949a2ebbd3c54775bdd31dd
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 21:22:15 2008 +0100

    [Sbuild::ChrootSudo] Remove redundant use of ChrootInfoSudo

commit 77c0d179d41ebe3bf1dc9336521df95be6215768
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 30 21:21:06 2008 +0100

    [sbuild] Refer to chroot, rather than schroot in message

commit 720176b07d5bbaec2f3c25efc2cb2b42d9025081
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 29 23:23:21 2008 +0100

    [Sbuild::ChrootInfo] Add create factory function to create chroots

commit 2570eb5a05e6b2505915181c365fe8881ec56f22
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 19:31:47 2008 +0100

    [sbuild-createchroot] Use POSIX calls instead of system where appropriate

commit 8c0292ece3826e1daeea704624268a9e4ac970d5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 17:05:57 2008 +0100

    [sbuild-adduser] Document sudo tasks and update user instructions
    
    User instructions now refer to helper programs in /usr/bin.

commit ed36a780817b1e8df76ae0ff04f640942b7b6d9a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 17:05:26 2008 +0100

    [sbuild-createchroot] Add sudo setup tasks and use new Sbuild::Conf

commit 553a001014b5fd248e38eec1ed2819bfbb0d3249
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 17:01:14 2008 +0100

    [man] Document /etc/sbuild/chroot

commit d89b4ebaca73910509e1e59887d6815df5f1eeed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 16:58:50 2008 +0100

    [Sbuild::ChrootInfoSudo] Look for sudo chroots in /etc/sbuild/chroot
    
    Look in /etc/sbuild/chroot in user mode, and in the current dir in
    buildd mode.

commit c4372d5e7524da2ec5088ae68673c2f5b937d948
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 16:58:14 2008 +0100

    [Sbuild::Log] Only create log symlinks in buildd mode.

commit bd415ac39b66adc07b1b966f5246cce75a07796c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 16:57:44 2008 +0100

    [etc] Document expanded use of $sbuild_mode

commit 506bc431fb7d231ef5c330a81954aeb41cd78f8d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 13:49:17 2008 +0100

    [Sbuild::Chroot] Remove debugging statements

commit 9f63af855b130074b701316e39c0f4d2241b65cc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 11:56:10 2008 +0100

    [Sbuild] Remove explicit namespace use in BEGIN block

commit 6b99b0c8f912c4f8740af66258276d3ac658bdf9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 11:06:59 2008 +0100

    [Sbuild::Utility] Use Sbuild::ChrootSchroot and Sbuild::ChrootSudo

commit a462d19bdd6a40ef59f7bccc0c30d29695d9743f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 11:06:39 2008 +0100

    [Sbuild] Don't include Sbuild::Conf (circular use)

commit 8e03bc2b82b4d35a1741614df9f8de84c9f7304a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 11:05:56 2008 +0100

    [man] Remove incorrectly added patch rejects

commit 904d2f9454480e76720bf425b9a6d0a51b042639
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 28 01:47:43 2008 +0100

    [build] Distribute new perl modules

commit a9e54d1d8e53c82fe85f08b334af4596c5395ddd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:57:21 2008 +0100

    [Sbuild::Conf] Default MAINTAINER_NAME to DEBEMAIL if set in environment

commit 2a4bdbb0da3dc06cc1210c37804d97cd50217b7c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:56:47 2008 +0100

    [man] sbuild.1.in: Document DEBEMAIL default for maintainer name

commit b06776951f696d4a8d49d3c5825cf5362049911a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:56:17 2008 +0100

    [TODO] Remove completed items

commit 9fa24be0b86b26f55d18f8fd2ee5cbae0a746c4b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:52:29 2008 +0100

    [etc] Update $maintainer_name documentation

commit 300026d49ca9202eedf7f5688aa76284bce124ff
Merge: 8cc4945 49ccd83
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:48:35 2008 +0100

    Merge branch 'sudo-branch' of /home/rleigh/sbuild/ into sudo-branch

commit 8cc494583af5fc604902e5d338a3a63a74fe8733
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:48:09 2008 +0100

    [debian] control: Depend on schroot or sudo, update minimum schroot version

commit 49ccd8395862285e7b15beead2e52b3e2af270c7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:31:52 2008 +0100

    [NEWS] Document CHROOT_MODE and CHROOT_SPLIT

commit 5b14c3cf6f42a4a9328b5aa421e47540255f0d50
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:28:39 2008 +0100

    [Sbuild::Chroot] Introduce CHROOT_SPLIT
    
    CHROOT_SPLIT allows apt/dpkg to be run outside the chroot for all chroot
    types.  sudo may now run entirely in the chroot.  schroot may run split,
    but needs sudo for root access outside the chroot.

commit a14229b5871c2819b02d1f283e2afd0faada214e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 27 22:25:46 2008 +0100

    [Sbuild::Chroot] Don't strip 'APT Options' in debugging messages

commit fd9e511b9082fce0abd69a97d98fb6c98d55b28f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Sep 25 23:04:13 2008 +0100

    [Sbuild::Chroot] Remove redundant chdir calls

commit fca323478bd467c0271f0d1314ef322393494b9e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 22:28:23 2008 +0100

    [Sbuild::Chroot] Add apt_chroot virtual function to remove code duplication

commit 5557666211e639ce5280c34a9c23ecf42a9ec72e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 21:45:34 2008 +0100

    [Sbuild::Chroot] Move chroot-type-specific code into derived classes
    
    Move schroot-specific code into Sbuild::ChrootSchroot.
    Copy for Sbuild::ChrootSudo but merge old sudo code.

commit e2b4fedf82762acdbbfdc77295476f9a80e53547
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 21:44:39 2008 +0100

    [sbuild] Only print USER_ARCH when debugging if defined

commit 1c9e05f2012c64a9d1686291c876ee211112771a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 19:29:02 2008 +0100

    [Sbuild::ChrootInfo] Move get_info_all to derived classes, and specialise

commit ab82d39a12fc29b8d5b393ac1a9532dae3df6be7
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 19:27:37 2008 +0100

    [etc] sbuild.conf: Update header comments

commit 864e66fe7b96e27d478ba8beb49f2848960a611e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 19:25:31 2008 +0100

    [Sbuild::Conf] Don't default USER_ARCH to ARCH
    
    This prevents Sbuild::ChrootInfo::find from finding the chroot when the
    arch is not specified, because this requires USER_ARCH to be undefined
    in order to not fail.  If ARCH is defined, it is required to be found.

commit c1c453d182164dc08574b7d80941166d73a7712d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 00:36:07 2008 +0100

    [Sbuild::Chroot] Subclasses set subclassed ChrootInfo

commit 98f792924fd6e6392e9f2d4d175547947f4edc18
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 00:35:13 2008 +0100

    [Sbuild::ChrootInfoSchroot, Sbuild::ChrootInfoSudo] Add new subclasses of Sbuild::ChrootInfo

commit 3ad11c7b01ff86ac563b52b46bf6e88ac512cb8e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Sep 23 00:24:08 2008 +0100

    [TODO] Add items for sudo support

commit 9c76f2e7dec7374fb58a224f96f8ec01dc549670
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 22:45:47 2008 +0100

    [Sbuild::Chroot] Update comments regarding root use of host system

commit f47af0c1d78ff31b9f3f56c40557590dc2dd2a83
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 22:45:30 2008 +0100

    [Sbuild::Conf] Add sudo sanity checking

commit b826a6197cc51ab0d85ee8f330d01d7ebd13771b
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 22:44:27 2008 +0100

    [man] sbuild-setup.7: Document sudo setup

commit 2ce3bb19e287c32e5a1052da774d88db6f8dd653
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 22:07:22 2008 +0100

    [etc] sbuild.conf: Add $sudo and document $chroot_mode

commit 5c699c42529d36a31261ad29a423ab900abf8e62
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 20:56:10 2008 +0100

    [Sbuild::Base] New class containing common class functionality
    
    Sbuild::Build, Sbuild::Chroot, Sbuild::ChrootInfo and Sbuild::Options
    derive directly from this base class, eliminating duplicated code for
    common get/set functions for local and configuration variables.

commit 4edb6bdc714755c9ad4720539abadd2104e083ee
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 20:37:58 2008 +0100

    Derived classes' constructors chain up to parent class constructors

commit 94d33ec6dbcb1634fea7c73b3389d2f8d9af0207
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 10:02:49 2008 +0100

    [Sbuild::ChrootSchroot, Sbuild::ChrootSudo] Add new classes
    
    Derived from Sbuild::Chroot

commit d0243f6daaffc7ebb99cbffdea5b21ff87de3826
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 09:58:20 2008 +0100

    [Sbuild::Conf] GCC_SNAPSHOT defaults to 0

commit f1ede44288de2f6a3d7db6a54b9db85106b08c8d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 09:43:34 2008 +0100

    [Sbuild::Conf] Re-add $chroot_mode

commit d44ec9359be1e4fab7f2e79ee56390aa496e3ccf
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 22 09:27:47 2008 +0100

    Use perl class methods to construct objects

commit efca075185cd92942e135e3d6f0f874e8b886fef
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 15:12:05 2008 +0100

    [Sbuild::Build] Don't use Sbuild::Options

commit 87221274a5b158f1e434771cc6f8cb540daaeecd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 15:10:56 2008 +0100

    [Sbuild::Conf] Move SIGNING_OPTIONS from sbuild

commit ab768d78207bc4d7fdd1dd098b81933f02f85127
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 14:51:49 2008 +0100

    [Sbuild::Conf] Move validation logic from Sbuild::Options

commit dba3de63c48c046344271956c9ad5f76f4fa0943
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 14:40:47 2008 +0100

    [Sbuild::Conf] Move GCC_SNAPSHOT from Sbuild::Options

commit 8d2f5866ee1749190f9b47d412a5f602f86f238c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 14:22:48 2008 +0100

    [Sbuild::Conf] Move LD_LIBRARY_PATH from Sbuild::Options

commit db05e4cf945abd414be4d9c217c921400b8a1158
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 13:58:22 2008 +0100

    [Sbuild::Conf] Move CHROOT from Sbuild::Options

commit 602bf5b7929f860504f299e59ef2777ee1596e51
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 13:43:44 2008 +0100

    [Sbuild::Conf] Move BIN_NMU and BIN_NMU_VERSION from Sbuild::Options

commit 2228b4c8c9bfcb7b31f9c5586f69066f68836977
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 11:17:03 2008 +0100

    [Sbuild::Conf] Move BUILD_SOURCE from Sbuild::Options

commit 3eac0bd75779e6c0cf139944c8431058d12b07bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 11:05:26 2008 +0100

    [Sbuild::Conf] Move MANUAL_SRCDEPS from Sbuild::Options

commit e97c119c82fcd82146114bfd8af6c137527bf2d3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 10:47:07 2008 +0100

    [Sbuild::Conf] Move BATCH_MODE from Sbuild::Conf

commit 8c3eedf9e83e922a43896d4d889c60d57a0c4387
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 10:31:57 2008 +0100

    [Sbuild::Conf] Move AUTO_GIVEBACK* and WANNABUILD_DATABASE from Sbuild::Conf

commit 5ae832c07b1970e0a6594be5dd44649c0cda6428
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 01:17:20 2008 +0100

    [Sbuild::Conf] Move BUILD_ARCH_ALL from Sbuild::Options

commit 6cfcdae55f68c883d646a1876986283ab314dd51
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 01:05:18 2008 +0100

    [Sbuild::Conf] Move DISTRIBUTION and OVERRIDE_DISTRIBUTION from Sbuild::Options

commit 15899e3189e3580bb1704bfc0cc7b53b37a9e362
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 7 00:04:32 2008 +0100

    [Sbuild::Conf] Move USER_ARCH from Sbuild::Options

commit 55dbdf34d3422799552f42d678fca7f9c652270f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 23:09:39 2008 +0100

    [Sbuild::Options] Add get_conf and set_conf methods

commit 7f9cb30656f81aef6c6ca514ed7e53beace2ded4
Merge: 8ace4d8 28e2fb2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 20:22:43 2008 +0100

    Merge branch 'conf-object'

commit 28e2fb2ac1c7e91852026e50e4a6ebeda8676b5c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 20:18:04 2008 +0100

    [TODO] Add new items

commit c7d7b18cd5e066a0f6954865e24103c08033c293
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 19:48:37 2008 +0100

    [Sbuild::Conf] Move globals into read_config

commit 6d3a7deae0aec7eb6f804a1f7be72c61a39e7d75
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 18:12:29 2008 +0100

    [Sbuild::Conf] Remove initialisation functions

commit f8d612ccb462a24e084ece1c091e7d542e7ef360
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 18:09:29 2008 +0100

    [Sbuild::Conf] Don't export %watches

commit ecf17fb355b82d02f4e9961ddc1aeac9467f84ee
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 17:42:56 2008 +0100

    [Sbuild::Conf] Don't export , , or

commit eb98ee56369fa5f44d420c508fbd4a916bcf7104
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 15:59:37 2008 +0100

    [Sbuild::Conf] Don't export /home/rleigh/bin /home/rleigh/bin /usr/local/bin /usr/bin /bin /usr/bin/X11 /usr/games

commit 46252effad307571563e8b68718b96654afab597
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 15:21:14 2008 +0100

    [Sbuild::Conf] Don't export

commit bc6d782275ba13531f950319df21b7cb5769bd58
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 15:18:16 2008 +0100

    [Sbuild::Conf] Don't export

commit 493a45e8d5f1026cfbf9bdb8123af74a288ae645
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Sep 6 14:48:29 2008 +0100

    [Sbuild::Conf] Don't export

commit cce8ca9d39961de52d99e7d7463527069424a9aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:34:36 2008 +0100

    [Sbuild::Conf] Don't export

commit 582c1fa8a7a6ae5aa505fea04ad5fd996e272940
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:27:26 2008 +0100

    [Sbuild::Build] Add missing variable in write_stats

commit c3214aec92953fe932025fc97adef63218e3a39f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:26:30 2008 +0100

    [Sbuild::Conf] Don't export @ignore_watches_no_build_deps

commit 5fb7b377940152f63b7eaf04267507b4aa1c1750
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:23:16 2008 +0100

    [Sbuild::Conf] Don't export $max_lock_trys or $lock_interval

commit 8be1c9b63c5aab6d41dfdd9af06f1052ce5acbd9
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:16:06 2008 +0100

    [Sbuild::Conf] Don't export $srcdep_lock_wait

commit 86a8c6f2f5ad6b8615d2943636f5ee0cf69e25d1
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:13:45 2008 +0100

    [Sbuild::Conf] Don't export $srcdep_lock_dir

commit 6e92e91d5e11b6cd337041e4a6818de65a67bb3d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:07:58 2008 +0100

    [Sbuild::Conf] Don't export $stalled_pkg_timeout or %individual_stalled_pkg_timeout

commit 7199cfbdfe31595428455a279cbace3df79b1573
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 21:02:05 2008 +0100

    [Sbuild::Conf] Don't export @toolchain_regex

commit 1c028626d2c5f92566d5dce14a114de97b64cc4b
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 20:57:54 2008 +0100

    [Sbuild::Conf] Correct typo in DCMD diagnostic

commit bc0ad01b834077ceafae9d2242ebeb6208636c68
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 20:56:30 2008 +0100

    [Sbuild::Conf] Don't export $purge_build_directory

commit f30f395afea8e3a82839ef37e08df895b50fea8d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 20:38:32 2008 +0100

    [Sbuild::Conf] Don't export $check_depends_algorithm

commit c36605e5549a6d64c46a15cc5b8a61029e899dd6
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Sep 1 20:11:10 2008 +0100

    [Sbuild::Conf] Remove unused @no_auto_upgrade

commit 748b80dac838971fcd41522d78b36c1af9afb6f5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:38:03 2008 +0100

    [Sbuild::Conf] Don't export $mailfrom

commit 151fc53f2f27e32434d89bea9738bdae5159951d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:34:46 2008 +0100

    [Sbuild::Conf] Don't export $mailto, and support %mailto

commit 0020050d05b72cc1c3e15fd9317e2f20d7a9941a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:21:15 2008 +0100

    [Sbuild::Conf] Don't export $log_dir

commit 5c89a38a951aba78731fe9d7518bf08622f1b6ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:06:11 2008 +0100

    [Sbuild::Conf] Don't export $pgp_options

commit 36c1bce55ee536a9b566769a3329e6884801cb92
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 21:02:17 2008 +0100

    [Sbuild::Conf] Don't export $build_env_cmnd

commit 2ed9a86edfb4c7e93246b74ca8e4c23deeb122eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 20:57:54 2008 +0100

    [Sbuild::Conf] Don't export $package_checklist

commit 08dcf8c669f20bac106e940da0a249478192f91c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 20:55:05 2008 +0100

    [Sbuild::Conf] Don't export $avg_time_db, $avg_space_db and $stats_dir

commit edddf90f7c8f128a1222cc46d16b854f6e268446
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 20:35:45 2008 +0100

    [Sbuild::Conf] Don't export $avg_time_db and $avg_space_db

commit 654a9da9aa8cfb0af1bf506d4bfe610926c9b53b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 19:00:36 2008 +0100

    [Sbuild::Conf] Don't export $md5sum

commit 62fa43afef5a4af74e1283082a25f4b2fbdb3cd4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 18:58:53 2008 +0100

    [Sbuild::Conf] Don't export $dcmd

commit dfe00b7d1ee4bcaecfd037f8888df40eea1818a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 18:48:49 2008 +0100

    [Sbuild::Conf] Don't export $dpkg_source

commit bc4824859c5d3906c678dc68e553c288d01a08af
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 18:31:01 2008 +0100

    [Sbuild::Conf] Don't export $apt_get or $apt_cache

commit 11c0ca22fbf3cf3b1dc5d33609664a135ad133bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 15:06:03 2008 +0100

    [.gitignore] Ignore emacs temporary files

commit 560d5b857e344cf04362e1aa4c6842382100e4fc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 15:05:40 2008 +0100

    [Sbuild::Conf] Don't export $schroot, $schroot_options or $fakeroot

commit e06cc9fa0e449276701d3934f2c90dff0a03ac11
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 14:51:01 2008 +0100

    [Sbuild::Conf] Don't export $su

commit fb99ea7bb872068e68193bedcd686c9415782da9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 14:50:11 2008 +0100

    [Sbuild::Conf] Don't export $dpkg

commit 8e134ecabaf8b2e8ffc87a94efe2b5b474086497
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 31 11:13:35 2008 +0100

    [Sbuild::Conf] Move ARCH and HOSTNAME from Sbuild::Sysconfig

commit ff2c8e983f2587393f3991d7218414ff7695bca1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 30 12:11:17 2008 +0100

    [Sbuild::ChrootInfo] Convert to object-oriented perl

commit 99e91163599630fcb5e8866dec6aba71ddf01796
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 30 11:34:54 2008 +0100

    [Sbuild::Utility] Don't use global $main::conf

commit 1252ca888cd2551c3d77a777ea11f80d1b5a2c22
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Aug 28 23:18:01 2008 +0100

    [Sbuild::Conf] Don't export $mailprog

commit b899e9580b2335038960f13678b900162d5f477a
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Aug 28 23:11:40 2008 +0100

    [Sbuild::Conf] Don't export $nolog

commit 8be90688395271d2d1375ef95c77c479f81559d7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Aug 28 22:58:23 2008 +0100

    [Sbuild::Conf] Don't export $verbose

commit 8ace4d8be3b0da0a1e54d10ed5b3bce58910438a
Merge: 8779030 185b93a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Aug 20 01:04:42 2008 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild

commit ddb04eeb66cc3d8a72b84805791a189475b1ed06
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 19 19:37:59 2008 +0100

    [Sbuild::Conf] Don't export $username

commit 185b93a466b91d044fadffc57a531454cfcf9bcf
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Aug 18 11:14:30 2008 +0100

    [man] sbuild-setup.7 changes ownership of /build to 02775

commit 4599db8ef75c97f7705c41a2dcff01e7eb6819e5
Author: Cyril Brulebois <kibi@debian.org>
Date:   Mon Aug 18 11:08:36 2008 +0100

    [sbuild-createchroot] Correctly parse --arch option
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit af51286ed07d0f5980cec6321d1b5f0cd955626a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 23:00:34 2008 +0100

    [sbuild-checkpackages] Replace $cmd with $mode

commit b811079b9d5be6b9e8e0cc8c433b2eeb84b1df15
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 23:00:34 2008 +0100

    [sbuild-checkpackages] Replace $cmd with $mode

commit d4b89394ec46b4285768dc18502927f814d8d20d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 22:56:31 2008 +0100

    [Sbuild::Conf] Don't export $cwd
    
    Sbuild::Utility::setup needs to be passed Sbuild::Conf to create
    Sbuild::Chroot.  This hence requires all utilities using Sbuild::Utility
    to create an Sbuild::Conf.

commit 8cfdc7051b186ace66248492c54e219c87b1297f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 22:39:42 2008 +0100

    [Sbuild::Conf] Don't export $check_watches

commit b7f55583148934bfa507dd658a14c46bde825148
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 22:35:41 2008 +0100

    [Sbuild::Conf] Replace $apt_allow_unauthenticated with APT_ALLOW_UNAUTHENTICATED
    
    Sbuild::Chroot needs to store Sbuild::Conf in order to access
    configuration details.

commit f41e2b2ccf045a0c559ee749f8ad2833f0ebea56
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 22:14:53 2008 +0100

    [Sbuild:Conf] Replace $apt_update with APT_UPDATE
    
    Sbuild::Options needs the options passing to the constructor,
    because options parsing alters the Sbuild::Conf namespace,
    which now needs doing via the Sbuild::Conf::set method.

commit d0f9b95b14d503b8619140c5a571ac6b9d63abc1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 21:57:03 2008 +0100

    [Sbuild::Conf] Don't export $apt_policy or %alternatives

commit 6871036ff31aa8f1dc83b5ca65215e64f58656d1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 16:05:14 2008 +0100

    [Sbuild::Conf] Don't export $HOME

commit b614317d0b4e71b2c7387fb38c17c08439707cb9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 15:54:03 2008 +0100

    [sbuild] Instantiate Sbuild::Conf and add to Sbuild::Build

commit 946aabacc2efa5c18c33c4c5caa189b38b15660d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 15:28:37 2008 +0100

    [Sbuild::Conf] Add object-oriented interface

commit 9032ef691037871cbad2bfa9a52490df0d1853c2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 15:26:50 2008 +0100

    [Sbuild::Chroot] Correct formatting

commit 8779030aa7272904b5b93942bb622b01ed4c0354
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 10:45:53 2008 +0100

    [TODO] Add buildd items

commit e19bc8cc43acddea40ffa2ac022430b5e9cf232e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Aug 17 10:41:12 2008 +0100

    Enable warnings in all perl code

commit 7b7ed3fb227cb460ff165bfcda4f9f8026d7344a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 16:49:50 2008 +0100

    [debian] Update README

commit fbe9f03569c6755c8b9ef0f040d448e1ba196e97
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 16:48:54 2008 +0100

    [Sbuild] Remove deprecated features post-Lenny

commit bcf029196c36ce3b32025644d2e6a657e88a9d79
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 13:21:47 2008 +0100

    [man] Fix typo in sbuild-stats.1

commit 510f63e7067916d1012d7679e166f96bebee91c2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 13:10:08 2008 +0100

    [Sbuild::Build] Use string rather than numeric comparison for '~*=PROVIDED=*='

commit 489590bad2cf0612afa8918b0fabbe4643e69fdb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 16 11:46:08 2008 +0100

    [build] Bump version to 0.58.0

commit 0ca2f965886b7f84086d28f4c418e38edaa86794
Author: Lucas Nussbaum <lucas@debian.org>
Date:   Sat Aug 16 11:41:18 2008 +0100

    [Sbuild::Build] ~*=PROVIDED=*= does not break Build-Conflicts
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 5c3d0a1cf1a0fe99102d85b95ab4e26c8eafb017
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:56:14 2008 +0100

    [debian] Don't install nonexistent avg-pkg* manual pages

commit 72ab2257287bc4e22616b0fc4f38b0d5818077eb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:23:44 2008 +0100

    [debian] Finalise changelog for 0.57.5

commit 78f7a789705a5a305380b4e6f8759e813dcaa9fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:23:26 2008 +0100

    [NEWS] Finalise for 0.57.5

commit 2aa631606101ab4ba7260433a0edfeaca6f9beae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:20:48 2008 +0100

    [man] Clean up synopsis and options formatting

commit 0c6397f5bffbf9facb16e8232631b4b2ed361f9a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 21:07:13 2008 +0100

    [debian] sbuild.postrm: Correct use of local to remove bashisms

commit b798d3cf0eb050282fb5f27e21735f7087bf977c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 20:41:31 2008 +0100

    [sbuild] $maintainer_name, $uploader_name and $key_id are now optional
    
    Some minor refactoring bugs for binNMUs are also corrected.
    
    Closes: #489557

commit f95eaf181c97fb4373da6367fa032c44bf0b224e
Author: Greg Hudson <ghudson@mit.edu>
Date:   Sat Aug 2 20:24:19 2008 +0100

    [Sbuild::Options] --make-binNMU should not assign an lvalue
    
    Thanks to Greg Hudson.
    
    Closes: #493325
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit aaaee469e124975e43bf1c524071bf50e99d7b1e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 20:18:46 2008 +0100

    [Sbuild::Log] Correctly format date in package log filename
    
    Sbuild::Build passes the package version and architecture in addition to
    the package name, as well as correctly formatting dates.
    Sbuild::Log correctly format the date.
    
    Closes: #493150

commit f466af5019ffdd53fbc06b3d5dfcfff6269062d3
Merge: 76e5e6f 410576e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:58:05 2008 +0100

    Merge branch 'long-options'

commit 410576e42d83e09b03bd8684aad9b5310e71d540
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:57:39 2008 +0100

    [build] Remove avg* command symlinks

commit 5f39c2dc8c2a11b832a029d71f00c965eb130693
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:57:05 2008 +0100

    [debian] debian/rules: Remove avg* command symlinks

commit f6961d9451a7508464547173cef30a8c822507b4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:56:16 2008 +0100

    [TODO] Add new items

commit 76e5e6f4ab17e6420d0968b8ee30e03b7e273b7a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:42:12 2008 +0100

    [sbuild] run_command is a method of $build_object, not a function

commit 1bc1f80a3091232ace719265ffc53ab611cbfd98
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:41:32 2008 +0100

    [man] Update sbuild-shell option formatting

commit f82ae935a1be30dd6c9482af5fb4c29647a6baa8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 17:41:04 2008 +0100

    [man] Update sbuild option formatting and copyrights

commit 662a071b5308f1bf4abaf04ebde6f5124be1b796
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 2 03:21:19 2008 +0100

    [sbuild-abort] Rewrite in perl
    
    * Added --help and --version options
    * Parse ps output robustly using perl regexes
    * Kill sbuild process group

commit 94cecc3c6e93fb370215f45c978b6009f1d89a53
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 12:17:33 2008 +0100

    [sbuild-adduser] Add --help and --version options

commit 694fbd961de878dc663f2809998fddec9e2189d3
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 12:12:15 2008 +0100

    [sbuild-checkpackages] Update copyrights

commit 873fde0efe3d2e171da067f666c5d264138fd264
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 12:11:13 2008 +0100

    [sbuild-checkpackages] Add --help and --version options

commit 1f54f55d63e9bb4464593b9152a7c906322162a4
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 12:00:36 2008 +0100

    [sbuild-apt] Add --help and --version options

commit 8723ae484a6795044794dc5f667f0bd5b8b19339
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 02:43:25 2008 +0100

    [sbuild-stats] Add --help and --version options

commit 21660306883b67ed29500021a0aab42e082055f8
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Aug 1 01:48:06 2008 +0100

    [sbuild-update] Add --help and --version options

commit 9dbdd413dc353ab9d3f68d953adfbeee4bccef2e
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 31 00:36:25 2008 +0100

    [sbuild-hold] Update copyrights

commit 2258bd3771ebae8565832279d5aee4f37ccb2845
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 31 00:35:47 2008 +0100

    [sbuild-shell] Add --help and --version options

commit d6a140bf04c814022fdf5990202be94a92f0684c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 23:54:35 2008 +0100

    [man] Document sbuild --help and --version options

commit 8d12dbc10edf0a48c529500c4b24019c8c077f94
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 23:53:00 2008 +0100

    [sbuild-createchroot] Use sensible @ARGV option counting

commit d38d977f4a0cd6c2c01af16ffdf9173c7196e21c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 23:52:16 2008 +0100

    [sbuild-hold] Add --help and --version options

commit aedad61155f047b4e9d4516a13f72591aab14f33
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 19:37:08 2008 +0100

    [Sbuild::Options] Add --help and --version options

commit 2dca33dc2e0454d6998daf08beeafb7f61e112da
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 18:58:24 2008 +0100

    [Sbuild] Move usage_error from sbuild-createchroot to Sbuild

commit d7679fce21d2eb11f459f22b8077f0becc6f3787
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Jul 30 13:55:07 2008 +0100

    [TODO] Add option parsing items

commit 2e7968b54c56d8e24f16645d6c62000f1a4df4e2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 13:55:03 2008 +0100

    [sbuild] Exit with 0 status when no build object exists

commit 7eaa13539e6542f553efbf81c2514cbfad2cbac8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 13:54:19 2008 +0100

    [sbuild-createchroot] Set up sources.list with --components values

commit a605979c837fa0da2dc44afb5a6f31cf1d0711f2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 13:44:43 2008 +0100

    [Sbuild::Options] Use isin from Sbuild
    
    Closes: #492577.

commit 28a510c7d768c22e4738cc45aad91c29069dc2f9
Author: Enrico Zini <enrico@debian.org>
Date:   Sun Jul 27 12:51:04 2008 +0100

    [Sbuild::Conf] New parameter apt_allow_unauthenticated
    
    APT authentication is now enabled by default, with this configuration
    parameter disabling the default behaviour.
    
    Closes: #492327.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 87140c82a3287712d5f3641f39ca31ad17640e2e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 12:17:14 2008 +0100

    [Sbuild] Move dump_file, help_text and version_text from sbuild-createchroot

commit ef2bd2269a87bfd86185b164df0210f0b6e98d86
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 12:02:18 2008 +0100

    [man] Document sbuild-createchroot options

commit 2f156e461b96157dfa1ca3bc117b7524810b185d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:22:01 2008 +0100

    [man] Bring sbuild-setup.7.in up to date
    
    - Use lenny in place of sarge in examples
    - Replace add_sbuild_user with sbuild-adduser
    - Update schroot documentation
    - Add quick start section, since most users will never need to read the
      instructions if using sbuild-createchroot

commit c0c33c118ac1d5f53b1efc51a039c9454dbf1948
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:21:03 2008 +0100

    [NEWS] Document sbuild-createchroot changes

commit 4297bbde36f3eb3adf8e9f9627b2c94211f31fda
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:19:47 2008 +0100

    [sbuild-createchroot] Rewrite in perl
    
    - Support most debootstrap options
    - Add schroot chroot definition to /etc/schroot/chroot.d
    - Add /etc/hosts
    - Don't rewrite /etc/apt/sources.list

commit 6f97f0941e433bafade492be17a5a5c7e813ba2a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:17:49 2008 +0100

    [sbuild] Don't use $Sysconfig::hostname

commit 875e5d234ce8a96ab6862a53b0f5957d988d2492
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 27 02:16:56 2008 +0100

    [Sbuild::Sysconfig] Export release date

commit dbc054f581c1feb85e33d7882074193a2c747c2b
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 7 22:05:17 2008 +0100

    [debian] Close #489794

commit aed048c57f9bacff4c903e8c293da02979253b71
Author: Francois-Denis Gonthier <fdgonthier@kryptiva.com>
Date:   Mon Jul 7 22:00:53 2008 +0100

    [Sbuild::Build] Use 'DSC' rather than 'DSC File' when checking sources

commit f6920f65913c995a00c90b09d444412ca5ab9910
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jul 7 21:58:34 2008 +0100

    [build] Bump version to 0.57.5

commit ea778d5bf971d551c135e2a55ac6ae433acaeb9c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:34:37 2008 +0100

    [Sbuild::Build] Add missing bracket

commit 0f349623a107556ddbf3c7d900bb4562ac453a18
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:25:47 2008 +0100

    [debian] Update to Standards Version 3.8.0.

commit 6f887f90234b44ba33175ac63f96ba65e26e0dd7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:22:38 2008 +0100

    [debian] Close bugs for release

commit 8c8e76abcc8059a1bdfaec98f849ff38c2b99552
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:22:05 2008 +0100

    [Sbuild::Build] Add additional uses of build metadata

commit 7f951f079a04a838c23788e70a6642ec26b1413e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 6 12:00:32 2008 +0100

    [Sbuild::Build] Unify package metadata handling
    
    Package version, name, and variants thereof are contained within the
    build object.
    Unpack directory name does not contain an epoch.
    The same information is no longer computed in multiple places.

commit 049b23d091e2c250927d2b2a8f8c654d71a6308f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 3 20:31:06 2008 +0100

    [Build] Correct use of DSC Base

commit d018c73cececa2ea4574c1d061b31ea199fc8e33
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 3 20:29:19 2008 +0100

    [build] Distribute lib/Sbuild/Options.pm

commit fcd0e092611983215cde33e981bcd465f865f621
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 12:49:30 2008 +0100

    [Sbuild::Build] analyze_fail_stage, install_deps, append_to_FINISHED and should_skip take no arguments

commit 93d6a3e5427a8f555708665f1b52b92450ed9322
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 12:44:11 2008 +0100

    [Sbuild::Build] fetch_source_files and build take no arguments

commit 6a932256022a7c828da1ad114a4442518a081b01
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 12:03:32 2008 +0100

    [Sbuild::Build] open_pkg_log and close_pkg_log take no arguments

commit fe4f60b39ad774940757ca2f06c66e49800923ae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 11:28:24 2008 +0100

    [Sbuild::Build] Store DSC, package and version information in class

commit 5a2afc8c74e335d0c71d6a127db8e5b121e0d281
Merge: 8786dd7 f077e29
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 10:42:37 2008 +0100

    Merge branch 'master' into options-object

commit f077e29c21a088417bc28ff1994ed8c1a0438c07
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 10:35:54 2008 +0100

    [NEWS] Bump version to 0.57.4

commit 8786dd74b64db0acd49de02fee9d2bda3ea56a26
Merge: 7ed5e04 cf5d3f2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 10:30:30 2008 +0100

    Merge branch 'master' into options-object

commit cf5d3f2ef4e8bd8c40f297e4d141b87f53ad9339
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 10:07:09 2008 +0100

    [README] Use new script names

commit db3534a5d362622f411e299e5a52aa14f3e7e3f4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 09:57:44 2008 +0100

    [man] Replace buildd.chroot with sbuild-createchroot
    
    Also replace adduser with sbuild-adduser.

commit b3c7e058587e02c1264b6c4a1b318f95d5d85d39
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 31 09:33:27 2008 +0100

    [build] Bump version to 0.57.4

commit 7ed5e042707d6c249d07e30ce6b9e6f6b2ba3e36
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 27 22:14:13 2008 +0100

    [Sbuild::Options] New class to parse sbuild options

commit 33e6557fe539d004c3568e4ba58b0d47183227cc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 25 22:56:30 2008 +0100

    [sbuild::Build] Path and filenames don't include epochs in version numbers
    
    Using epochs in version numbers can confuse make.  Make sure the epoch
    is stripped from the version number passed to dpkg_source.  Also remove
    from the path set by sbuild ("Chroot Build Dir").

commit 8bc3477690728ec2c61e8240b63df15b06de933a
Author: Niko Tyni <ntyni@debian.org>
Date:   Sun May 25 21:49:40 2008 +0100

    [Sbuild::Build] Correctly handle versioned provides
    
    Use "~*=PROVIDED=*=" in place of "=*=PROVIDED=*=" to change the sort
    order.
    Thanks to Niko Tyni for this patch.
    Closes: #395271.
    
    Signed-off-by: Roger Leigh <rleigh@debian.org>

commit 9bf1147149e23e9c21ede73a33a4e531cbd0553c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 25 21:36:27 2008 +0100

    [Sbuild::Chroot*] Use schroot "Session Purged" flag in place of "Session Cloned".

commit aab0bbd44d3ffc91123629f73c532f459fc5fc5a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 25 21:25:33 2008 +0100

    [Sbuild] Prototype copy()

commit 7d01e2475cf0402b97f16f66c9fae550f4253c31
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 25 21:25:19 2008 +0100

    [Sbuild::Build] Pass arrays as references where needed
    
    Some functions taking references to arrays were not being called
    correctly.

commit a3ab0b74b7caa8179723502b3f530a60377df115
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu May 22 00:31:29 2008 +0100

    [sbuild] Split options parsing into separate function

commit a7693de34454edae1515bf3faeb39af70dd38635
Merge: d92498b cb27716
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 23:03:46 2008 +0100

    Merge branch 'master' into build-object
    
    Conflicts:
    
    	TODO

commit d92498bd8e52b550ad2037d035cd59486bfdc622
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 23:00:06 2008 +0100

    [TODO] Note logging issues

commit b9ca49b4ebd1f434f0f08a8a55769bf237661567
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 22:56:56 2008 +0100

    [Sbuild::Build] Move Sbuild::Build from sbuild
    
    All Sbuild::Build module code moved from sbuild.
    lib/Sbuild/Build.pm is distributed and installed.

commit 9f4c7bdd5490a2a4d18f80038b68f406173f43b0
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 22:51:52 2008 +0100

    [sbuild] Convert build hash into Sbuild::Build class

commit 0e64d9b93f3d3907ca9973bc0728962a06bdb8c4
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 22:49:51 2008 +0100

    [Sbuild::Chroot] Don't export new

commit 265d7c46878ed221d679d46c1a4cb0e1ce907201
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 20 22:46:39 2008 +0100

    [Sbuild] copy() does not need a self argument

commit cb27716b39bd18237c326acd90341f0abb472cf5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:17:45 2008 +0100

    [TODO] Are build and package start times the same?

commit 5c97b2637772befb8ba488a5c85378690a81226b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:14:51 2008 +0100

    [sbuild] Move shutdown() to end of file

commit f737178c40f67334bd17450a0629aaec6478fe99
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:12:38 2008 +0100

    [Sbuild] Move copy() from sbuild

commit dc563c8cc3b612ccebaffbdc7a13fcd1bae39d1d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:08:24 2008 +0100

    [sbuild] build_new: Initialise 'GCC Snapshot' as integer, not array

commit e4e7623d05285dd738de54d4a4429b26326919bf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 18 00:06:29 2008 +0100

    [Sbuild::Conf] Move $stats_dir from sbuild
    
    $stats dir moved from main:: in sbuild.
    Exported by Sbuild::Conf.
    Defaulted to $HOME/stats
    Added to sbuild.conf and example.sbuildrc.

commit 3153173b82e01a337608b39744d3b01ea3f09b9f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:48:19 2008 +0100

    [sbuild] Replace %main::this_watches

commit c63103f59c3af302011bd7ad667a795dc9b22060
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:44:55 2008 +0100

    [sbuild] Replace $main::pkg_fail_stage and $main::useSNAP

commit 178084457605e7ebf6df75b98904eb034baa7fc9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:37:29 2008 +0100

    [sbuild] Replace $main::sub_pid and remove $main::shutdown in dump code

commit 1f2bbddaaaae3ef79a87133fff92b604c822a558
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:32:00 2008 +0100

    [sbuild] Remove @main::manual_srcdeps

commit 85becb50444ce3d7264ac0ba43adcb6da736620f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:29:22 2008 +0100

    [sbuild] Replace $main::ld_library_path

commit c38a2159c2fad7d2829e898845d934dc33c05e19
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:09:59 2008 +0100

    [sbuild] Replace $main::have_dsc_build_deps

commit 6eacf8707e13e2ee6f90fd2e2215387dbb42a121
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:05:45 2008 +0100

    [sbuild] Replace $main::dpkg_buildpackage_signopt

commit 5ced3fe4a5e8d2611794890f3ac6a3006a555113
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 23:02:56 2008 +0100

    [sbuild] Replace $main::deps

commit af5350febf6af09e595490fe6583f7161241fb35
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 22:56:29 2008 +0100

    [sbuild] Replace $main::database

commit d95c5b20a2488772cf84a3bd84190faad4dc05e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 15:54:14 2008 +0100

    [sbuild] Replace %main::changes

commit 1c0e1112ac1cc6e8069feb40597d7b0481bfc372
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 15:29:25 2008 +0100

    [sbuild] Replace $main::build_start_time

commit 699be6210a2c4afc0f79c827a3dad0b5b6f3263b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 15:27:11 2008 +0100

    [sbuild] Replace $main::binNMU*

commit 58ec0fd3dac94d33eb6132a69de92fd84b976e15
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 15:20:19 2008 +0100

    [sbuild] Replace $main::additional_deps

commit f4958e566442765e68bd09bb939e8e0ab2bcd7aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:54:59 2008 +0100

    [sbuild] Replace $main::sub_task

commit 0c5821b193619fe6303c75f6f64b4c1666458f90
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:52:34 2008 +0100

    [sbuild] Replace $main::override_distribution

commit 65d14bf861f397b72940a349ec1d1b1767616894
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:50:43 2008 +0100

    [sbuild] Replace @main::toolchain_pkgs

commit 2c50820f2918a018741a9fd8cff57e27fad93df0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:36:25 2008 +0100

    [sbuild] Replace $main::this_space

commit 68da16515960351060d733248bbb82b81879854c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 14:22:35 2008 +0100

    [sbuild] Replace $main::pkg*

commit dca244a0ab514edf7facfffe21521f6339400d4f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 13:38:36 2008 +0100

    [sbuild] Replace $main::ilock_file

commit f8424b500de79faa6df82c496119b1f3a05ca46c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 13:35:45 2008 +0100

    [sbuild] Replace $main::srcdep_lock*

commit 8bb1a7ef891e7c7bd862580495fb6ef4b02b06a6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 13:30:47 2008 +0100

    [sbuild] Replace $main::chroot*

commit bc97881530b28481d1757d93a421a68a50070930
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 13:17:59 2008 +0100

    [Sbuild::Conf] Move lock timeout settings from being hardcoded in sbuild

commit 66c4345d854f99aa14693aa85af8382b9e02f87c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:42:11 2008 +0100

    [sbuild] Replace $main::jobs_file

commit c2ed2a4deff575b72561a2fc99ac577db550a424
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:39:02 2008 +0100

    [sbuild] Remove redundant main:: namespace usage

commit 5bca06718b8d10a738a0416b1b2b1ea7146a3fb5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:37:31 2008 +0100

    [sbuild] Replace $main::build_arch_all and $main::build_source

commit 91ba7baddeb016e1d9608acc612a9b798d1203f7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:30:50 2008 +0100

    [sbuild] Replace $main::verbose

commit 070673d342353fa3f01ca781168f00de49bd2825
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:29:35 2008 +0100

    [sbuild] Replace $main::username

commit dcf8e7a70800445927ce6a51f1bab82adc7b3c95
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:26:46 2008 +0100

    [sbuild] Remove $main::nolog

commit 82cb64018a577f09f2ba45c21b747d0e5fc562ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:25:51 2008 +0100

    [sbuild] Remove $main::cwd

commit 6063f102efd1f29f186af77544cd370a5670658f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:23:46 2008 +0100

    [sbuild] Replace $main::auto_giveback*

commit e715a91f3fcb2a104dc9f199e9e1be23723fccb6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:11:14 2008 +0100

    [sbuild] Replace $main::batchmode

commit cfea6c6380573cea6bcc49a06b4dd2d3b85f836f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:07:34 2008 +0100

    [sbuild] Replace $main::user_arch

commit ff8e92121f12c89b87a9f1741f847183e4e73ba4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:05:58 2008 +0100

    [sbuild] Replace $main::arch

commit 3064be7160fc3b89647c79e1664dd9d3f871c422
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 12:03:35 2008 +0100

    [sbuild] Move global statements into main function

commit 5e5e987ad1dd5a7c51b5ff9d53c9709312f40989
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:57:58 2008 +0100

    [sbuild] Build object creation and initialisation separated into function

commit 286efa216265327730bd8faa236d3c4d6d2413f4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:52:06 2008 +0100

    [sbuild] Remove $session (2)

commit fbfda502dd1e248d4e63de72da914ec2c8ba82f1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:37:08 2008 +0100

    [sbuild] Remove $session (1)

commit 7dfc639c0b2585149d1bf256a3e0d367b01008c9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:20:13 2008 +0100

    [sbuild] Replace $main::current_session

commit 46c95673aa51801f6619744245f91244db712d71
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 17 11:16:01 2008 +0100

    [sbuild] Replace $main::distribution

commit 77b7a63008bc10012241908d549b0c1899d5f79b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 13 22:04:23 2008 +0100

    [sbuild] All functions take self argument

commit 9cbe303935b88c8c7a024c7a58a57776b1051c36
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 11 12:15:17 2008 +0100

    [debian] changelog: Remove blank line

commit fc4d76072737d1b1fe2a561f35c41285776c3a64
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 11 10:58:01 2008 +0100

    [NEWS] Update for 0.57.3

commit 7d660a72018eb82ae1f25ccc171a77171b59cf0d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 11 10:50:27 2008 +0100

    [debian] Finalise for 0.57.3.
    
    Closes: #479714.

commit 8a837f653a7c279454138a5bdd3d5ef1b00b433b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 11 10:35:15 2008 +0100

    [Sbuild::Chroot] Add directory argument to chroot _command functions
    
    This allows commands non needing to be run in the build directory to
    run if the build directory does not exist.
    sbuild no longer needs to chdir at any point.

commit fc34a567e6cc1b734d2d2ca918b9fe265b1efa3f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 4 09:32:37 2008 +0100

    [Sbuild::Chroot] Convert to object-oriented Perl
    
    * lib/Sbuild/Chroot.pm:
      - Add constructor and convert all functions to methods.
      - Remove all global variables.
    * lib/Sbuild/ChrootInfo.pm: New file; non-class functions from Chroot.pm.
    * lib/Sbuild/Utility.pm: Create and use a Chroot object.
    * bin/*: Create and use a Chroot object.  sbuild passes this to all
      functions using chroot functionality.

commit 79b01b95d9fbae7b0d023d4f0a41c801d2dad58a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 4 09:24:26 2008 +0100

    [utility] Call shutdown with signal name
    
    Needed to satisfy signal handler function prototype.

commit 28736396de60496f610f3b26d2ba8a3a72b39123
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 3 18:08:36 2008 +0100

    [Sbuild::Conf] Use INIT block to save need to call init() by hand

commit b272e02437348bc2651b9d38ee0dc91bb0d3da59
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 3 18:02:25 2008 +0100

    [Sbuild] Use same exporting style as other modules

commit 250ccf0cfced7c962d3f93cc8c00107f021f326d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 3 18:01:24 2008 +0100

    [build] Bump version to 0.57.3.

commit 39cf11d3ece825098e334c4e469ddbf5e02e511d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:33:08 2008 +0100

    [build] Install 50sbuild as an executable script

commit 15dd875fef35e97a36d0d63fc7325e0a045c6c57
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:32:36 2008 +0100

    [sbuild] Add architecture to build directory name

commit 56b85facd6ae3f64851e9d3814ec4744d8d133e9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:16:09 2008 +0100

    [build] Distribute 50sbuild

commit 4d537bdacfeaf3cebd10e95958fdd5156c718359
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:15:41 2008 +0100

    [NEWS] Add new features

commit 98625200505c9ae7cb2e031e1120ed2e86e1ef73
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 21:14:46 2008 +0100

    [man] Complete main markup of wanna-build manpage

commit 3c7c311076349d2acd47ae80c5b97e5d9b0fee60
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 19:14:26 2008 +0100

    [sbuild] Use dcmd to parse dsc files, rather than hand-parsing

commit 3897e3efd6497fee06e10ae08da90deb26d2fd9d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 18:53:08 2008 +0100

    [Sbuild::Conf] Don't require $mailto to be set if not a buildd

commit ba40d940c01ede790862446ce6075a32a285fdf4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 18:41:08 2008 +0100

    [man] sbuild.1.in: --distribution should be --dist

commit 7f3ebc296fa7d49b2d390a8a6e4c85fd7dff6028
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 18:36:47 2008 +0100

    [man] sbuild.1.in: Document --binNMU.

commit e9c0b218f9bc38646c0abf9f5a6c90ae5014014f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 18:21:15 2008 +0100

    [debian] Depend on debhelper version 6 or greater

commit aea12f9879e29a9a4779170063ca25360efdd14c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 17:55:51 2008 +0100

    [schroot] Include 50sbuild schroot setup script
    
    configure.ac: Add SCHROOT_CONF.
    etc/Makefile.am: Install 50sbuild.
    etc/50sbuild: New file.
    debian/sbuild.install: Install 50sbuild.
    debian/control: Replace the /etc/schroot/setup.d/50sbuild in schroot.

commit 9743e327843e20c4be4af7fbb826cb2a89f6450c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 17:42:17 2008 +0100

    [sbuild] Purge all built files and downloaded sources
    
    sbuild:
    - Create a temporary build directory for each job.
    - Don't track each file created within the build directory.
    - fetch_source_files:
      + Rename @made to @fetched.
      + Return 1 and 0 on success and failure, respectively, rather than a
        file list with "ERROR" to indicate failure.
    - build: Purge the temporary build directory, rather than individual
      files.
    - shutdown: Purge the build directory.
    - remove_files: Remove.
    
    Sbuild::Chroot:
    - _setup_options: Remove username from build directory path.

commit 065b015d2a6912b2e18e880eddc0f3045165a990
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 17:27:19 2008 +0100

    [debian] Ignore *.log

commit e66cf961c9f26fcb5e5ec57d7d530ae5a5a72a31
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 27 17:26:43 2008 +0100

    [debian] Add GIT repository details to debian/control

commit 9c83c00de48ac9fc1e876481e29d50ef8163719b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 22:17:15 2008 +0100

    Update authors, copyright and TODO items

commit 7e5af2977f281f5bcf9589dd3a5816f96076072a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 21:12:30 2008 +0100

    [sbuild] Add --chroot option
    
    Add --chroot option to specify a chroot separately from the distribution name
    
    Closes: #474160
    
    Thanks to Simon McVittie.

commit 4715bf080408263230a40a14a4b42e38054e5e52
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 20:24:02 2008 +0100

    [Sbuild::Conf] Add /usr/bin/dcmd as $dcmd

commit 56b57381674f2263404a0c0003730444b24bbebe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 13:25:46 2008 +0100

    [man] Update wanna-build manual page.

commit b6f7ba47f5549b9d814c8c030fb92e0c621639ca
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 11:50:02 2008 +0100

    [debian] Update README.Debian and remove README-buildd.chroot reference.
    
    Closes: #474487.

commit d2582f13ea7e376d875d736cbbb350e92453e33b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 20 11:36:04 2008 +0100

    [sbuild] Add --apt-update option to run "apt-get update" before building.
    
    Thanks to Timothy G Abbott <tabbott@mit.edu>.

commit 057baeebaaaf5cfd9f98c3359189f6dbecbf02a8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 14:10:03 2008 +0100

    Install shorthand symlinks for wanna-build

commit 23d4e773a550148a97a176a4276b89108bfe9278
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 13:37:28 2008 +0100

    man/sbuild.1.in: Add missing character
    
    Thanks to LI Daobing.

commit d39e96ca99b621350de1940c639300b21c189140
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 12:19:26 2008 +0100

    Generate ChangeLog automatically from "git log"
    
    ChangeLog is automatically generated using "git log" at "make dist"
    time, using the scheme already used in schroot.
    Version bumped to 0.57.2.

commit edd3a8274812e2cb24185b3ea10f19f2c782ea75
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 11:58:13 2008 +0100

    * Add back generation of man/sbuild-upgrade.1.

commit a8827a76c8974d86a0caa2e986470cc4f47d79f6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 11:55:02 2008 +0100

    * man/Makefile.am (man_MANS): Install wanna-build.1.
    * configure.ac: Generate man/wanna-build.1.
    * man/wanna-build.1.in: New manual page, replacing README.buildd,
      README.failcat and README.overview, which have been removed.
    * main/sbuild.1.in: Update configuration file description.

commit 8d45ac97c62d9a6cf9b259a8953729d18740566d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 6 11:49:38 2008 +0100

    debian/copyright: Build infrastructure is licensed under GPL3+.

commit d326029324795e01fd7ce22738749e1bfa4776fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 5 15:48:12 2008 +0100

    * debian/rules: Run dh_link in binary-indep target to correct symlinks.

commit cfd87fb9d364d3ef9faf564bdb940f63904b3045
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 5 15:32:22 2008 +0100

    debian/copyright: Update copyright holders and copyright information.

commit 9c4546cc55c247fd5abb7ef53d6d162916768d5e
Merge: ee54adb 0668d72
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 1 16:21:04 2008 +0100

    Merge branch 'master' of ssh+git://git.debian.org/git/buildd-tools/sbuild
    
    Conflicts:
    
    	ChangeLog

commit ee54adb2af57a3b34ede31f8cbf200e5a0f8aa00
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 1 16:18:41 2008 +0100

    * bin/sbuild
      (fetch_source_files): Remove use of verify_md5sums.
      (verify_md5sums): Remove.  The verification is already done by
      dpkg-source.

commit 0668d724b847010c41e1f47edfbf9f6bd690bae2
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 27 20:48:30 2008 +0000

    * Version 0.57.1.

commit c1e3cbc8699da54f9f540bdabc6436a128eaa668
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 27 20:47:37 2008 +0000

    * bin/sbuild (build): Don't parse output of dpkg-source.  Specify
      the build directory explicity.

commit 5863d59db761ac5a51628a16dbc9b4c969a8d328
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 02:47:13 2008 +0000

    [sbuild] Add missing optional function arguments

commit 48bf27b9eab42193fb6d0fc7d089d9cdccfbb7e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 02:46:08 2008 +0000

    [modules] All modules use function prototypes
    
    Buildd, Sbuild, Sbuild::Chroot, Sbuild::Conf, Sbuild::Log, Sbuild::Utility,
    and WannaBuild::Conf all use function prototypes.

commit c91e6e3328a3f067defef07a1e5f90ed4b5f38a9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 01:14:42 2008 +0000

    [buildd] shlibdb-compare, sourcedeps-makerev and update-shlibdb use function prototypes

commit f6bc158df626d7fe43583e3399826fded25627e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 01:14:02 2008 +0000

    [wanna-build] wanna-build, wanna-build-mail and wanna-build statistics use functionn prototypes

commit c99288116244aa65bad8fa3f8377bf7ec0874da9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:42:26 2008 +0000

    [sbuild] All helper programs use function prototypes
    
    sbuild-adduser, sbuild-apt, sbuild-checkpackages, sbuild-hold,
    sbuild-shell. sbuild-stats, sbuild-unhold, sbuild-update, and
    sbuild-upgrade use function prototypes.

commit a4f12d539bd2316f301c1bd0b401a7522782ecce
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:34:29 2008 +0000

    [wanna-build] do-merge-packages and do-merge-quinn use function prototypes

commit 5effe3c277fae3baaabfa78048628e80a2fc2ad1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:30:59 2008 +0000

    [buildd] check-old-builds uses function prototypes

commit e2ace785ad47467bc10ca33f61ba77ada4fd1b19
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:28:19 2008 +0000

    [buildd] buildd-watcher uses function prototypes

commit 0e41f152f837561f1e17929ea4fdf2cf965bc967
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:23:49 2008 +0000

    [buildd] buildd-vlog uses function prototypes

commit 66568b45e04fee9a89dee06d7393afa94254c9c0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:21:32 2008 +0000

    [buildd] buildd-uploader uses function prototypes

commit dea0ab085067877817c9ff5cc25117a630e5e967
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:19:23 2008 +0000

    [buildd] buildd-clean-upload uses function prototypes

commit a21f420524d96167c1dd5c76c9d7decdc97a6702
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 9 00:18:35 2008 +0000

    [buildd] buildd-mail uses function prototypes

commit c8fdc92f56027140848390749f3d8cc8770edc09
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 8 23:47:18 2008 +0000

    [buildd] Use function prototypes
    
    buildd and Buildd::Conf use function prototypes.
    Buildd::Conf also defines HOME and scopes function
    calls correctly.

commit 4e22dc818eda18ba11f8769c1e31e63d51f01c59
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 8 16:40:24 2008 +0000

    [sbuild] Add prototypes

commit 0f91a21da4dd120572e49d6d7d788dfafcc290b5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 8 03:52:04 2008 +0000

    * bin/sbuild: Pass date to open_pkg_log.  Pass current job and
      distribution to close_pkg_log.
      (open_build_log): New function to wrap open_pkg_log and print
      start message.
      (close_build_log): New function to wrap open_pkg_log, update
      statistics and print end message.
      (add_time_entry, add_space_entry): Move from Log.pm.
    * lib/Sbuild/Log.pm:
      (open_pkg_log): Pass date as an argument.  Don't print build start
      message.
      (close_pkg_log): Pass package name and distribution as arguments;
      don't pass build space.  Format date from $pkg_end_time.  Remove
      statistics updates and buld end message.
      (add_time_entry, add_space_entry): Remove.

commit 3508fafb0d2a1c0ee88cdf640f232a8be34f1571
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Feb 29 21:36:12 2008 +0000

    * lib/WannaBuild/Conf.pm: Define $HOME.

commit f2455a4aa02f6feaa336ed223ab9841c4e87fc4d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 26 21:17:09 2008 +0000

    * bin/Makefile.am (bin_SCRIPTS): Add wanna-build programs.

commit 995dddf09351f3e00beb1d6480d4348886f6e6fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 26 21:15:37 2008 +0000

    * debian/control: Add wanna-build package.
    * debian/wanna-build.install: New file: files for wanna-build.

commit 81022e92380ecf0e4ffb3ecd27d946d6c6aa273c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 26 21:11:13 2008 +0000

    * etc/Makefile.am (builddsysconf_DATA): Add buildd config files.
    * configure.ac: Add paths for buildd config files.

commit de472eea2a0a7dfe44ebbef67ace756d9da36f0e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 26 15:03:01 2008 +0000

    * bin/wanna-build-mail: Rename from wanna-build-mail.pl.
    * src/wanna-build-mail.c: Remove.
    * src/Makefile.am: (bin_PROGRAMS): Remove wanna-build-mail.c.

commit 07b603bc45178e2e440f207101ba8d5d45d439bd
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 23:55:37 2008 +0000

    * debian/changelog: Close #458779.

commit 9a7e1b878fb508bafbb11808e64487be67364092
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 23:55:10 2008 +0000

    * .gitignore: Ignore *.tar.*.

commit e7652023b714733b978ccd8003592bc8e8b45e1f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 23:54:37 2008 +0000

    * NEWS: Add changes for 0.57.1.
    * configure.ac: Create .tar.gz distribution tarball.

commit c8399a19c4ca4ddd278d222f7dfdd8fa7fbc6414
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 23:32:04 2008 +0000

    * debian/rules: set libexecdir to /usr/share, for compatibility with
      locations of scripts in earlier versions.
    * debian/schroot.install: use /usr/share in place of /usr/lib.

commit b8994766ebcf1323118a85d26f44bfbd37dd8a69
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 22:03:22 2008 +0000

    * lib/Makefile.am (perlmod_DATA): Add Buildd.pm.

commit 400cea155169082d2ae9f3cf528c374970ab8d01
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:57:27 2008 +0000

    * etc/buildd.conf: Update with default options.

commit 5639022c4baafcdff021fcd259ec9a00d61f2324
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:56:07 2008 +0000

    * TODO: Add conf as classes item.

commit 48354ac8f5c4685b9e79bd0ed4a8ffb6b3d00ddd
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:55:35 2008 +0000

    * lib/Buildd/Conf.pm: Add and export read function to read
      config.  Add checks from buildd.

commit c23c68ff826883efac6d89576112906ff4cbe109
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:55:11 2008 +0000

    * lib/Buildd/Conf.pm: Add and export read function to read
      config.  Add checks from buildd.
    * bin/buildd: Use Buildd::Conf.  Use Buildd::Conf::read in place
      of read_config().
    * bin/wanna-build: Remove isin function (now in Sbuild.pm).
    * bin/buildd-uploader, bin/buildd-watcher: Use Buildd::Conf.

commit 4a230058bf94136278b35b0895afaf5fb0dc48d3
Merge: c0a478e b27b9e2
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:42:50 2008 +0000

    Merge branch 'master' of git+ssh://git.debian.org/git/buildd-tools/sbuild
    
    Conflicts:
    
    	ChangeLog

commit c0a478e1890085bcfedb16b8e00ba9933dc5d162
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:39:40 2008 +0000

    * Update .gitignore files.

commit 27a97dd5af27489d681075df67dec8129c0b62f0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:38:02 2008 +0000

    * Makefile.am (SUBDIRS): Add src.

commit c4493778d634b59c6a0dfcbca6eb5af7592dd3b5
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:37:23 2008 +0000

    * etc/wanna-build.conf: Correct comments.

commit bff2e84485c42d1442e0015d6556fafaa971eb59
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:36:34 2008 +0000

    * src/buildd-mail-wrapper.c, src/wanna-build-mail.c: Remove
      shebang in comment boilerplate.
    * configure.ac: Generate new Makefiles.
    * src/Makefile.am: Build buildd-mail-wrapper and wanna-build-mail.
    * lib/Makefile.am (SUBDIRS): Add Buildd and WannaBuild.
    * lib/Buildd/Makefile.am, lib/WannaBuild/Makefile.am: New files.
      Install perl modules.

commit 49f7b659c0003564b0526f54550ae5d1572d354d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:10:07 2008 +0000

    * lib/Buildd.pm: Remove read_config function (replaced by
      Buildd::Conf).  Remove isin and binNMU_version functions also
      implemented in Sbuild.pm.

commit c62fffa8f9c0978503622823720cd559506c2e6a
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 21:07:42 2008 +0000

    * lib/Sbuild.pm: Add isin function.

commit b27b9e2351b5d3780730bcc57bbdac9d1bf7ae59
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 20:52:24 2008 +0000

    * Version 0.57.1.
    * configure.ac: Dump version to 0.57.1.
    * debian/control: Depend upon schroot >= 1.1.6.  This version includes
      a SESSION_CLONE property, used to determine if a chroot is cloned,
      and hence package removal may be skipped.

commit c7e38321323e752d8b79929aa165ce35d72fa38b
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jan 21 20:48:32 2008 +0000

    * bin/sbuild: Rename "Session Managed" to "Session Cloned".
    * lib/Sbuild/Chroot.pm (init): Rename "Session Managed" to
      "Session Cloned".

commit 4b39aec91b45740554b573c3b196edf5a6641c27
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 21:14:35 2008 +0000

    * bin/wanna-build: use Sbuild.pm.
    * lib/WannaBuild.pm: Remove (replaced by Sbuild.pm).
    * lib/Sbuild.pm: Add parse_date function (from WannaBuild.pm).

commit 42597d0ee7740fc62aedc500191f9cac7ed11ad5
Merge: 3d56c1a 81c60d0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:16:36 2008 +0000

    Merge branch 'master' of git+ssh://git.debian.org/git/buildd-tools/sbuild

commit 81c60d0da6884ae8f5475836256c57cbbd700e2a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:15:50 2008 +0000

    * Merge buildd repository.

commit f927a39d4293e350e5bfe9c8e07543fba47c3920
Merge: 1db0a9e 10d80a6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:15:29 2008 +0000

    Merge buildd history
    
    Merge branch 'buildd-cleanup'
    
    Conflicts:
    
    	.gitignore

commit 10d80a6e0369b3c6a0b69d66169aad5c42f338d6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:12:59 2008 +0000

    Move files for etc and lisp outside bin.

commit a9f3f1c28f3814b9b8d890374689255852a9162d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 18:00:38 2008 +0000

    Rename files to fit into sbuild scheme.

commit fd26bd4ea69b4777d34124118f8c7c67e974418d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 16:44:38 2008 +0000

    * wanna-build.conf.local: Remove.
    * wanna-build.conf: Update with a complete list of settings,
      including those from wanna-build.conf.local, removing unused
      variables.
    * wanna-build: Use WannaBuild::Conf.  Check if $conf::log_mail is
      defined.
    * do-merge-quinn: Use WannaBuild::Conf.  Check if $conf::stat_mail
      is defined.
    * do-merge-packages: Use WannaBuild::Conf.
    * WannaBuild/Conf.pm: Module to load wanna-build.conf, created
      from common code in wanna-build and do-merge-*, modelled on
      Sbuild::Conf.  This contains a complete list of default settings.
    * Update debian/rules to reflect changes.

commit 73333875e1d4b9547a860b58265b4dc9f6500f88
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jan 6 14:14:48 2008 +0000

    * Replace all references to /var/debbuild (or /var/state/debbuild
      or /usr/local/var/debbuild) with /var/lib/wanna-build for FHS
      compliance.

commit df88552ee67eb9742ef24f0db695c76b05a75032
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jan 5 19:14:04 2008 +0000

    * wanna-build:
      - Move @distributions and %dist_order into conf package.  Thanks
        to Florian Lohoff.
    * wanna-build.conf:
      - Add @distributions and %dist_order.

commit 3d56c1ab34e4884c15f61d8d0e1f6279d4156d57
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 13:10:02 2008 +0000

    * Remove sbuild-stats item.

commit 1db0a9ed09f9e6849fca6f209806d2e25e7f5553
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 11:38:19 2008 +0000

    * Version 0.57.0.
    * lib/Sbuild/Makefile.am: Install Sysconfig.pm.

commit 02e0f7df132e74246b1492860517ca00a463f0ab
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 01:32:44 2008 +0000

    * bin/Makefile.am: Create sbuild-adduser and sbuild-createchroot
      compatibility symlinks to $(sbindir).

commit 42908135b0d81c9d484dbac6272fe95da0142393
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 01:25:09 2008 +0000

    * NEWS: Add changes.

commit 60d8d1abb7d3f7e33310e739c895db14e7f9b1bb
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 01:24:37 2008 +0000

    * Makefile.am: Distribute all scripts and files.

commit b2aca5e6b18b15eba7b55609b8cfb6f73c6df16e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 00:46:52 2008 +0000

    * Update version.

commit 4535d9430134f0ff476f265ea862d93ab780de06
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 1 00:15:08 2008 +0000

    * man/sbuild-stats.1.in: Rename from avg-pkg-build-time.1.in.
      Update with --time option and examples.  Update copyright
      information.
    * man/Makefile.am
      (man_MANS): Rename avg-pkg-build-time.1 to sbuild-stats.1.
      (install-data-hook): Create compatibility symlinks for
      avg-pkg-build-*.
    * configure.ac: Add man/sbuild-stats.1.
    * bin/sbuild-stats: Rename from avg-pkg-build-time.  Use
      Getopt::Long.  Unify modes into $mode, and update database
      location based upon $db, which is also set if invoked through a
      compatibility avg-pkg-build-* symlink.
    * bin/Makefile.am
      (bin_SCRIPTS): Add sbuild-stats.
      (pkglibexec_SCRIPTS): Remove avg-pkg-build-time.
      (install-exec-hook): Symlink avg-pkg-build-time and
      avg-pkg-build-space to sbuild-stats.

commit a6a12c55322c7ab33a3052b71cf8556719cfe0b9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 29 14:52:58 2007 +0000

    * Document chroot abbreviations.

commit c5cdf3fd9088f08c39aa59b65ef0599fc2e9be69
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 29 14:29:06 2007 +0000

    * man/Makefile.am: Add new manual page.
    * man/sbuild-abort.1.in: New file.
    * bin/Makefile.am: Use new program name.  Create compatibility
      symlink.  Add --list and --set options.
    * lib/Sbuild/Conf.pm: Add and export $package_checklist.
    * configure.ac: Add sbuild-checkpackages.1.
    * bin/sbuild-checkpackages: Rename from bin/checkchroot.  Use
      $Sbuild::Conf::package_checklist for reference list location.

commit 4d32f457dd827c6d8789b6f5eb7df89ee06587a7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 29 12:59:54 2007 +0000

    * sbuild-abort.1.in, sbuild-apt.1.in, sbuild-hold.1.in,
      sbuild-shell.1.in, sbuild-update.1.in, sbuild-upgrade.1.in: New
      manual pages.
    * lib/Sbuild/Utility.pm: Call open_log and close_log in setup and
      cleanup, respectively (following setting nolog=1).  This is to
      create main::LOG and main::PLOG.
    * lib/Sbuild/Sysconfig.pm.in: Use Sbuild::Conf::dpkg.
    * lib/Sbuild/Chroot.pm (begin_session): Ensure $arch is defined.
      Use main::LOG rather than LOG.
    * configure.ac: Add manual pages.
    * bin/sbuild-apt, bin/sbuild-update, bin/sbuild-upgrade: Set
      DEBIAN_FRONTEND to "noninteractive".
    * bin/Makefile.am: Update script names, and create symlinks for
      compatibility with the old names.
    * sbuild-abort, sbuild-apt, sbuild-update, sbuild-upgrade,
      sbuild-shell, sbuild-hold, sbuild-unhold: Rename from
      abort-current-build, chrapt, updatechroot, upgradechroot,
      gochroot, chr-hold, and chr-unhold, respectively.

commit 296aa056705161b1518c01f427c82c12b002cfc3
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 28 18:12:44 2007 +0000

    * man/Makefile.am: Add sbuild-adduser.8.in.
    * bin/Makefile.am: Add sbuild-adduser.  Move sbuild-adduser and
      sbuild-createchroot to sbin_SCRIPTS.
    * bin/sbuild-adduser: Renamed from bin/add_sbuild_user.
    * man/sbuild-adduser.8.in: New file.

commit eab8bcf2f37c8d8b06958cc837c6b6d7b6af7c99
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 28 01:09:57 2007 +0000

    * Update copyright and GPL2+ licence boilerplate on all files.

commit 9ed6be65ea51616c1feccedebdd09f49d0784a66
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 22:02:32 2007 +0000

    * configure.ac: Create lib/Sbuild/Sysconfig.pm.  Don't create
      lib/Sbuild/Log.pm.
    * lib/Sbuild/Sysconfig.pm.in: New file.  Generate with version
      number, and determine hostname and arch.  Export arch, hostname
      and version.
    * lib/Sbuild/Log.pm: Rename from lib/Sbuild/Log.pm.in.  Remove
      substituted @VERSION@ and hostname and arch determination.

commit dd3b0774deaca8a4f5ddb4a1a627fabaed3f4230
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 20:07:27 2007 +0000

    * debian/*: Update packaging to use new autoconf/make.  See
      debian/changelog.
    * scripts/sbuild_release.m4.in: New file for generating release
      date.
    * scripts/global.mk: Global automake defaults.
    * */.gitignore: Update with new generated files.
    * man/*.1.in, man/*.7.in: Use @RELEASE_DATE@.
    * debian/.cvsignore: Remove.
    * bin/add_sbuild_user: Move from chroot/.
    * TODO: Add checkchroot updates.
    * lib/Sbuild*: Move from Sbuild*.
    * README: Move from chroot/README.
    * bootstrap: Add autotools bootstrap script.
    * configure.ac: Add autoconf template.
    * */Makefile.am: Add automake templates.
    * AUTHORS: New file.
    * ChangeLog: Start upstream changelog.

commit 4da0b2c85568d4eb6b9cbf0561e56476b36c646d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 12:37:30 2007 +0000

    * debian/rules: Move -stamp files to debian/.
    * sbuild.conf: Move to etc/.
    * example.sbuildrc: Move to etc/.

commit 22ff09b1ec065058250ab84c6e5806934030d309
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 01:18:32 2007 +0000

    * sbuild: Move to bin/.
    * avg-pkg-build-time: Move to bin/.

commit ee61899d5db5cf10e3adac8ab1b940efef09cfad
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 01:12:55 2007 +0000

    * TODO: Remove completed items.

commit 50b9af7b0660b37f73889dc0e77a88dc048a1ea4
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 01:07:54 2007 +0000

    * Move manual pages to man/.
    * debian/manpages: Move manual pages to man/.

commit 957b31abf707b98e4dde23f1dd529a2977ba5021
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 27 00:39:27 2007 +0000

    * bin/sbuild-createchroot: Also install fakeroot and build-essential.

commit 646b3ea4c4cbc0885bccabb299836ced2c03f60c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 26 18:51:27 2007 +0000

    * Reindent all sources
    * Remove whitespace

commit 92db3d22501dc785e6edab8d6bf63054bf383138
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 26 17:21:19 2007 +0000

    * Remove CVS Id tags.

commit 7ddca43c89e2d9cff52511d14fb61428bd86fc70
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 26 17:17:20 2007 +0000

    * Update GPL boilderplate to use current FSF text.
    * Add boilerplate where missing.

commit 66ce20ef293eba56964f1eaf14bb7a9ef69feeb2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 26 16:02:25 2007 +0000

    Ignore backup files.

commit 5d3dc35e9432e9ea5c856e3181cdba8beefcd134
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 16:33:14 2007 +0000

    * sbuild:
    - filter_dependencies: Remove redundant conditional.
      [Jan-Marek Glogowski]
    - Add check for check-depends-algorithm option. [Jan-Marek Glogowski]
    - filter_dependencies: Change dependency behaviour depending upon
      check_depends_algorithm.  [Jan-Marek Glogowski]
    * Sbuild/Conf.pm: Add and export $check_depends_algorithm.
      [Jan-Marek Glogowski]
    * example.sbuildrc: Add missing variable types.  [Jan-Marek Glogowski]
    * example.sbuildrc: Add missing variable types and add
      $check_depends_algorithm.  [Jan-Marek Glogowski]
    * sbuild.1: Document --check-depends-algorithm [Jan-Marek Glogowski]

commit 45fd7755b63fb65c2936f61409f9fb4255af1a4f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 16:32:36 2007 +0000

    * sbuild:
      - filter_dependencies: Remove redundant conditional.
        [Jan-Marek Glogowski]
      - Add check for check-depends-algorithm option. [Jan-Marek Glogowski]
      - filter_dependencies: Change dependency behaviour depending upon
        check_depends_algorithm.  [Jan-Marek Glogowski]
    * Sbuild/Conf.pm: Add and export $check_depends_algorithm.
      [Jan-Marek Glogowski]
    * example.sbuildrc: Add missing variable types.  [Jan-Marek Glogowski]
    * example.sbuildrc: Add missing variable types and add
      $check_depends_algorithm.  [Jan-Marek Glogowski]
    * sbuild.1: Document --check-depends-algorithm [Jan-Marek Glogowski]

commit eef19523ef4fe3ecc805871ce380686ce1f677c5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 16:06:58 2007 +0000

    Add generated files.

commit d183c5e400de321f1de3c9c9b498ee9f224c0969
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 16:06:35 2007 +0000

    * chroot/README: Rename from README.buildd-chroot.  Remove
      buildd.chroot section.
    * bin/sbuild-createchroot: Moved from chroot/buildd.chroot.
    * sbuild-createchroot.1.in: Add manual page.
    * debian/manpages: Add sbuild-createchroot.1.
    * debian/rules: Install sbuild-createchroot, and add buildd.chroot
      compatibility symlink.

commit 65f6b8b9d78be281b2b0ff4c4cab4a70f6f6ddb9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 14:43:40 2007 +0000

    * chroot/buildd.chroot: Fix incorrect variable name.

commit 2461363a8fc3e71b28615d4f36bd4dcdea0bc4c5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 14:31:18 2007 +0000

    * chroot/buildd.chroot:
      - Remove /etc/passwd creation (already done by debootstrap).
      - Remove sbuild directory creation (already done by schroot).
      - Use here doc to set up /etc/apt/sources.list.
      - List sources.list.

commit 02926768074cbf9e3ab2fed9db385d96a77ce554
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 13:28:35 2007 +0000

    * bin/*: Reindent to increase readability.
    * chroot/*: Reindent to increase readability.
    * chroot/buildd.chroot: Add GPL boilerplate.

commit 122976cd2638ab8287d5a33685901eae64e58d57
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 12:39:41 2007 +0000

    Ignore *~.

commit ca6dbe47801a1a58800135beeb82dcce21e4496a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Dec 22 12:39:06 2007 +0000

    * Sbuild/*.pm: Reindent to increase readability.

commit 0f578450b8c94fefb1f69dcfa3faa8d5a1c73cc3
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 19 23:52:22 2007 +0000

    * sbuild: build: Use unicode line drawing characters instead of ASCII.

commit a6fac48b588fe412cbd3186efd868708b7b8d68d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 19 23:41:27 2007 +0000

    * sbuild: Reindent to increase readability.

commit 68506b2eb71acaf9e3e3fca203ae108fe6f53a39
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Dec 19 22:31:03 2007 +0000

    * sbuild:
      - Add additional syntax checks.  Thanks to Jan-Marek Glogowski.
      - filter_dependencies: Remove redundant conditional.  Thanks to
        Jan-Marek Glogowski.

commit d984e776500bbcfda3a01b7aee7167c477a1247d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 17 08:01:41 2007 +0000

    buildd: Use --auto-give-back arguments correctly with newer sbuild
    option parser.  Thanks to Florian Lohoff.

commit 75e65d42e9422da504666de23735b7a8ae7733fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 17 07:58:49 2007 +0000

    * buildd: Log command-line arguments.  Thanks to Florian Lohoff.

commit fc84f604d74d2219ca7b32cfd8f2610991fa8754
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Dec 17 07:56:10 2007 +0000

    * debian/control: Fix line wrapping.
    * debian/rules: Use prefixed binary names for installation.
    * abort-current-build: Re-add.

commit 538eb5630a26110f3f1756added8d3f09d248e75
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Dec 2 15:03:36 2007 +0000

    * Sbuild/Chroot.pm: set APT::Install-Recommends to false inside the
      chroot (Closes: #449253).

commit 1a0f25e77430bc0f15868ebaa5543cc6cb7e61f2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 7 19:36:53 2007 +0000

    * debian/preinst: Use dpkg-query in place of /var/lib/dpkg/status.

commit b249999cda0db3148dc7660d7f3303c6f1058968
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 7 17:53:29 2007 +0000

    * sbuild
      - Fix --force-orig-source option which was renamed to
        --force_orig_source while rewriting the options parsing logic to use
        Getopt::Long (Closes: #428205).  Thanks to Alec Berryman for
        reporting this regression.
      - Accept arguments for options requiring a string (Closes: #431216).
        Thanks to Anders Kaseorg for the patch for this regression.

commit c43f8c2c4b0da7adf0e20bc2f26a3f252e0baa7f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 10 10:27:14 2007 +0000

    * sbuild
      - Fix --force-orig-source option which was renamed to
        --force_orig_source while rewriting the options parsing logic to use
        Getopt::Long (Closes: #428205).  Thanks to Alec Berryman for
        reporting this regression.

commit 41d3c639f27b8585dcb621c033534c258c2f925f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 23:42:10 2007 +0000

    * debian/control: Depend on debhelper v5.

commit 95ae0f2a288b5d831501eb4fb644f37c95ede985
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 23:40:24 2007 +0000

    * debian/changelog: Fix missing colon in bug closure for revision 0.2.4.

commit fc398f7692db9737e7ed710713fadf170f10b9ce
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 23:37:51 2007 +0000

    * debian/compat: New file.  Set to debhelper compatibility level 5.
    * debian/rules: Remove DH_COMPAT.

commit 6d3b52c7cc724f09210580cc6cd054b386c7a14f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:38:52 2007 +0000

    * Finalise for 0.55.

commit 7281024d945893a6edd9058740ad8a0bcf05930e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:35:39 2007 +0000

    * sbuild: build: When calling mv to move files, use -f to make sure it
      doesn't run interactively.

commit b30051df568f8605bd403b8def24f5bba38c120a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:20:55 2007 +0000

    * Sbuild/Chroot.pm:
      - end_session:
        + Add a debugging message.
        + Clear $schroot_session.

commit 04bab410ebbfce222122b6fd305488b90d1e10bb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:19:17 2007 +0000

    * Sbuild/Log.pm.in: open_log, open_pkg_log: Ignore SIGINT, SIGQUIT, SIGTERM
      and SIGPIPE in the logger processes, so that logging continues if the
      process group is signalled to terminate.  They will exit when the group
      leader exits or closes the pipe.

commit c4a3bd6911b45b9983543332b4c324efce8014b9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun May 27 22:15:49 2007 +0000

    * sbuild
      - build:
        + Remove the call to setsid when forking dpkg-buildpackage, because
          this broke shell job control.  Some packages might possibly hang
          while building if they detect they have a controlling terminal, but
          IMO this is a bug in the package.
        + When handling the timeout for dpkg-buildpackage, make the $SIG{'ALRM'}
          handler local, so that it is restored to the default once the build
          has finished.
      - Initialise $main::sub_task with a value, in case the build gets
        terminated prior to it being used.
      - Change to position of begin_session, so that it matches the cleanup
        order on shutdown.
      - shutdown: Call end_session to clean up the chroot.

commit 9ef2668b92a4abf8d14e1b4133e44402c8db010b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 13:30:55 2007 +0000

    * debian/NEWS: Renamed from debian/NEWS.Debian (Closes: #425370).
      Thanks to Lucas Nussbaum for spotting this.

commit 455f3852405d577a8fea72b8a6dea3dcca224281
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 13:26:32 2007 +0000

    * debian/NEWS: Renamed from debian/NEWS.Debian.

commit a1b15dab8341bde8d6ce6bc999163068b8ff96fe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 12:53:07 2007 +0000

    * sbuild: Remove trailing whitespace.
    * Sbuild/Log.pm.in: Remove trailing whitespace.

commit bf5c69db2813d23904c4929b4244d216656a18aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 12:48:02 2007 +0000

    * sbuild: check_dependencies: If a toolchain package is missing, print a
      "not installed" message, rather than a blank version.

commit 63c2d3a30f37daeae596eaa6ce55ba4060e6c161
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 12:39:23 2007 +0000

    * sbuild: parse options with Getopt::Long.

commit e7ccc2368e24f94a04b778b889e256ef0c10866e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 10:18:32 2007 +0000

    * sbuild: merge_pkg_build_deps: Replace references to "central" src deps with
      build-essential deps.
    * Sbuild/Conf.pm: Add linux-libc-dev, gnumach-dev, hurd-dev and
      kfreebsd-kernel-headers to @toolchain_regex.  Thanks to Clint Adams
      (Closes: #425855).

commit 2adf2e9ad107924d95daf2b4f3c4ba6cb7230f3e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 26 10:09:33 2007 +0000

    * sbuild: parse_manual_srcdeps: New function, to replace the addition of
      manual source dependencies from the removed read_deps() function.

commit bc9a92666d794bac162d9b40546d0b84909a4ed2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 23 21:10:38 2007 +0000

    * sbuild:
      - fetch_source_files: Strip the epoch of the version number, so that
        $dscbase matches the .dsc filename in the filesystem (Closes: #425715).
      - build: Document the regex which strips the epoch from the version
        number.
      - dsc_md5sums: Log failure to open the .dsc.

commit f5f478dd6bd01582a543bbb299473c5fdd531bd4
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri May 18 16:56:32 2007 +0000

    * Finalise for 0.54.

commit 6f273d38041265427edd47b7befebeed833b0b3e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 16 21:13:59 2007 +0000

    * sbuild: Parse --arch option correctly, and fix broken --dist option parsing.
    * Sbuild/Chroot.pm: Cope with an empty arch argument.

commit 3a4d58fd0c44f132c503fa9b6742989894b07cb9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue May 1 20:12:03 2007 +0000

    * Sbuild/Conf.pm: Remove the requirement for /usr/share/sbuild/sbuild.conf.

commit 6d8bbe8c8717c0909bcc4f4046371fef6bc4a499
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 9 23:02:16 2007 +0000

    * debian/NEWS.Debian: Document change in $sbuild_mode default.

commit 5b556db90116d8cc428f679e819042badd4f4310
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 9 22:58:50 2007 +0000

    * debian/rules:
      - Don't install sbuild.conf.local.
      - Install sbuild.conf into /etc/sbuild.
    * Sbuild/Conf.pm:
      - Define and export @no_auto_upgrade and %watches.
      - Remove the requirement for /usr/share/sbuild/sbuild.conf.
      - Mark deprecated/obsolete variables for removal post-Lenny.
      - Set defaults from global sbuild.conf.
    * sbuild.conf:
      - Add and document all options from Sbuild/Conf.pm.
      - Reorder into sections.
      - Merge with sbuild.conf.local, and install into /etc/sbuild.
    * sbuild.conf.local: Remove.
    * example.sbuildrc:
      - Replace all options with documented options from sbuild.conf.
      - Add additional user-centric options from sbuild.conf.
      - Reorder into sections.

commit 4309a4870fe22652c796b00bcf05912bfd1da3a2
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 9 14:08:46 2007 +0000

    Update date.

commit 0d5abecc75418a188c0319aee569df88e5f9d4e0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 9 14:08:19 2007 +0000

    * sbuild: Added new command-line argument --arch to specify the architecture,
      and pass this to begin_session (Closes: 410576).
    * Sbuild/Chroot.pm: begin_session: take the architecture as a second argument,
      and check if a chroot specific for the architecture exists.
    * sbuild.1.in: Document --arch and chroot search order.

commit c0ca58f880323cb2a51cf9a2a416a3440bc15525
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 7 09:33:19 2007 +0000

    * debian/NEWS.Debian:
      - Document removal of building on the host system.
      - Document sudo->schroot migration.

commit dd1bf8b9001cd52ca37cc284cc78e91fa3ea2185
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 7 09:19:53 2007 +0000

    * sbuild: Use "du -k -s" instead of "du -s" to increase portability.  Thanks to
      Martin Koeppe (Closes: #418061).

commit 01a6e32a6a2ba501bfc3c31a1b365d7d3d04ae23
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 7 09:11:01 2007 +0000

    * Sbuild/Conf.pm: Define and export %alternatives.  Thanks to Martin Koeppe
      (Closes: #418060).

commit db4a08f4dcd635b57db34858db7fd6802e131233
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 3 13:27:06 2007 +0000

    * debian/control: Depend on dctrl-tools rather than the transitional
      grep-dctrl package.  Thanks to Jonh Wendell (Closes: #417573).

commit 3138b2fbfa17ddd1540bb1c5783cf16e9213930f
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 15:55:29 2007 +0000

    * sbuild: fetch_source_files: Only call dsc_md5sums once, rather than twice.

commit b6cc44b33a84091e2341187d620df8bea7167664
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 15:52:20 2007 +0000

    * sbuild:
      - Compute package, version, directory and whether to download sources
        before calling fetch_source_files, because all the needed information
        is available at this point.
      - fetch_source_files: Add extra directory, package, version and download
        arguments.

commit 4aa3c2a6de211dbcfd92dbceffbd36073bb8989a
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 12:48:21 2007 +0000

    * debian/changelog: Close #413524 and #413908.

commit 517b7b6d71c78647e33fce41f5f9b88688761902
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 12:05:28 2007 +0000

    * sbuild:  check_group_membership: New function to check the user is a member
      of the sbuild group (Closes: #414064).

commit f76fd2c709bce069148e5d5707b7346952d3a4ce
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 10:51:23 2007 +0000

    * sbuild: build: Remove obsolete code for running dpkg-buildpackage outside
      a chroot.

commit 1ff37a4f26d49b52e0bb0cb8f0d6a0d1db89042c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 10:45:32 2007 +0000

    * sbuild: Update copyrights, and encode in UTF-8.

commit ac9d76836b21b054c72ea4a614e3c3179881cccb
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 30 10:42:17 2007 +0000

    * sbuild
      - Quote all arguments to system commands such as "rm -rf", to prevent
        potential disasters.
      - build:
        + Don't chdir before running dpkg-source.
        + Don't chdir before running dpkg-parsechangelog (do it in the
          schroot child process).

commit 7375cff3876bacdb85f9178d0abcdb56350aea3d
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 23:35:57 2007 +0000

    * sbuild:
      - fetch_source_files: Download sources directly into the chroot build
        directory.  For sources already existing outside the chroot, copy them
        into the chroot build directory.
      - get_dpkg_status: Print debugging messages with defined variables
        only, to avoid Perl warning.
      - verify_md5sums: Remove obsolete comment regarding chroots.

commit fcc5c3ff3cb68fcf5c5785282daa7307c2e54211
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 12:18:38 2007 +0000

    * debian/README.Debian: Remove requirements for chroot symlinks in working
      directory.

commit 2b1d944ec04f06a932526748c026303750c16ba9
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 12:00:35 2007 +0000

    * Sbuild/Chroot.pm:
      - _setup_options:
        + Remove use of $chroot_only.
        + Remove trailing / from 'Build Location'.
      - init: Add newline to debugging message.
      - strip_chroot_path: New function to strip the chroot location from a
        path.
      - log_command: Correctly log commands when no APT Options stripping is
        needed.
      - get_command_internal: Set the working directory inside the chroot to
        the build location.
    * Sbuild:
      - Add / separators to all users of $main::chroot_build_dir in paths.
      - Replace all users of regular expressions to strip the chroot dir
        from paths with strip_chroot_path.

commit 0aeb257f7956edef5569a5d153c091bcd9dc72bb
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 11:42:04 2007 +0000

    * Sbuild/Chroot.pm: init: Add newline to debugging message.

commit 2cb38d6678014f6bc1e8bd1a72e1d63355b44b47
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 29 11:18:42 2007 +0000

    * debian/NEWS.Debian: Document removal of support for building from a directory.
    * sbuild:
      - build: Remove support for building from a directory.
      - fetch_source_files: Remove support for building from a directory.

commit 8cd192c95b6e803ccf00d7c491ba3a7210acf4e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 22 10:06:00 2007 +0000

    * build: Replace "822-date" with "date -R".  Thanks to Guillem Jover for
      this patch (Closes: #415798).

commit 8b3e241618e644c8db7b45e957a6dd36b648f41f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 18 13:29:45 2007 +0000

    * sbuild: dump_main_state: New function to dump the program state using
      Data::Dumper.  Use to dump the state after each build.

commit 72a14e86ed9fc0ed9868dd767b96939aea0eb699
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 22:40:28 2007 +0000

    * sbuild:
      - cleanup_packages: Remove undo_specials().
      - install_deps: Remove @special use.
      - unpack_special_source: Remove.
      - undo_specials: Remove.
      - filter_dependencies: Remove @special use.
      - run_script: Remove.
      - parse_one_srcdep: Remove @special use.
      - get_special: Remove.
      - write_srcdep_lock_file: Remove @special use.
      - check_srcdep_conflicts: Remove @special use.

commit 4669616332f442ef431bf1953febf00aa5c45e12
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 18:29:31 2007 +0000

    * sbuild: Remove SVN Id:.

commit b5a6176f6d3ea44a8630eb8a563957d62a4507de
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 18:24:52 2007 +0000

    * bin/updatechroot, bin/upgradechroot, bin/chrapt: Remove chroot_mode.

commit 1f328f4c8c8839bf71e33651417a06572b96d637
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 18:21:10 2007 +0000

    * sbuild.conf: Remove $source_dependencies.

commit 0f14a2ab5a1907d9d3ed864a7e8af987374f5485
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 18:15:29 2007 +0000

    * sbuild:
      - build: Remove do_apply_patches.
      - apply_patches: Remove.
      - get_special: Remove use of @main::global_patches.

commit 6c4c71a7d977afaf156200ebc401363a256c6e93
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 15:29:29 2007 +0000

    * sbuild-setup.7.in: Update user section to document sbuild group membershipi
      and add_sbuild_user.  Remove chroot setup, which is now handled by schroot.

commit 7d6b6c226be12e68a709750a0375a0e073469de0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 15:10:18 2007 +0000

    * chroot/add_sbuild_user: Rewrite in perl.  Only call adduser; all other
      chroot setup is taken care of by the 50sbuild schroot chroot setup script.

commit 940f39a405018fd559178f94ac0fd5569cf10a6c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 15:09:05 2007 +0000

    * Sbuild/Chroot.pm: _setup_options: Remove use of $chroot_only.
    * Sbuild/Conf.pm:
      - Don't export $chroot_only.
      - Don't define $chroot_only.
      - Abort with an error if $chroot_only is defined.
    * sbuild.conf: Remove $chroot_only.

commit 64a2a235e110f5dfea44bb056a1cd018bf475aa9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 10 11:01:04 2007 +0000

    * debian/control:
      - Remove sudo from Depends.
      - Add schroot to Depends.
      - Remove schroot from Recommends.
    * debian/NEWS.Debian: New file.  Document removal of manual source
      dependencies and sudo.
    * sbuild: cleanup_packages: Remove check for schroot when removing build
      dependencies, since schroot is the default.
    * Sbuild/Chroot.pm:
      - Remove all special casing for sudo and schroot.  schroot is now the
        only supported method of accessing chroots.
      - end_session: Only attempt to end a session when $schroot_session is
        non-empty.
    * Sbuild/Conf.pm:
      - Don't export $sudo or $chroot_mode.
      - Don't define $sudo or $chroot_mode.
      - Remove sudo sanity checks.
      - Abort with an error if $sudo or $chroot_mode are defined.
    * sbuild.conf: Remove $sudo.
    * sbuild-setup.7.in: Remove sudo setup.
    * bin/README.bins: Remove sudo from extra package list.
    * chroot/add_sbuild_user: Remove sudo setup instructions and copying of
      /etc/sudoers to the chroot.
    * TODO: New file.  Document needed changes.

commit 57cccfd0449f999b549a134b7c6ba3e7c4d00a66
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 8 23:50:20 2007 +0000

    * debian/README.Debian: Document removal of manual src-deps.
    * sbuild: Remove read_deps, so manual src-deps are no longer read.  The
      remainder of the manual src-deps support remains to be removed.
    * Sbuild/Conf.pm:
      - Don't export $source_dependencies.
      - Don't define $source_dependencies.
      - Abort with an error if $source_dependencies is defined.
    * sbuild.conf: Remove $source_dependencies.
    * sbuild.conf.local: Remove $source_dependencies.

commit 29166b895a7f2db7bd39ab8878d121dba1bd9887
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 11 10:20:24 2007 +0000

    * Finalise for 0.53.

commit ac08472642e1ce615446836d31206dd61895a5df
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 10 20:24:46 2007 +0000

    * sbuild.conf: Obsolete $source_dependencies.
    * sbuild.conf.local: Obsolete $source_dependencies.
    * update-sourcedeps, update-sourcedeps.1.in: Remove (Closes: 409642).
      Thanks to Kenshi Muto for reporting that it no longer works.
    * debian/rules, debian/manpages, debian/README.Debian: Remove support
      for update-sourcedeps, and note that sourcedeps support is obsoleted
      and will be removed in Lenny.

commit b1a50f86f16f855c2ead925871e1fc9e74dbd126
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 10 19:52:51 2007 +0000

    * sbuild: fetch_source_files:  Add package information into the key of
    the %entries hash, in order to cope with multiple packages being returned
    by apt-cache.  Based on a patch by Goswin von Brederlow for Bug #408091.

commit d241c5b13216a3a64af9e24090338c697ca5a951
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 10 19:07:54 2007 +0000

    * sbuild: fetch_source_files: Correct indentation, and error with brace
      placement which caused apt-cache output to not be used.

commit d7cf5791d571890446993935eb7ddeda30842a61
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 10 19:00:31 2007 +0000

    * sbuild: When running apt-cache, divert STDOUT to the package log, so that
      warnings do not get mailed separately (Closes: #399178).

commit d3adf21e72393d7954e976da7609866b47893dd2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:13:05 2007 +0000

    * README.chroot-building: Refer to modern buildd chroot creation
      script in README.chroot-building.  Merge from upstream SVN cset
      106.

commit 1aaeadb7f5afdaa662d34ac33859fcc3c7e84f04
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:11:12 2007 +0000

    * wb-ssh-wrapper: New file.  Merge from upstream SVN cset 105.

commit fc98f75dc63f24b752148f43688436f4a64b1471
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:09:32 2007 +0000

    * buildd-make-chroot: Fix typos, and add some additional setup
      that the debootstrap backport on d.o doesn't currently do.  Merge
      from upstream SVN cset 104.

commit 8840afd21e196463d92b4f4c8fbe9dc5514b268c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:08:00 2007 +0000

    * buildd-uploader: Really fix for new dpkg.  Merge from upstream
      SVN cset 103.

commit 54f269765c81f708f0f37e4900180f17811b0be4
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:06:44 2007 +0000

    * buildd-uploader: Update version regexes for new dpkg.  Merge
      from upstream SVN cset 102.

commit 352b1ba684d60f63fca743ef22608303afd88d0d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:04:22 2007 +0000

    * wanna-build-catdb: Rename from catdb.
    * buildd-vlog: Rename from vlog.
    * buildd-update-chroots: Rename from update_chroot.

commit 5cf6e641a8263c58229a83766716a45f664a8b33
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 22:02:28 2007 +0000

    * buildd-make-chroot: Merge from upstream SVN cset 101.

commit 9bf572d64ecca991bc21006cda248469935c6dab
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 20:52:07 2007 +0000

    * sbuild: get_apt_policy: Allow ~ in version numbers.  Thanks to Frank
      Lichtenheld for this patch (Closes: #407293).

commit bce1a069b677ec315e825b3bb345f50f85aff446
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 20:42:28 2007 +0000

    * sbuild: Set umask to 022 so that dpkg-buildpackage always runs with a sane
      umask (Closes: #405836).

commit 9be82c9878316f22fb3150c09538164c80917f65
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 20:29:17 2007 +0000

    * debian/changelog: Fix typo in closes syntax.

commit 510fef0e5682ad2886eaa18b4f7612a18e5d7956
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Feb 3 20:27:15 2007 +0000

    * Sbuild/Conf.pm: Add and export check_watches configuration variable.
    * sbuild:
      - check_watches: Don't check watches if check_watches configuration
        variable isn't set (Closes: #397123).
    * sbuild.conf.local:
      - Add pgp_options from sbuild.conf (Closes: 398128).
      - Add check_watches.

commit 4e110cf9d3a93ef3b7332aa21ec28bf83b2900f0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 21 20:30:08 2006 +0000

    * sbuild: Remove incorrect WannaBuild:: prefix from version_compare.
    * Version 0.52.

commit 71329c284e02b25afb5833027a33b0c0a64c8df7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 21 09:15:31 2006 +0000

    * debian/changelog: Change incorrect maintainer email address.

commit 2298d38092ff26552f7820950010ec00d6bd3bcd
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 21 09:09:08 2006 +0000

    * Version 0.51

commit e461c91e937ed1b278be4301a8672827b09206e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Oct 20 22:35:16 2006 +0000

    * debian/changelog: Finalise and set urgency to high.

commit 75ffcf6b697b84be39c05f955fb8cd9f78f2bd77
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Oct 20 22:28:05 2006 +0000

    * sbuild: chroot_arch():  New function to detect build architecture from
      within the chroot.  Thanks to Kees Cook (Closes: #392992).

commit 5a98e177fbc767994b84d009b24605e2cb32dea6
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Oct 20 22:12:17 2006 +0000

    * sbuild-setup.7.in: Correct example commandline for debootstrap.
      Thanks to Alex Pennace (Closes: #391277).

commit a7eb31c22d4b94157111d1667465fd082d8fa4e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 14 21:39:46 2006 +0000

    * Close #392752.

commit 613eea0ab94fc71025c889027d214c153af325d0
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 14 21:35:14 2006 +0000

    * Sbuild/Conf.pm: Fix check for schroot.  Thanks to Julien Danjou for
      finding this (Closes: #392751).

commit 63b826adf9ef0473fc86f8e3230802e6784c2f84
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 14 21:23:53 2006 +0000

    * sbuild: Don't run md5sum inside the chroot.  Thanks to Michael Banck
      (Closes: #392323).

commit 73d092d71ff4549617825a59797379c55a9d74e3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Oct 14 21:03:00 2006 +0000

    * sbuild, Sbuild/Conf.pm, sbuild.conf.local: Add support for setting APT
      policy, to allow building from experimental and sarge-backports.
      Thanks to Wouter Verhelst for this patch, which has been slightly
      modified to add configurability and adapt to this version of sbuild.

commit ea74967f04f49633fda465b9f85c00b4631e005c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 22:08:31 2006 +0000

    * debian/changelog: Mark as unreleased.

commit 0fceb38a13f23369541f8b9efecd1b3745664138
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 22:07:15 2006 +0000

    * Revert accidental commit.

commit 9d32ee20d1bf50d857e8f43e2e0929b52e6ab4aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 22:06:18 2006 +0000

    * Sbuild.pm: Fix handling of ~ in versions (merge from upstream SVN cset 100).

commit 9e6025227ea42af208b91f863320deaccd78227e
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 15:04:29 2006 +0000

    sbuild: Run md5sum in the correct location.

commit d93ae1c735e1a950d1308ac11795c14015e3b76e
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 13:10:47 2006 +0000

    * Version 0.50.

commit 321ed279f87c622409e31d12333155601c7dd3d3
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Sep 29 13:08:28 2006 +0000

    * chroot/add_sbuild_user: Add SHELL to sudoers env_keep.
    * Sbuild/Conf.pm: Check sudo does not strip SHELL from the environment.
    * sbuild-setup.7.in: Document needed addition of SHELL to sudoers env_keep (Closes: #389815).

commit c04b313a027f2f4af1aaac49bd0bbc8e3b94e6b8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 26 10:49:13 2006 +0000

    * debian/changelog: Initial version.
    * debian/control: Update package descriptions.
    * debian/copyright: Update with new download location and
      maintainers.
    * debian/sbuild.postinst: Remove.

commit 43837bbf41fe7228bf12981dd60ee9979037ead2
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 22 21:55:41 2006 +0000

    * Sbuild.pm: Use new binNMU versioning scheme (+bn), taken from
      wanna-build SVN.  Thanks to Clint Adams (Closes: #384137).

commit 20f5eb60c3fc98e9fa975114af766e5970168f16
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Aug 12 11:25:42 2006 +0000

    * sbuild:
      - dsc_md5sums: Return hashref on failure, rather than -1.
      - verify_md5sums: Only run md5sum if there is one or more md5sum to
        verify, to prevent md5sum waiting forever on stdin if there are no
        files to check.  Thanks to Daniel Stone.

commit a0d12d870ed4a5cba9e0670ea792e03f86c7a41f
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Aug 3 17:40:10 2006 +0000

    * chroot/add_sbuild_user: Fix chrapt command examples in output to use
      correct option syntax, thanks to Matthias Julius (Closes: #381186).

commit e245258f4ccecf375c2de2a6920c9e5c41462317
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Aug 1 22:17:31 2006 +0000

    * ChangeLog: New file.  Generate from subversion history.

commit 9913c6ebacebdf3abb05c79b8b286ca2ebc161b7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Jul 20 18:17:14 2006 +0000

    * debian/copyright: Add Alioth file download location.

commit edf600d99cfe85c407c8f2b9183d54bfa44d8109
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 15 22:42:55 2006 +0000

    * Version 0.49.

commit c86d2db7f6cb4c4430f644e20a702137411c82ad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 15 22:41:55 2006 +0000

    * sbuild.conf, sbuild.conf.local, update-sourcedeps, sbuild.1.in,
      avg-pkg-build-time.1.in: Update to use the new configuration file
      locations.

commit a0410b0f685a781726274430da9703ce4be68ea6
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jul 15 22:38:19 2006 +0000

    * sbuild.conf, sbuild.conf.local, update-sourcedeps, sbuild.1.in,
      avg-pkg-build-time.1.in: Update to use the new configuration file
      locations.

commit 95f28e07cdabad29e75b6b1f75c8829b909b21de
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jul 14 20:31:24 2006 +0000

    * Sbuild/Conf.pm: init checks if APT_CONFIG and DEBIAN_FRONTEND are
      being stripped from the environment by sudo (when running in split
      mode), and aborts with instructions for correctly configuring sudo.
      This prevents apt-get silently using the configuration from the host
      system instead of the chroot.

commit e31d752abcf12b3bc15e526de30f68685b1c5e5d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jul 9 17:20:20 2006 +0000

    * Sbuild/Chroot.pm: Use su, rather than sudo, inside the chroot.  This
      prevents the APT_CONFIG and DEBCONF_FRONTEND environment variables
      from being removed (Closes: #376020).
    * Sbuild/Conf.pm: Add $Sbuild::Conf::su.
    * sbuild-setup.7.in: Remove sudo configuration inside the chroot, now
      this is no longer required.

commit 85ca8b490059300939d2771e8d178a990faac70c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 17 11:05:10 2006 +0000

    * Version 0.47.

commit 9c5b643bc30ec808098b2ced448b236abf86e16c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 17 11:03:06 2006 +0000

    * Sbuild/Conf.pm: Remove $Sbuild::Conf::log_dir checks, and revert
      $Sbuild::Conf::srcdep_log_dir changes.
    * Sbuild/Log.pm.in: If $Sbuild::Conf::log_dir does not exist, try to
      create it, and if this fails, warn and log to stdout (Closes: #369718).

commit 6d6fda01065803e0460550faf21ec121d1b1d001
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 12 08:49:59 2006 +0000

    * bin/chrapt, bin/updatechroot, bin/upgradechroot: When chroot_mode is
      "schroot", chdir to / to ensure the CWD exists inside the chroot.
      Thanks for Clint Adams for finding this (Closes: #372806).

commit 06e6b28669542e4d3ee4db2bd54b1a3c946eecad
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Jun 12 07:59:55 2006 +0000

    * Sbuild/Conf.pm: If $Sbuild::Conf::log_dir or
      $Sbuild::Conf::srcdep_lock_dir do not exist, try to create them before
      bailing out (Closes: #369718).

commit b70222e57c48a2442b778a15412dcf50da5a7664
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Jun 11 13:58:28 2006 +0000

    * bin/checkchroot: Correct uninitialised value warnings due to using an
      undefined variable (Closes: #369709).

commit 9c5070ce8e0986911249d14e4e82bff9e8968915
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Jun 10 22:43:28 2006 +0000

    * sbuild: fetch_source_files: When running apt-cache, check if we got
      valid output, and warn appropriately if the output is invalid
      (Closes: #369707).  Output may be invalid if there are no deb-src
      lines in /etc/apt/sources.list in the chroot.

commit c2fd2987eb435aea3a9d90cba193df10fcd468ea
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 9 13:06:16 2006 +0000

    Remove sbuild package.

commit 1f93c92f6e52608fbbdbe55131f73df24926254d
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 9 11:45:13 2006 +0000

    Remove files already in the sbuild package.

commit 3d1e7ed795270236e73478a05fd23d5335c2dbe7
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Jun 6 05:25:35 2006 +0000

    fix typo detected by lintian

commit d649858594608c92f24697abb15dfc1f11382949
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 27 14:22:48 2006 +0000

    * debian/control:
      - Update to Standards-Version 3.7.2.
      - Use Build-Depends, rather than Build-Depends-Indep.

commit 7c6c5177b5a3cffb95c3ffbf2ae5605a89331982
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 27 14:13:46 2006 +0000

    * Version 0.46.

commit 534001045b74e5ebc69fb0033020c2dc847caf83
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 27 13:03:47 2006 +0000

    * sbuild: get_dpkg_status: Make sure $version is defined before checking its
      value, to ensure the Debian version can have a value of 0.  Thanks to
      Santiago Vila for this fix (Closes: #368066).

commit b03ea47107cfa43cc38821da0ed2505360cbabf8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat May 27 12:44:34 2006 +0000

    * Update svn::ignore properties to ignore generated files.

commit fdbb58b23a1ccb74fa4169f564a293cedbd5b494
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed May 24 12:49:55 2006 +0000

    sbuild: fetch_source_files: Only print "apt-get update" invocation in debug
    mode.

commit 777d3e0bc019f41c56573ad7a15efaba4db15d43
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 1 08:48:38 2006 +0000

    Version 0.45.

commit 3bfacbafb1b6bc4353f278e65d523ce4d5f4afd3
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon May 1 08:48:05 2006 +0000

    * debian/control: Update to Standards-Version 3.7.0.

commit 8e3d421f5c0117268bde4cefde7a55455f815c45
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 29 09:53:59 2006 +0000

    * bin/chr-hold, bin/chr-unhold: On error, use Sbuild::Utility::shutdown
      to clean up.

commit 165994f8235ccc1eeef67b206dfad77c7662ecc0
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Apr 27 10:18:22 2006 +0000

    * bin/checkchroot:
      - Check if the dpkg and reference files contained any data, and exit
        with an error if either were empty (Closes: #363351).
      - On error, use Sbuild::Utility::shutdown to clean up.

commit 8fea8ee6bd1943596716391c258e1437d30e8d1a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 11 18:55:46 2006 +0000

    * sbuild:
      - build: Only print dpkg-buildpackage invocation in debug mode.
      - uninstall_debs: Only print dpkg invocation in debug mode.

commit 5e562c0ac113cec64a875ad9fdc8e9b62e00ef22
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:48:47 2006 +0000

    * Version 0.44.

commit e9a28d5565b1edb3c5fed1cdff8d7e0e15551ef8
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:43:52 2006 +0000

    * sbuild: build: Delete erroneous _all.deb files (Closes: #357042).

commit 6920a13f6f22996338d9430a8f062aea1643baa6
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:42:27 2006 +0000

    * sbuild:
      - build: Use debian_files_list to check for missing or extra packages,
        and warn appropriately.
      - debian_files_list: New function to parse debian/files.

commit c28bf7e4bb01756958ae865529391553e9da515c
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:37:25 2006 +0000

    * sbuild: Split verify_dsc_md5sums into two parts: dsc_md5sums and
      verify_md5sums.

commit f8e823abf9a4efbdc46f36fb4b5ed2d47e640710
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:31:48 2006 +0000

    * sbuild: Don't import internal Sbuild::Chroot functions.

commit ac671082b1efa685e356f6c0e08280500f325ba5
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:30:51 2006 +0000

    * sbuild: Don't import internal Sbuild::Chroot functions.

commit c8e8b87931a39f1b300eabe07871191f1f138426
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Apr 7 08:27:59 2006 +0000

    * Sbuild: Use File::Basename::basename instead of Sbuild::basename.
    * Sbuild.pm: Remove basename function.
    * Sbuild/Log.pm.in: Use File::Basename::basename instead of
      Sbuild::basename.

commit 59c4744cdf1de17692829d83b04ffaed1653d96a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Apr 5 16:11:51 2006 +0000

    * bin/checkchroot: Convert to Perl, using Sbuild::Utility.
    * bin/chrapt: Convert to Perl, using Sbuild::Utility.
    * bin/chr-hold: Convert to Perl, using Sbuild::Utility.
    * bin/chr-unhold: Convert to Perl, using Sbuild::Utility.
    * bin/gochroot: Convert to Perl, using Sbuild::Utility.
    * bin/updatechroot:
      - Convert to Perl, using Sbuild::Utility.
      - chrapt is no longer used (Closes: #355035).
      - Sbuild::Chroot is used for chroot access:
        + Suite names are no longer hardcoded (Closes: #355037).
        + APT Options are set correctly (Closes: #355038).
    * bin/upgradechroot: Convert to Perl, using Sbuild::Utility.
    * bin/common_functions: Remove; this is no longer used.
    * Sbuild/Utility.pm: New perl module for utility programs.  This is a
      perl replacement for bin/common_functions.
    * debian/rules: Install Sbuild/Utility.pm into /usr/share/perl5/Sbuild.

commit 7cc85a1eb146154ddcab96154182e44bcd1a430c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Apr 4 10:39:41 2006 +0000

    * sbuild:
      - Don't use File::Temp (only needed by modules).
      - Remove build directory check.
    * Sbuild/Chroot.pm:
      - Use File::Temp.
      - Don't export "internal" functions.
      - _setup_options: Set "APT Options" for schroot chroots.
      - log_command: Don't substitute CHROOT_APT_OPTIONS when no APT options
        are in use.
    * Sbuild/Conf.pm: Add build directory check (moved from sbuild).
    * Sbuild/Log.pm.in: Use File::Temp.

commit 0103a958e9d6a2fc6ab984d8a77fffaf88a4949f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 3 17:41:28 2006 +0000

    * avg-pkg-build-time: Use Sbuild::Conf.

commit 02a2cf209b2051a0d28e74ef439ed814a8c49518
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Apr 3 17:40:45 2006 +0000

    * sbuild:
      - Die if no maintainer_name, uploader_name or key_id is specified.
      - Set and unset $main::binNMU_name in the main loop, rather than when
        opening and closing the package log.  In consequence, open_pkg_log
        now needs the package name only, and close_pkg_log does not need
        the package name passing.
      - build: Set $firstline to "" to quell a warning.
    * Sbuild/Conf.pm: Add and export $avg_time_db, $avg_space_db,
      $maintainer_name, $uploader_name and $key_id.
    * Sbuild/Log.pm.in:
      - open_pkg_log: Save the package name for future use; the binNMU name
        (if any) is passed, so this no longer needs computing.
      - close_pkg_log: Don't pass the package name, which was saved in
        open_pkg_log.

commit 89fd660a6f5d7708c602ee255431a14cd8ca7bd9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 16:35:39 2006 +0000

    * sbuild:
      - Remove unused $main::HOSTNAME.
      - Add build statistics to close_pkg_log.
    * Sbuild/Log.pm.in:
      - Don't use $main::HOSTNAME or $main::arch.  Get the values directly.
      - close_pkg_log: Obtain $main::pkg_status, $main::pkg_start_time,
        $main::pkg_end_time and $main::this_space from the function arguments.
      - add_space_entry: Use $space rather than $t, and don't use
        $main::this_space.

commit af306c072e0d827449e96f677f72c6ddc1df79b8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 16:00:27 2006 +0000

    * sbuild: Remove $main::cwd, $main::nolog and $main::verbose, now
      provided by Sbuild::Conf.  They are imported from Sbuild::Conf
      for backward compatibility.
    * Sbuild/Conf.pm: Add $cwd, $nolog and $verbose.  They exported and
      used by the other modules in place of the variables in the main
      package.

commit 698fc471ab69691e0492f1e14b7592214c4315ed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 15:24:40 2006 +0000

    * sbuild: Pass $main::distribution to open_log and open_pkg_log.
    * Sbuild/Log.pm.in: Removed use of $main::distribution.  The
      distribution name must be passed to open_log or open_pkg_log.

commit 75298445ef0513ddf069df86e05e2b1845d6c74e
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 15:15:26 2006 +0000

    * Sbuild/Log.pm: $main::main_logfile and $main::pkg_logfile are
      package variables.

commit ce7b8ce1f433383ec17864c968df5f14ccec42aa
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 15:03:20 2006 +0000

    * sbuild: Set $main::chroot_dir, $main::chroot_build_dir,
      $main::srcdep_lock_dir and $main::ilock_file from the current
      chroot $Sbuild::Chroot::current.  $main::srcdep_lock_dir replaces
      $conf::srcdep_lock_dir (which is still used to set when the chroot
      is set up).
    * Sbuild/Chroot.pm: Don't use $main::chroot_dir.  Add the build paths
      as 'Build Location', 'Srcdep Lock Dir' and 'Install Lock' to the
      chroot metadata.

commit a311a84d19794393593569302398cff89da02f55
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:36:25 2006 +0000

    * Sbuild/Chroot.pm: begin_session takes the distribution as its
      first argument, rather than using $main::distribution.

commit c06bc3d189a6be67e8ca5746971bc940000da13d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:22:34 2006 +0000

    * sbuild: Move $main::username to Sbuild::Conf.
    * Sbuild/Chroot.pm: Replace $main::username with $Sbuild::Conf::username.
    * Sbuild/Conf.pm: Add $username.

commit ab1a28953963997a889fe3cf88066659449c50ff
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:12:35 2006 +0000

    * sbuild: Use $conf::HOME instead of $main::HOME.

commit 7146da3c058ced7c396739aba620ac6ab2de6424
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:11:14 2006 +0000

    * sbuild: Import Sbuild::Conf into package "conf".  This allows the
      package name used by upstream to be used for backward
      compatibility.

commit 74d28e3e62f610d6c583c232c654a83138d33ae2
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 14:08:13 2006 +0000

    * sbuild: Move $main::debug to Sbuild::Conf.
    * Sbuild/Chroot.pm: Replace $main::debug with $Sbuild::Conf::debug.
    * Sbuild/Conf.pm: Add $debug.

commit 4ec2463ec9dc65d7049075e8d107b806923ee97c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 13:57:31 2006 +0000

    * Sbuild/Chroot.pm: Use STDERR instead of PLOG (which may not be
      available).

commit b169db959705ecaa9f1e38bfde5eaca700237bd1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 13:51:47 2006 +0000

    * sbuild: Remove $main::chroot_apt_options.
    * Sbuild/Chroot.pm: Add an "APT Options" attribute to the chroot hash,
      to replace $main::chroot_apt_options.

commit fcf2088e7c27d700fb8f8c995c8227fa4f74d1fb
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 12:39:34 2006 +0000

    * Sbuild/Chroot.pm: Don't hardcode a list of chroots; use a glob to
      search for chroot-* instead.  This allows any distribution name to
      be specified with -d.

commit e06a2db9cd7cbe1ab3c7d8476180f24604105351
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 12:37:07 2006 +0000

    * Don't import log_command from Sbuild::Chroot.

commit 5d4959c5e016b89f5a1933c8a69964d838330a85
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 12:21:14 2006 +0000

    * sbuild: Import needed module functions into the local namespace,
      to avoid long namespace prefixes on functions.
    * Sbuild/Chroot.pm: Don't export init and log_command.

commit 56c550392a674c65b5545c84d52e30142158dbbe
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 11:48:34 2006 +0000

    * avg-pkg-build-time.1.in, sbuild.1.in, sbuild-setup.7.in,
      update-sourcedeps.1.in, Sbuild/Log.pm.in: Rename and embed version and
      date tags for substitution.
    * debian/rules: Generate all manual pages and Log.pm in the build rule,
      and remove them in the clean rule.

commit ac2b159cb8e77275122e8ac981f2bb65e687ac97
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 11:40:40 2006 +0000

    * COPYING: New file (GPL licence text).

commit e56d409c09c87e2d6c92234e0b2a96c024d84749
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Apr 2 10:50:13 2006 +0000

    * sbuild: Use the new modules Sbuild::Chroot, Sbuild::Conf and
      Sbuild::Log.  The functions moved into the modules have been removed.
    * Sbuild.pm: Add basename function.
    * Sbuild/Chroot.pm: New perl module for chroot operations.  It contains
      the functions begin_session, end_session, log_command,
      get_command_internal, get_command, run_command, exec_command,
      get_apt_command_internal, get_apt_command and run_apt_command.
    * Sbuild/Conf.pm: New perl module for configuration variables.  It reads
      the system and user configuration.
    * Sbuild/Log.pm: New perl module for logging.  It contains the functions
      open_log, close_log, open_pkg_log, close_pkg_log, add_time_entry,
      add_space_entry, send_mail and log_symlink.
    * debian/dirs: Add usr/share/perl5/Sbuild.
    * debian/rules: Install Sbuild/Chroot.pm, Sbuild/Conf.pm and
      Sbuild/Log.pm into /usr/share/perl5/Sbuild.

commit c0053d0cafcd2a892e933b1e154fa1fb2e42a4bf
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 1 21:07:45 2006 +0000

    * debian/control: Update uploaders.
    * debian/copyright:
      - Update with new subversion repository locations for upstream and
        Debian.
      - Add Roger Leigh as a copyright holder.
      - Add a reference to /usr/share/common-licenses/GPL.

commit 1193f4c4818eb687d2ef19a913c4b6c3f1bb09da
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 1 09:43:51 2006 +0000

    * bin/checkchroot:
      - Quote all variables.
      - Sort ref-chroot file before diffing (Closes: 360058).

commit 0fff9907c1d739e308eabdd3f06ab1a4e39cc1c3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Apr 1 09:30:20 2006 +0000

    * sbuild: Treat schroot chroots with a "-sbuild" suffix in the same
      way as chroots without a suffix (Closes: #360124).

commit 9f95273fbf2e14fa17b59455b016e0a3a9fb4962
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 29 13:59:00 2006 +0000

    * Version 0.43.

commit 91b251e7b0f1a8c9ca8addb920a1aa5ff5d963d0
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 29 13:26:59 2006 +0000

    * sbuild: Add $conf::force_orig_source to allow --force-orig-source to be
      specified in a .sbuildrc.
    * example.sbuildrc: Add example $force_orig_source, with documentation.

commit 4113ce86c866aaf7de3bc3994d35a0072e29fca1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 28 22:11:22 2006 +0000

    * sbuild.1: Correctly escape hyphens in option and file names.

commit c909e0dd941cb2794cb7b23b20aca6af4862cf93
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 28 22:02:36 2006 +0000

    * sbuild: Add --force-orig-source option to force the inclusion of the
      .orig.tar.gz (Closes: #318030).
    * sbuild.1: Document --force-orig-source option.

commit 0f8ea1df21e669a5d113cc3d59e700f4ccbe7518
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 28 17:55:45 2006 +0000

    sbuild: fetch_source_files: Remove redundant braces and reindent.

commit 72983c32297f584709fc8f76ce10c11063417822
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 28 17:52:15 2006 +0000

    * sbuild: Strip "./" from $pkg, so the name used for source dependencies
      is correct (Closes: #359747).

commit dfbac548acaddae7149d8df0322e7f8b48c0bf04
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 27 16:15:16 2006 +0000

    * sbuild: open_log(), open_pkg_log(): Don't buffer log output
      (Closes: #358717).

commit 05b7859d7890e914fdf6bbef37b4718b55aa4b6f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 27 09:54:39 2006 +0000

    * sbuild-setup.7: Use debootstrap rather than cdebootstrap.
    * chroot/README-buildd.chroot: Fix typo.
    * chroot/buildd.chroot: Use debootstrap rather than cdebootstrap
      (Closes: #358668).
    * debian/control: Recommend debootstrap rather than cdebootstrap.

commit bb89ac2d1f66b7c631b658e4b1d19be7c347f266
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 21 10:06:50 2006 +0000

    * sbuild: build(): Check for _all.udeb files which are built when they
      shouldn't (merge from upstream SVN cset 98).

commit 90b25195a0c91d992a63b19e3be77553acbe209c
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 20 21:33:01 2006 +0000

    * bin/common_functions, bin/README.bins: Remove ~/build/ from the
      chroot path, to match sbuild behaviour of searching in the
      current directory (Closes: #355034).

commit eb058978fdc6a6273e455e88c571cb0b27bb4a57
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 18 22:43:44 2006 +0000

    complain on _all.udeb files built when they shouldn't be, too.

commit 5b5b93dacff1bf72da5105c70afe55c153873ca7
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 19:14:09 2006 +0000

    * bin/checkchroot: Set LC_COLLATE=POSIX to prevent collation issues
      (mismatches with the reference file; Closes: #294883).

commit d20a8b09997584e2b026912d2d49bbe5c04af221
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 19:10:32 2006 +0000

    * bin/common_functions: Allow any chroot name to be specified
      (Closes: #356785).
    * bin/README.bins: Document changed chroot syntax.

commit eb8db3ac3d06616096136f7892cefeaad6eabbf3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 17:55:11 2006 +0000

    * sbuild: check_dependencies(): Print kernel information along with the
      toolchain package versions, in the same style as reportbug.

commit 1751de5ed00b1684b97d2169f5ab16c785c4b016
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 17:33:36 2006 +0000

    * sbuild: open_log(), close_log(): Create the build log using File::Temp,
      in the form build-distribution-date.XXXXXX.log.  This prevents races
      during logfile creation when running concurrent builds.  If the file is
      empty, it is unlinked on close, irrespective of whether verbose mode is
      used or not.

commit 0e60ccded08b13e4d23ec1a657b8c56d1de6d23c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 17:14:54 2006 +0000

    setup_options(): Remove unused call to tmpnam().

commit 2456a7dea2dd44eca8ee53dba83342ecabcf5871
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 18 16:39:45 2006 +0000

    * sbuild:
      - open_log(), close_log(): Save a references to the initial STDOUT and
        STDERR, and restore them when the log is closed.
      - open_pkg_log(): Use the saved STDOUT for verbose logging.  This
        prevents the package log being also directed to the build log.

commit f6232854579aaffa0552ef62e611ebdcca5f4c42
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 17 12:18:54 2006 +0000

    * sbuild: log_symlink(): New function to create a symbolic link to the
      current package log.  This replaces the use of /bin/ln, which has races
      if concurrent builds use it.

commit c0dc19d0ae5c5d02cfe8b3380dbe4f976c9e29fe
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 15 12:54:29 2006 +0000

    * sbuild:
      - open_log(), open_pkg_log(): Use fork() rather than tee to multiplex
        log output.
      - close_log(), close_pkg_log(): Close all dup'd log streams, and don't
        kill the child log processes, which avoids dataloss in the pipeline.

commit a3ec2a4ff63c4b8f109a1c1ef79359ad0b294cfb
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 14 19:52:16 2006 +0000

    * sbuild: Add $conf::md5sum for security.

commit 139a5cde530d72cfeba0ee2c11c38b7d4cdb334f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 14 18:55:33 2006 +0000

    * sbuild: When using schroot, look for a distribution named
      "$distribution-sbuild" in preference to "$distribution".
    * sbuild.1: Document schroot chroot naming.

commit 36bba084a773e994fda1e723958d3a4198976e59
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 14 17:27:25 2006 +0000

    * sbuild: build(), shutdown(): Quote kill command correctly
      (Closes: #356686).

commit 832e95098f856061c83b67ae69fa6527bd8424c1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 14 10:03:39 2006 +0000

    * sbuild:
      - verify_dsc_md5sums(): New function to verify the MD5SUM of files in a
        .dsc file.
      - fetch_source_files(): Use verify_dsc_md5sums to check for incomplete
        downloads, and redownload sources if needed; also verify again after
        download (Closes: #270439).

commit 96f6832aff67ddc0e58a71bcbc1772ed186d87e8
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 13 00:14:25 2006 +0000

    * Version 0.42.

commit 6e8992969b94848fb4bd931b0c834477784e8333
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 12 18:43:24 2006 +0000

    * sbuild: Reindent.

commit 42347b127adf20a1bdc9a254c6fda20b0b7d7a7f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 12 18:40:53 2006 +0000

    * sbuild: Reindent.

commit e6604bbe1ee27f2b9988ce3ffcd47f53332e45a1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 12 16:55:37 2006 +0000

    * sbuild:
      - install_deps():
        + If there are no package dependencies, create an
          empty anonymous array reference to hold the (nonexistent)
          dependencies, required by filter_dependencies.
        + Make sure %entries is initialised.
      - fetch_source_files(): Check that the dsc specified is valid.

commit 9a17fd4fa47defec359239ab8f05d7500dee738b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Mar 12 00:12:32 2006 +0000

    Fix typos.

commit dfdc30b0d7f4029cc1d534be6e134e8a733f2c67
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 23:38:45 2006 +0000

    Don't use PLOG before it's opened.

commit 6143aa1ce4f8a889f337427a920f69250104d0df
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 23:37:36 2006 +0000

    * sbuild: Always print toolchain packages.  This is done by always calling
      merge_pkg_build_deps(), and running all the way through install_deps(),
      even when the package does not supply any build dependencies or
      conflicts (Closes: #355040).

commit 0c34a103190d0225c4eae221eee922be25453f1f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 23:00:34 2006 +0000

    Close #183022.

commit e0c39337ae6e114b726b7eddaa7df5e53fd3babc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 22:59:36 2006 +0000

    * sbuild: $conf::build_dir defaults to $main::cwd if undefined.  It is used as
      the directory containing the build chroots, build logs, and current
      symlinks.
    * example.sbuildrc: Add $build_dir example.

commit bcf6a6442f5437f40ec05ac780a7b0eac8cca4df
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:42:56 2006 +0000

    Close 355802.

commit 997ad1c6da7e25f6c60e65a3dd25f127282bd311
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:41:40 2006 +0000

    * sbuild: setup_options: Make sure $main::dist_locations{"$distribution"}
      is defined.

commit 24997845f38218fa3e4202ad19140820cfc66d25
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:32:12 2006 +0000

    Close #170742.

commit 5dfc236834a87d794b42db0bf371c54dc3acf30f
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:21:39 2006 +0000

    * sbuild:
      - The default sbuild_mode is "buildd".
      - open_pkg_log(): Create current-distribution symlink in addition to
        current.
      - $main::verbose is set by default if running on a tty.
      - LOG and PLOG are set to autoflush using IO::Handle.
    * sbuild.conf.local: $sbuild_mode defaults to "buildd".

commit cbf729dec70d97be69c9263324983fa37aee7a1a
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 18:08:26 2006 +0000

    * sbuild
      - Use named signals, rather than numbers, for portability.
      - close_log(), close_pkg_log: If verbose is enabled, flush the log and
        wait a second before killing tee, to prevent data loss in the pipline.

commit f8cd363157076ff572dca6c577a078eb2b1511dc
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Mar 11 16:42:44 2006 +0000

    * sbuild: Require /usr/share/sbuild/sbuild.conf and optionally require
      /etc/sbuild/sbuild.conf.
    * sbuild.conf: Don't require local config file.
    * debian/dirs: Add etc/sbuild.
    * debian/rules: Install sbuild.conf as /usr/share/sbuild/sbuild.conf and
      sbuild.conf.local as /etc/sbuild/sbuild.conf.
    * debian/preinst:
      - New conffile.
      - Remove /etc/sbuild.conf.local if not locally modified.
    * debian/postinst:
      - Move /etc/sbuild.conf.local to /etc/sbuild/sbuild.conf if needed.
      - Reindent.
    * debian/postrm:
      - Unlink /etc/sbuild.conf if present.
      - Unlink files under /var/lib/sbuild.
      - Reindent.

commit 5e865028d1426ea93e7eb589db5c4e7ed930cf76
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Mar 10 14:06:29 2006 +0000

    Add files to ignore.

commit a95a2396a4c5735d2a58c5ad9c1965930b3e35e1
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 9 23:07:41 2006 +0000

    * debian/rules: Remove "make clean" in clean target; there is no
      Makefile, so this is redundant.

commit f9162bd5a716571c786e9bdead96a12d05594850
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 9 23:03:21 2006 +0000

    * sbuild:
      - Remove unused variables @dist_parts and $main::nomail.
      - Use correct use syntax for File::Temp and Cwd, and initialise a
        number of variables which would otherwise be undefined, in order
        to remove run-time warnings.
      - Add a number of checks for undefined variables to remove run-time
        warnings.
      - Add -w to the shebang line, so sbuild always runs with warnings
        enabled.
      - All exec commands other than writing logfiles now use exec_command,
        so they get logged.

commit 534632cf744a52a2337cefe1e360d45ef9ca9ce6
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 9 21:47:12 2006 +0000

    * sbuild: Set the in the environment SHELL=/bin/sh, in case the user
      invoking sbuild uses a shell not available inside the chroot.

commit f2a5ce681c8d8f10457231354145edde05860ffd
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Mar 9 21:33:52 2006 +0000

    * sbuild-setup.5:
      - Split chroot setup and user setup into two sections.
      - Document sudoers env_keep setup (Closes: #355072, #355604).
    * chroot/add_sbuild_user: Add sudoers env_keep example.
    * debian/README.Debian: Document existence of sbuild-setup(7).

commit e4c4b115c69b8e4a0e79f58ceca143eb168522e5
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 22:47:50 2006 +0000

    * sbuild: open_pkg_log(): Use correct Sbuild:: namespace for binNMU_version
      (Closes: #355861).

commit 389732b9a2bd77f1653fa477236e3defc3a85245
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 22:39:27 2006 +0000

    * debian/control: Recommend schroot 0.2.7 or later (for preserving the
      environment).

commit bc4c2f6bab158718a5321c75cf410a3ebcb84617
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 22:37:47 2006 +0000

    Update version to 0.42.

commit 650dd834ca68a20bf8c8ddf9132027be068f7972
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 22:16:09 2006 +0000

    * sbuild:
      - Fix error in options parsing.
      - Hide source downloading commands by default.

commit 50c9af34637db39b21533b31b4893b6d6ecec58c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 18:56:18 2006 +0000

    * sbuild:
      - Add a $conf::sbuild_mode, used to switch behaviour between user and
        buildd defaults.
      - Add a --quiet option, to opposite action to --verbose.
    * sbuild.conf.local: Add $sbuild_mode.
    * sbuild.1: Document --quiet.

commit 49cebfcb4c4d977e974fd90dc42bb43d72b2835d
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 13:18:16 2006 +0000

    * sbuild: get_command_internal(): When running schroot, preserve the user
      environment, needed for APT_CONFIG, DEBIAN_FRONTEND, etc..

commit 5c6983a5ce5499468e426a0d91f36e29ee521c3c
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 12:28:49 2006 +0000

    * sbuild:
      - log_command(): Add an additional priority argument.  If nonzero,
        the message is always logged, otherwise is only logged if debug is
        enabled.
      - get_command(), run_command(), exec_command(), get_apt_command(),
        run_apt_command(): Add an additional priority argument to control the
        urgency of the log message, and pass this to log_command().

commit b4e85f0b511678afb513d7401288c8db43db1b46
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Mar 8 12:10:01 2006 +0000

    * sbuild: move setpgrp() calls, so that all child processes run in the same
      process group as the parent.

commit 60a92e40c812995be8d038fb8e7b04650bb06e8f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 7 22:06:21 2006 +0000

    * sbuild:
      - get_apt_command_internal(): Always add $main::chroot_apt_options.
      - get_command(), run_command(), exec_command(), get_apt_command(),
        run_apt_command(): chdir to $main::cwd to make sure the directory
        location also exists inside the chroot.

commit 0b95de5854143c15bc7f8e9102e7aa2521f85451
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 7 21:17:55 2006 +0000

    * sbuild:
      - get_virtuals(): Remove usage of $main::chroot_apt_options, which is
        added automatically by get_apt_command().
      - setup_options():
        + Ensure APT_CONFIG is set to the correct path depending upon the
          chroot_mode.  $chroot_aptconf is the absolute path to the file from
          the host system, while $aptconf is the absolute path when apt is
          run.
        + Only set $main::chroot_apt_options when chroot_mode is "split".
        + Always regenerate apt.conf, because when chroot_mode is changed, it
          will break APT unless rewritten.
        + Don't set "Dir" in $chroot_aptconf when in chroot_mode is "schroot"
         (because apt is run inside the chroot).
    * Sbuild.pm: Remove unused module 'IO'.
    * debian/control: Depend on perl-modules (for File::Temp).

commit 7857799554c6b819d2300df8036b6c3136cf7e04
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Mar 7 16:58:12 2006 +0000

    * Sbuild.pm: Remove unused module 'IO'.

commit e9fceb79a8e84b21874d151cd84b90ca5991018f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Mar 6 21:56:20 2006 +0000

    * sbuild: get_command(), run_command() and exec_command() only log the full
      command when debugging is enabled, otherwise only the short form is
      logged (Closes: #355043).

commit 5c7259fe025971588142d587ac8902c452cad06d
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 27 19:09:10 2006 +0000

    * Version 0.41.

commit a41c1093e0b597510fa15b15e315580d32aa3058
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 27 11:39:39 2006 +0000

    * sbuild: setup_options(): Correct usage of a scalar reference rather than
      the scalar $main::chroot_dir (Closes: #354520).

commit 433356f4b137fde4687ad76b032dceda5c56ceb0
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 27 11:20:58 2006 +0000

    * sbuild: setup_options(): Set $main::chroot_apt_options in the same
      manner as upstream.

commit cd17e399afe734c934b6abcad2f62db3d49cbf76
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 26 22:22:19 2006 +0000

    Version 0.40.

commit 2c2fa11d4ff0a506a7184ba3935b5a6242b2d6ae
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 26 22:17:56 2006 +0000

    * schroot: get_schroot_info(): Parse schroot "--info" Type (chroot type)
      output, and if "plain", always set $main::dist_sessioncaps to 0
      ("plain" chroots may say they are session-managed, but do not
      support full session management, so they always need cleaning).

commit 7b6861fb1f18d8917855fe895d4979b6743c86ed
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 26 21:31:40 2006 +0000

    * sbuild: get_schroot_info(): Parse schroot "--info" Path (chroot location)
      output.
    * debian/control: Recommend schroot (>= 0.2.5), for its "Path" information
      in --info output, used for determining the chroot location.

commit 6a02aa88c031ff30109bcdbd4aa8457e9bf7baac
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 26 20:49:23 2006 +0000

    * sbuild: Fix typos in debug statement ($main::distribution rather than
      $main::distribtion, and $main::schroot_session rather than
      $main::scroot_session).  Thanks to Adeodato Sim�� for this fix
      (Closes: #354456).

commit c4732e93e10f7e0a9c8ca576b9b25cc2e5804312
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Feb 24 08:28:39 2006 +0000

    Remove \n from pkg_file filename, pointed out by rleigh@d.o

commit be370543eec9576e7c7a36ba5439ddd796272c2f
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Feb 24 08:26:07 2006 +0000

    Update svn:ignore for everything a debian package build produces

commit bee62e9f031695e13ebcc3614ef2b67505c3c15c
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 21 23:44:47 2006 +0000

    * Version 0.39.

commit ada43387eea36d38257a97b35f1e674dd00ac190
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 21 20:36:07 2006 +0000

    * sbuild: Add two debugging messages.

commit d0b2e535cca4581cd46933e65fcf86694fd0312b
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 21 19:29:40 2006 +0000

    * sbuild:
      - Add %main::sessioncaps to store whether or not a chroot is
        session-capable.  Check the schroot "Session Managed" attribute to
        determine session capability.
      - If a chroot is session-capable, skip running uninstall_deps().
    * debian/control:
      - Recommend schroot (>= 0.2.3-2), for its "Session Managed"
        information in --info output, used for skipping chroot cleanup.

commit db34d9f54c62aa52596ccb58c28fd044d9ccc751
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Feb 17 03:31:17 2006 +0000

    * Remove \n from strftime calls.  Suggested by bod@d.o after going over the
      sbuild segfault on mips and arm in gdb.

commit 602ffb65b93f7b2203f48a14cb069f7c5d9c2f8e
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Feb 16 21:36:36 2006 +0000

    * Update copyright notice (add myself as a copyright holder).

commit e4e6d921c7ee09a7e2a4c478d5fe833dbb0c8345
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 20:41:29 2006 +0000

    * fetch_source_files(): Merge from upstream SVN (cset 94); Strip trailing
      whitespace from each line in $dscfile/debian/.sbuild-build-deps
      early on, making all subsequent regexes simpler.

commit 4afdfe1e1dc22e93d19a029f1ec1846ca1fe6a3b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 18:13:59 2006 +0000

    Version 0.38.

commit 1bd0726d424297b9d4c12bc2a9211373cfae6a6b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 18:11:56 2006 +0000

    * get_apt_command() and run_apt_command() take an additional parameter,
      the user to run as, because not all commands need (or should) run as
      root.

commit 1ec726e07a88d470d59c06cb67ce10e86ebd5bef
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 16:42:52 2006 +0000

    Don't include full-stops in section headings.

commit a81f384f9ce28e42c711257b2b1e5bd282d4267e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 16:28:42 2006 +0000

    * Cleanups to all manual pages.

commit 2f88d0aa42e8326928d81a6aabcb99ac5f4aafc2
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 15:40:43 2006 +0000

    * chroot/buildd.chroot:
      - Use "set -e" to abort on all errors (Closes: #342357).
      - Correctly quote all shell variables.
      - Use cdebootstrap rather than debootstrap.
    * debian/control: Recommend cdebootstrap rather than debootstrap.

commit bd4d16a99c5c9404ec03e080e33e104c212d827a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 14:52:55 2006 +0000

    * chroot/buildd.chroot.pre-sarge: Remove.
    * chroot/README-buildd.chroot.pre-sarge: Remove (Closes: #308065).

commit b20b17a50c749c47ebf73e8bdf9da4d1d454da5b
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 14:30:46 2006 +0000

    * sbuild-setup.7: New manpage.  This describes how to set up a chroot
      (Closes: #311363).

commit bb81bf9c7bb7296c357632eb0730b54f17d03251
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 10:13:13 2006 +0000

    * #287669 is also closed now full sudo access is no longer required.
    * example.sbuildrc: Single quote example email addresses in
      $maintainer_name, $uploader_name, and $key_id (Closes: #341327).

commit 198495bcc024548587099a9a80a58fe65ada7935
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 15 00:31:41 2006 +0000

    Correct command-line summary (Closes: #311589).

commit 5972ce476c837098984073d13a4268f1d14bed65
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 22:20:21 2006 +0000

    * sbuild.1: Update outdated information.  Correct macro usage and
      reindent.
    * debian/control: Recommend schroot.
    * debian/README.Debian: Update information about src-deps and schroot.

commit a93ad4239aa33886cd6a3490c5bb230b9a4fca03
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 19:18:46 2006 +0000

    * Add missing newline to log message.

commit 3b5b03e2cfeb04d7e08c2a43e82a83300c6dc99e
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 19:16:25 2006 +0000

    * sbuild: Add schroot session management.  Sessions are created, run and
      removed automatically.  The current session is stored in
      $main::schroot_session.  setup_options is called once per build, in
      order to set up the session options.
    * sbuild.conf: $schroot_options defaults to "-q" to match the built-in
      default.

commit 40cae2d5806f0e3dffe65b37319520c45aa6cd93
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 19:10:24 2006 +0000

    * Use new commands for running commands inside and outside chroots:
      + Signing options for dpkg-buildpackage are double-quoted rather than
        single-quoted (because the main command is single-quoted).
      + All commands run in a pipeline are obtained with get_command() or
        get_apt_command().
      + All other commands are run with run_command(), exec_command() or
        run_apt_command().
      + check_space() only requires root access in the chroot.
    * Full sudo access is no longer mandatory when using the schroot
      chroot_mode.

commit 624bc099f3f9581367f5e83d3b525dc91a1cae4d
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 18:52:41 2006 +0000

    - New functions log_command() to log a command being run,
      get_command_internal() and get_apt_command_internal() to get a
      command string without logging it; these are used by get_command(),
      run_command, exec_command(), get_apt_command() and run_apt_command(),
      which do log the command being run.  Commands are logged in for all
      chroot modes.
    - get_apt_command() and run_apt_command() take an additional parameter,
      the command to run (apt-get or apt-cache).

commit 867788796f856dba3e0894d6a562fe0da1972d77
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Feb 14 13:20:21 2006 +0000

    New function exec_command().  This is the same as run_command(), but
    runs the command with exec rather than system().

commit 6fd78e6b4c79d342419c09d071611cea41a152ea
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 13 23:40:07 2006 +0000

    run_apt_command: When using schroot, run command in a chroot, otherwise run
    on the host system.

commit 0c0d14d9f0333b750ee7f76a6a299294aa7a540f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Feb 13 21:43:59 2006 +0000

    New functions get_command(), run_command(), get_apt_command() and
    run_apt_command() to run a command inside or outside the build
    chroot under the specified user, or run apt inside or outside the
    chroot (depending on the chroot_mode), respectively.

commit 59454777ee7763624fd23879ca7d39f4e3e6fe4b
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Feb 13 01:20:41 2006 +0000

    save some backtracking.  Thanks to bod@d.o

commit d7fe31c0595d6569ff865a8a3d26ce1d6795748d
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 12 20:39:05 2006 +0000

    When $chroot_mode == "schroot", clear %main::dist_order and
    %main::dist_locations using an empty array, rather than undef.

commit a8d24a7457e7043f69bb855e0c79d5b90eb89cf1
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Feb 12 19:22:15 2006 +0000

    Remove check_dpkg_version().  This has not been necessary since the
    release of potato (Debian 2.2), which had a dpkg version 1.6.14.

commit 521e358d4c2c3ed2538837d2f7f6bc0f4b6439ea
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 1 22:07:57 2006 +0000

    Parse both "Location" (for backwards-compatibility) and "Mount Location".

commit a6145e29fe82bbfe107a13caeda6573c8818bd41
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 1 10:30:37 2006 +0000

    Move path and APT setup into a separate function, setup_options().

commit 3e0fa2d88a685b1e0d3f1385e29b1bbf0c724b42
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Feb 1 10:23:02 2006 +0000

    Move schroot metadata parsing to a separate function, get_schroot_info().

commit 4497ec425477e5056d22f47872f212b161e504b0
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 31 13:03:15 2006 +0000

    Fix mail address.

commit e75204cde827dd695d5dba4bc2c11af006964ea7
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 31 12:59:23 2006 +0000

    Version 0.37.

commit 49252114c5792540ae82cf3105a311716c388ce9
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Jan 31 12:50:13 2006 +0000

    * sbuild:
      - Parse the .changes rather than debian/files, so that the
        .dsc/.diff.gz/.orig.tar.gz are also copied back to ~/build.
      - Print information and contents of arch-all packages (closes: #321640).
    * debian/control: The maintainer field contains the list address.
    * debian/changelog: Close a number of historical bugs fixed with this release.

commit 28c3e0f511a9483e17cf124c4c72f86eb8c775b6
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Jan 30 22:54:07 2006 +0000

    add DEBIAN_FRONTEND to sudoers example defaults

commit acfd00606425bb8e1efeaa10ac0e8e85f89b7fc9
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Jan 30 20:22:03 2006 +0000

    As buildd-uploader now calls dupload with a single changes file, any error
    return from dupload most likely means that the job failed, so we treat it as
    such.

commit 6a1d7813b8f10ecea757d61d38bcc4615ee69f86
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Jan 30 09:00:57 2006 +0000

    Add comments of the needed sudoers entries, including Defaults entry needed
    for the stable security update

commit 12bc8a5feed56535dd9248772729732260778637
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:42:15 2006 +0000

    Fix to delete symlinks, too

commit 42fa7e6c3d9d4d305c29a48495657ea085a6b667
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:37:44 2006 +0000

    update version

commit 66b72fdcfb29fc351d8afa01ced5c7ca9726325c
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:35:34 2006 +0000

    * setup_system: don't bother with /etc/source-dependencies-* anymore
    * sbuild.postinst: remove obsolete /etc/source-dependencies-* files.

commit 1776cfb31314c6c55a64ad625240ad693aa37def
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:33:16 2006 +0000

    remove unmaintained rbuilder

commit a1f23504d6b1a3db0a0e2850742980b5db7b29af
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 23:28:02 2006 +0000

    don't install update-sourcedeps in the sbuild package anymore

commit ecfcec5e440766a7bd9802790c9d510d29225fa0
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jan 8 22:59:10 2006 +0000

    * make existance of source-dependencies optional
    * move username to end of su command

commit 96ef542518bb01261d89b2ec002d930fb7c2cc49
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Dec 12 00:00:14 2005 +0000

    make the sources.list more column-ized, use the mirror specified for initial
    install in the generated sources.list, fix up security related entries.

commit be425b072ce19dfe3945a995888c20764acacc64
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Dec 9 09:37:00 2005 +0000

    Add support for building from experimental.

commit 2b71643dab11ee3f56fa4e0a440aa0da4682e136
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 8 23:12:08 2005 +0000

    Move "Package claims to have built" error message to the same place as
    upstream.

commit 7026a6c8bfc339a1d7703c159efab475f54fb3ec
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 8 22:45:26 2005 +0000

    cleanup_close: Set $main::current_job to "" and shutdown if
    $main::HOME/EXIT-DAEMON-PLEASE exists and we are running in batchmode.

commit 3a29a48bd4ba2f066a57ce273514b1ee450efab8
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 8 22:25:55 2005 +0000

    Add support for $conf::chroot_only, and default to only running in a chroot
    for security and safety.

commit 90e7d6057de509b66256a257bfe52e063af3c0ad
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Dec 2 07:33:59 2005 +0000

    remove Binary-NMU fields when a Dep-Wait'd package has a new sourceful version
    uploaded.

commit 6d3adc1c629a8d487cf79132aa5bcbaa72ff9b9b
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 1 22:48:57 2005 +0000

    Support new --make-binNMU options.

commit 75b56219ca51bd7f2805be2802079e124d49ee77
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 1 22:44:45 2005 +0000

    Add support for auto_giveback_socket: add an extra argument to
    --auto-give-back and add an ssh '-S' option to analyze_fail_stage().

commit d714e21f4eb27962f1f85fcfd34a07d2f9199da7
Author: Roger Leigh <rleigh@debian.org>
Date:   Thu Dec 1 20:39:40 2005 +0000

    Merge whitespace changes.

commit 0b147dbbd24a77deba77f9754721af53a41dac13
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:45:26 2005 +0000

    Fix typo.

commit ee819e81eb30228af88e813896179f16067e311f
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:36:09 2005 +0000

    When running dpkg --set-selections, use $main::chroot_dir rather than
    $main::cwd/$main::chroot_dir, since we already include $main::cwd in
    $main::chroot_dir.

commit c3d09b6f0a88eabd4abd7c664dc178b63d222c0e
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:30:17 2005 +0000

    fetch_source_files(): Support versioned fetches with apt-get.

commit 4cd6cc659826651798be996a12607096a4110f4a
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:22:49 2005 +0000

    install_deps(): purge packages with "dpkg --set-selections".
    schroot support added in addition to upstream changes.

commit f23a60358a4fb9b5898b7784b3670503e60af698
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:11:09 2005 +0000

    run_apt(): Remove '*' from $pkgs and $rpkgs.

commit b3c7fc6b8600ca3aa6ed0e503d39fc343ae17253
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 22:06:35 2005 +0000

    get_dpkg_status(): Check $version is set and compute $result in the
    same manner as upstream.

commit 6dae96dae5328294d2cc6b5f5d9495bca29f0556
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 21:58:47 2005 +0000

    Remove support for --store-built-packages.

commit 51e9d136a7b645eb18d6e48b47939898371b5fc6
Author: Roger Leigh <rleigh@debian.org>
Date:   Wed Nov 30 21:56:21 2005 +0000

    merge_pkg_build_deps(): Correctly separate depdendencies in $deps,
    and don't immediately return if there are missing packages.

commit 1307dd9a05b34b7658168cedfcbc10adc1d9f75f
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 23:35:02 2005 +0000

    build(): Remove dpkg-buildpackage debugging statements.

commit 19d67fc25bfb90ec4694db606c1d6f6e5f12b213
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 23:26:34 2005 +0000

    Add --use-snapshot for building with gcc-snapshot.

commit f6e90863729b343da640a788564990e3edfbf557
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 23:02:10 2005 +0000

    run_apt(): Complete support for "install-deps-env".

commit a201c197e735dc3cc4f3e31b705bb3f1261daae8
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 22:54:26 2005 +0000

    check_space(): Redirect stderr of du to /dev/null.

commit cd805b8514155f7fb3bc61928abb492b9fdcea8a
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 22:52:50 2005 +0000

    More whitespace and indentation changes.

commit ad9654e0384e5b76d1deb4afa4a75df1cda9c239
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 22:03:31 2005 +0000

    analyze_fail_stage(): support install-deps-env() and chdir to $main::cwd.

commit 00ca2e88d66f2535fbf68fc45b7a81d0e99b6f69
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 21:57:28 2005 +0000

    Add @main::toolchain_pkgs and @toolchain_regex.

commit 8cba8e37d6849d54fdab5a20b3719df721534419
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 21:40:47 2005 +0000

    Set $main::arch using $conf::dpkg.

commit 11316a2bc0bbe64280d0847e38f612eb1f25ed05
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 21:16:59 2005 +0000

    read_build_essential(): Read build-essential from $main::chroot_dir
    instead of the root filesystem.

commit 618cb4450318981925ca5775499e0fcc9c695864
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 21:10:13 2005 +0000

    Remove redundant assignment.

commit 63a476043a37d008e8857b287830943d1c4c9cf1
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 20:50:01 2005 +0000

    shutdown(): Don't close the package log if there is no current job.

commit 9a6dbdbbb9fd2db9a3f93e3512ae3459b6a4d3cd
Author: Roger Leigh <rleigh@debian.org>
Date:   Tue Nov 29 20:32:38 2005 +0000

    + Merge whitespace and indentation changes.
    + Fix typos.

commit 2749d7f55b0791a83aef03dacf57a01c07c61e4b
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 29 10:14:04 2005 +0000

    Fix Revision output to just have the revision
    Forget binNMU info when a new source comes along.
    Warn on packages that are in state Installed, but the version installed is less
    than the source version in w-b.
    If a package is in state Installed, but it doesn't have binaries from the
    current source version in parse_quinn, also move to Needs-Build.

commit b1268f5c2609d17170309c528718192787101fbc
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 28 22:38:05 2005 +0000

    Fix typo.

commit 055defc652520ccd739b27d03a12c6aa25be358c
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 28 22:36:56 2005 +0000

    Add $build_env_cmnd.

commit 6bdb3434effbd3efec0d177ebe3536fbf5be395f
Author: Roger Leigh <rleigh@debian.org>
Date:   Mon Nov 28 22:02:52 2005 +0000

    Add $conf::dpkg_source.

commit 9924cea957a00dec1b877ddf56bbb666aacde9f6
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Nov 28 03:20:50 2005 +0000

    * watch for EOF from STDIN when reading failure messages
    * update the source version if it's less than the packages in parse_packages
      (fixing the "why does that buildd build what was uploaded with the source?"
      problem)

commit 917a3f55c31689227a5a676e2ca1b7dbd94c48f5
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:57:49 2005 +0000

    Move sbuild.conf.local changes outside the SVN merge section.

commit c48945a2b4802027a402ecf5bd2e517de42adb85
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:57:35 2005 +0000

    Make strftime() usage more consistent, with no trailing newline.
    This fixes an issue with the "current" symlink not being created due to the
    command-line being split over two lines.

commit 94192475d2358f3cf5bb0281daeac8c9a8513165
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:25:47 2005 +0000

    - sbuild.conf:
      + Update alternatives.
      + Comment out example %individual_stalled_pkg_timeout.
      + Empty @ignore_watches_no_build_deps.
    - sbuild.conf.local:
      + Use FHS-compliant pathnames, as in sbuild.conf.

commit 918085fb107bc9aaf45cdf16190d5884500e8523
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:08:47 2005 +0000

    Add full stop to SEE ALSO line.

commit 5986ea2137857d7bf1c2db42afbb87f0453b93d9
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:05:40 2005 +0000

    example.sbuildrc:
    + Remove $hack_changes_for_frozen.
    + Update comments.

commit 9d3b6af9d78b811dc6c13dc97a3e76dc74f74b91
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 18:02:38 2005 +0000

    Add $conf::chroot_only for compatibility with upstream, even though we don't
    use it ourselves.

commit 774f63a3eb679810c4fedbaabd16c335e9bd9947
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 14:59:33 2005 +0000

    avg-pkg-build-space.1: Update text.

commit e4faf938b4137ecb4a67e617c9de62827705b755
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 14:22:19 2005 +0000

    + Remove watches.
    + Update alternatives.

commit 0026822d091016689962686c2d8194d61f6bb5a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 14:13:00 2005 +0000

    + Delete binary-all packages that we didn't ask to be built.
    + By default, set APT::Get::AllowUnauthenticated to "true".

commit eaa7a85150b8c3e51f33685ee7be8f407a1b4b82
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 13:58:23 2005 +0000

    + Add REDO support for binNMUs.
    + Add stats generation for download+install, build and remove times.
    + Disassociate from the controlling terminal and make stdin /dev/null
      for the dpkg-buildpackage process.
    + Don't create entries to the sbuild log when a package claims to
      build an _all.deb, but doesn't.  Instead, warn to the build log.

commit 9a4bda864db5ec369a6fd50c6daf2d76bf772c3b
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 12:26:55 2005 +0000

    Add Sbuild.pm (upstream WannaBuild.pm), and replace version_cmp() with
    Sbuild::version_compare().

commit 8e053c4127b741601e20a1847db512173583fe89
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 11:54:33 2005 +0000

    Fix support for '~' in version numbers.

commit a3fa6eb5d6356f78662772d708c9d1382acfa303
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 11:50:58 2005 +0000

    Hardware DEBIAN_FRONTEND to "noninteractive" when installing and purging
    packages.

commit fd022436e2512bcd35aad8e1a814fdfbca564f67
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 11:42:49 2005 +0000

    Allow arch: all packages to be built when $main::build_arch_all is true.

commit 9de4cc584cbbf31f893db89aaa89b432a50a4931
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 11:31:55 2005 +0000

    Use /var/lib/sbuild/apt.conf if it exists, and create it if it does
    not.  This fixes the problem of the root filesystem
    /etc/apt/apt.conf and /etc/apt/apt.conf.d directories being used,
    while the copies in the chroot filesystem are ignored.

commit 48f8b8a660fa519734e35ee6dbe3c47021f570ad
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 10:56:30 2005 +0000

    Use strftime() and getpwuid() instead of the external commands date and whoami.

commit c1173eb1e87f4226a20bee5c0b677ed9b7029a07
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Nov 27 00:59:15 2005 +0000

    Output purged packages line by line, rather than all at once.

commit 348ae7362fb75bff86c4e07db5a6230de5d4e92c
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 21:34:19 2005 +0000

    Always purge packages when building in a chroot.

commit dcb5bf45d57d23e3f0630fcd627461f0aad9c279
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 21:28:06 2005 +0000

    Split changes files sent in the log every 989 characters, to better
    conform to mail RFCs.

commit 1c55570f22498aa1515a173ac1ca68a7a8353298
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 21:21:19 2005 +0000

    Always show versions of installed build dependencies.

commit b7ae3083cbd8ecb8719d68955facef66231e75b8
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 21:10:17 2005 +0000

    Split changes files sent in the log every 1000 characters, to better
    conform to mail RFCs.

commit 0b87cef16b53f406f581beba07b623465afe0c56
Author: Roger Leigh <rleigh@debian.org>
Date:   Sat Nov 26 20:53:41 2005 +0000

    Update copyright notice with current FSF postal address.

commit b4126ac27254ca58fab4ab859ba0c7276eab7d90
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Nov 23 19:36:15 2005 +0000

    Fix duplicate copy of binNMU_version function for new versioning

commit de2e4bee7a6e7595510b90dc9623fc979e5a6950
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 15 08:28:42 2005 +0000

    * (sbuild): Delete binary-all packages that we didn't ask to be built.
    * (buildd): specify a username when asking what's to be built (needs new
      wanna-build)
    * (wanna-build): store last seen timestamp for each buildd
    * update changelog version

commit 913b92b32efca113a3e4eeb13be0aba9c1eb94e0
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 15 07:11:36 2005 +0000

    Include more setup commands.  Lay out chroot's by codename, for future auto
    suite-switching code (hopefully for etch release)

commit 4f505dfceb0e82d8498f3a5135a86b40dade98bb
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 15 07:01:30 2005 +0000

    change defaults for security to use security-master

commit 6305164107853cf9e2cf746a747455d7ae85e6a2
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Nov 15 06:59:20 2005 +0000

    * move parse_date here from wanna-build binary.
    * change binNMU numbering to be {sourceversion}+b{binNMUnumber}

commit c2883a1ae12683e9c2df51c3272eca4ea7ddb72b
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Nov 4 04:00:29 2005 +0000

    add pwd infront of target if not specified, so the fstab entries will always
    work

commit 553d775cd50130ec7ac59b4603fabe736e895b66
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu Oct 13 07:44:21 2005 +0000

    fix typo of database name

commit 8d9074b7ed69ffb87b7afb579dc4296a8333ae4c
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Oct 12 08:55:03 2005 +0000

    fix already building binNMU error message
    output what database w-b is running on when run with -v on the version line

commit 7290a7899f5869e39b1db2764be94a7d4be5dc1b
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Oct 11 16:50:10 2005 +0000

    Add regex for failure to connect to the ssh socket for newer openssh versions

commit 747938720a7010c3af576479dc27dbc8ef24371b
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Oct 11 10:42:08 2005 +0000

    * Add optional admin_users array that lists which users are allowed to use
    overall database admin commands such as --merge-*, --import, and --manual-edit
    * Ensure to-be registered binNMU version is newer than the currently installed
    version.

commit c92d85906d8c9fb552c9988d9cf01c981c8bbbd4
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Oct 3 05:24:35 2005 +0000

    Fix broken pkg_version_eq calls

commit b7c4f23fb4b1ba3c0c13dfe37a76e4154c576185
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Oct 2 00:14:00 2005 +0000

    * (wanna-build): add support for storing binary NMUs in the wanna-build db
      with --binNMU=# where # is the binNMU number to create.  You will be asked
      for the changelog entry if not specified with -m.  The Version field of the
      database entry will always track the source version from the sources files
      now, rather than the Packages files.  Version numbers for binNMUs can be
      specified as either the source version, or the full binNMU version number.
    * (buildd): add support for taking binNMUs from wanna-build, passing them
      to sbuild, and adding them to REDO.  Older buildds will delete binNMU redo
      lines from the redo file as being invalid, and will take binNMUs, but not
      attempt to build them.  BinNMUs are scheduled ahead of regular builds, and
      are always taken one-at-a-time, like weak_no_autobuild.  binNMUs show in
      the logfile as !#!pkg_ver, where # is the binNMU version number.
    * (sbuild): Add REDO support for binNMUs.  binNMU packages will only appear in
      the progress file as their binNMU version number while actually building,
      so buildd-vlog continues to work.  Otherwise, it will be the source version.
    * (buildd-uploader): Large rewrite to work better for buildds with slow or
      intermittent links.  The logfile is no longer locked the whole time
      buildd-uploader runs, so mail can still be processed.  Each package is
      uploaded in a seperate dupload process, and wanna-build state updated right
      after the upload is successful.  This also has the effect that one stalled
      upload will not prevent attempts at uploading the other packages.  Ensure
      that no more than one buildd-uploader can run at once; previously, after
      15 minutes, buildd-uploader would run anyways, possibly uploading duplicates.
      Take distribution field from changes files, rather than requiring the
      distribution field to be in a hardcoded list.
    * (buildd): removed stats generation for build time.
    * (sbuild): add stats generation for download+install, build, and remove times.
    * (buildd-watcher): output new time stats.  These won't be fully accurate
      from when one upgrades until the next stats generation, after which,
      they should reflect the full stats time period (one week by default)
    * (debian/control): update dependencies to indicate that buildd and sbuild
      need the latest versions of each other, due to the REDO format change and
      time stats changes.
    * (sbuild): disassociate from the controlling terminal and make stdin /dev/null
      for the dpkg-buildpackage process.  buildd already does this, but you didn't
      get that when run from the command line.
    * (sbuild): don't create entries to the sbuild log when a package claims to
      build an _all.deb, but doesn't.  Instead, warn to the build log.
    * (sbuild): workaround race condition while apt-ftparchive is running on the
      archive host.  The signed Release file doesn't match what is downloaded, so
      current apt deletes the list.  These cases are now given-back, rather than
      failed.
    * (abort-current-build): use a sudo'd perl to kill the dpkg-buildpackage
      process, incase sudo is being used by sbuild
    * (buildd): report errors while waiting for sbuild, and don't keep waiting for
      it if there are no children at all.
    * (sbuild.conf): default watch list to empty, most buildds run with clean
      chroots
    * (sbuild.conf): update alternatives, remove some ancient ones that aren't used
      anymore
    * (wanna-build): remove db entries that don't have any binary packages in the
      Packages files anymore.  If something is added to P-a-s, and the binaries
      removed, it was still showing as "installed" with the last built version.
    * (setup_system): add additional commented out adduser command for when you
      already have a buildd group
    * (setup_system): update chroot build command I:
    * (buildd-make-chroot): create /etc/hosts file in chroot
    * (buildd-make-chroot): Update debootstrap call to work with modern debootstrap
      that pull Build-Essential from the packages files.
    * (buildd-make-chroot): support etch
    * (many): Update FSF address again.

commit 720c817db9b8f6b7321099d8a630daf3cdcf5164
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 11 09:23:18 2005 +0000

    Update debhelper build dependency.

commit 57fd5ec9caf588c3cbffe52d16f8a490402302a3
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 11 09:18:21 2005 +0000

    * debian/control: Update to Standards-Version 3.6.2.
    * debian/copyright: Use the new FSF address.
    * debian/conffiles: Remove.
    * debian/rules:
      - Use debhelper version 4 compatibility mode.
      - Move the find -maxdepth option to before non-option arguments, to
        fix find warnings.
      - Remove template comments.
      - avg-pkg-build-space symbolic link should be relative.

commit 6756b2a6919cb058453b21363c3816b71aed8eda
Author: Roger Leigh <rleigh@debian.org>
Date:   Sun Sep 11 08:48:46 2005 +0000

    * debian/changelog: Convert to UTF-8.
    * sbuild:
      - Don't fail in the absence of central sourcedeps.  These are no longer
        required now source packages are required to have build dependencies,
        so this should not be fatal.
      - Added support for schroot:
        + Added $conf::chroot_mode.  This may be set to "split" (the
          historical default), or "schroot" (use schroot instead of sudo).
        + All operations using sudo now check the value of $chroot_mode, and
          use sudo or schroot accordingly.
        + When using schroot, %main::dist_order is filled using the schroot
          chroot priorities.
        + Added %main::dist_locations to store the location of the
          available chroots.
      - Print a readable error if a chroot does not exist.

commit 39249aaf24ef113bd1331a8376ae9ff51b7f9c36
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Aug 22 08:28:10 2005 +0000

    add missing $change++ in parse_quinn so that changes will actually be committed.

commit 4935441122dd605df2d340a9305cdde3efe6e58c
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Aug 22 04:04:53 2005 +0000

    really fix --uploaded with current buildd-uploader
    arbitrary priorities can be specified for a package.  It will apply
    to the current package for Needs-Build, Building, and Uploaded.
    It will apply to the next version of the package for Failed and
    Dep-Wait.  The priority will be reverted after that build.
    There is also a permanent priority setting, to change the default
    that the package will be returned to.

commit 85e6fea27754298e07774a7396ccca011820822a
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Aug 20 07:16:12 2005 +0000

    ensure --uploaded works with existing buildd-uploaders and epochs

commit 61a8d9022411121f6b89e779000333335c12140b
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Aug 19 22:08:44 2005 +0000

    AutoDepWait V1.  Catches the package (>= version) and (>> version) cases.
    Only applies to packages just moved to Needs-Build by the quinn merge, so there
    is a way to get out from behind them, if they are wrong for whatever reason.
      * split WB version compare functions to seperate perl module
      * use them from sbuild instead of forking dpkg for each comparison
      * further MLDBM optimizations and fixes

commit 6b043abdf21d288a7b533613dd34d35dde431fbe
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Aug 5 06:05:03 2005 +0000

    fix small error in dupload strings update

commit c4a7337e8961cdd973624b481096d727e63c69a4
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Jul 19 20:30:58 2005 +0000

    more removal of non-US.
    also check the security upload dir for deletions in one more place

commit f685bdbd533671032844f1f830b405cbceb205b2
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Jul 19 20:23:12 2005 +0000

    update dupload error strings for modern dupload

commit 119d78d8e0de1df24a690570737fa224b0a8c1f3
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Jul 15 18:19:32 2005 +0000

    parameters weren't being passed to pretend_avail()

commit 67d44c268170484b9d2733ea890e3e342fae9242
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 13 22:36:25 2005 +0000

    Treat "-" in quinn-diff priority fields as "unknown", rather than "-"

commit 4f4bcd77d5d5506f43ca6032a9e0572374e90c4f
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 07:44:21 2005 +0000

    Ensure a hash exists before a reference is passed to change_state, or the
    state change won't be recorded.

commit f098a5f660faf5386d703fdb2488bedd05684c3f
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 05:59:13 2005 +0000

    disable strict refs for now

commit 17a1011af3aee2dcc07e150f7235b501053dfd6e
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 05:45:42 2005 +0000

    Patch from Brendan O'Dea <bod@debian.org> for version comparisons to support
    ~ correctly.

commit 96404757d522ffd83c49ab71c8a2b4d392a4447e
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 03:15:56 2005 +0000

    And the big efficiency rewrite required by MLDBM.  It actually works now :)

commit 24fdeacfab8abc4d0902801feddac10a1c9922ed
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Jul 10 00:26:04 2005 +0000

    fix strftime calls
    add --merge-all option to take exactly one of Packages, quinn-diff, and
    Sources.  Import them all, then clean the db.  Saves multiple opens of the
    database for daily maintenance.

commit a6f96efff2a25a3a09442983a0213dbde32ff54f
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Jul 9 23:59:45 2005 +0000

    use strftime instead of `date`, don't set a default arch (only used for parsing
    packages, which should always be specified), and only call hostname if we
    actually send mail.

commit f6f2dadbdc3bb8ba6aadea81bdf7b4a69acdf68b
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Jul 9 23:39:28 2005 +0000

    switch to Storable for MLDBM, as this is faster than the default of
    Data::Dumper.

commit fd29c13eb8261c9227991e9f6a4a53108e1c54c3
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Jul 9 23:19:30 2005 +0000

    Replace wanna-build's WrapDB class with MLDBM, resulting in a 3x speed
    improvement on database accesses.
    This change requires you to first --export your database with the old version,
    and then --import with the new one.

commit 9d15b00cda74a6dfe6f8000a8c3c980c567c3c3f
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 21:07:55 2005 +0000

    Fix ~ support in versions.

commit 11d04b611f1e599807de9f79ecdbdbf559834bcd
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 15:29:55 2005 +0000

    set DEBIAN_FRONTEND to noninteractive when purging packages, too.

commit 63d85d7cafdf7d439d916fce3f134c1c1129bde3
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 07:33:05 2005 +0000

    commented out example of chroot_only option

commit 5ba44ab9bfd09a4ea048e3dff06c19fff2f01589
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 07:27:05 2005 +0000

    add chroot_only mode, where sbuild will die if it's not building inside a
    chroot, rather than using the root

commit b11b8ffa291f8679ed450a1dd6ae34f0a52c8cd5
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 07:16:15 2005 +0000

    fix buildd-watcher to correctly report old files in chroots, too.

commit 3cef923cbaeb6b2c9348a51542ee29bb4ccf6aea
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jul 6 03:42:02 2005 +0000

    update $no_warn_pattern for ssh socket.

commit d0f117e3ad52b69b5df2b3350851bd562c7ae05e
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Jun 6 06:29:24 2005 +0000

    don't bother creating upload-non-US anymore

commit dd379661f443dd594aab6d77f49e12334b734564
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu Jun 2 07:32:55 2005 +0000

    Update version

commit 7234ea2a5b1a9ae54a292d834292e9863e4bcfa1
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 09:28:43 2005 +0000

    sync with newraff, pointed out by Lamont.

commit 5bc1845716a33ba1de40812a0bac4ea1595cca7d
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 09:24:55 2005 +0000

    From Lamont: allow arch: all packages to be built when $main::build_arch_all
    is true.

commit 806fb95a857632addcffee014d8df172043a7ff0
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 09:16:58 2005 +0000

    Make sbuild more resilient about cruft in the status file (again),
    without undoing the provides and real package at the same time fix.

commit 457cd7b9dfb4c8fa7fff53c04d03e639a569cc5b
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 08:39:10 2005 +0000

    fix typo in fallback code

commit 1a048e98ff548e7191529091bebe712004aca9b2
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 08:37:21 2005 +0000

    use /var/debbuild/apt.conf if it exists.  If it doesn't exist, try to create
    it with the Dir ""; directive for the chroot.  If it can't be created, use
    the existing logic.
    
    This fixes the problem of the root's /etc/apt/apt.conf and /etc/apt/apt.conf.d
    directories being used, while the chroot's are ignored.

commit 46729936f744384598db96e65d8960e8e0723ab2
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Jun 1 05:39:33 2005 +0000

    make it "work"

commit f8555668a822f44648fd9e5f1b95a2584e0c7024
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat May 28 22:31:25 2005 +0000

    remove buildd incoming dir from testing chroots

commit 8a3c00748b3be6fd39d0f8c0930a7c7cfe9d16a1
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon May 16 03:32:09 2005 +0000

    output commands to add to fstab

commit a574032cdfe9132c5322760d9f5172f9584c8f73
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun May 15 23:54:34 2005 +0000

    update line break code for the longest size mutt likes: 989.

commit e2edc4f21c5784ba30eef82a798e6afc9599055b
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu May 5 07:37:50 2005 +0000

    update version

commit 78cd724a9a25c82a74dfd5d28cddf2a1f6910dac
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun May 1 19:32:30 2005 +0000

    remove use of external utilities where we already have functions imported that
    do the same thing

commit 68a23a1824e05fb2a37a8f79f5837e73af01c8ff
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun May 1 17:11:49 2005 +0000

    install buildd-make-chroot in /usr/sbin, rather than /usr/bin

commit 87f66453d87391aae5707113e133ff5bfc614979
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu Apr 28 01:57:51 2005 +0000

    check EXIT-DAEMON-PLEASE in check_restart() instead of at the top of mainloop.

commit 33606561df12eeecbc03925ea1295efa1acaaed7
Author: Ryan Murray <rmurray@debian.org>
Date:   Mon Apr 25 11:00:50 2005 +0000

    fix for versioned depends with both provided and actual package installed;
    The versioned depends should always happen off the actual package.

commit 68875ef4a71fbbc530c9e23ff44e16e8e3c675d5
Author: Ryan Murray <rmurray@debian.org>
Date:   Thu Apr 21 09:35:29 2005 +0000

    include buildd-make-chroot in the sbuild package

commit 4ec8e3d938949f50469dd24f495f4fd72db21186
Author: Michael Banck <mbanck@debian.org>
Date:   Fri Apr 1 18:32:26 2005 +0000

    Final changes for 0.35 upload

commit dd1f3e83bc574f3a1eda7c817145e76a01fa5d5a
Author: Michael Banck <mbanck@debian.org>
Date:   Thu Mar 31 16:50:33 2005 +0000

    Reformatted changelog entry to comply with earlier bug-closing mannors

commit 06873dbdbc79d3c364875c426e66dcc3ec21f0f6
Author: Michael Banck <mbanck@debian.org>
Date:   Thu Mar 31 16:43:43 2005 +0000

    Add closes: tag for #292717

commit e4da82d2ab21f9726f17dadc55ce82e9b5e5ceec
Author: Michael Banck <mbanck@debian.org>
Date:   Thu Mar 31 16:42:48 2005 +0000

      * sbuild: Tolerate '0' as version number, thanks Santiago Vila.
        (closes: #300205)

commit 8bc963af8e83dacd8f8d7a6db27473ec2f1ba8ed
Author: Michael Banck <mbanck@debian.org>
Date:   Wed Mar 30 23:45:04 2005 +0000

      * Applied patch by Santiago Vila:
        - Moves scripts from /usr/lib/sbuild to /usr/share/sbuild and modifies
          all callers accordingly.
        - Add -n option to tail to comply with POSIX.
        - Call /usr/sbin/sendmail instead of /usr/lib/sendmail.

commit 8e41a44a369fb725f402db1c5c1280ef31c66ba1
Author: Michael Banck <mbanck@debian.org>
Date:   Wed Mar 30 23:29:13 2005 +0000

      * example.sbuildrc: Clarify that $maintainer_name is not mandatory and
        overrides Maintainer: field, whereas $uploader_name overrides
        the Changed-By: field in changes.

commit 04396ac6ef0ce6b9cf86f43e814a792d72408cce
Author: Michael Banck <mbanck@debian.org>
Date:   Wed Mar 30 00:56:25 2005 +0000

      * sbuild: Specify full path for Dir::Etc::main and Dir::Etc::parts.

commit 39bbeb1f9cc51e5d7db3a4e2d274d087c2be71b7
Author: Michael Banck <mbanck@debian.org>
Date:   Wed Mar 30 00:38:55 2005 +0000

     * sbuild: Only override Distribution in .changes if specified as option on
       the command-line. (closes: #300145)

commit 2a06ec8caf7cd41bfc4b430a34de3abad979f1be
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 26 23:50:39 2005 +0000

    update version

commit c2fef5394a73d2e95e048a5c6a8fe22dae131e94
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 26 22:47:49 2005 +0000

    output purged packages line by line like other external processes, rather than
    outputting everything all at once after the process finishes.

commit b1b1e9be28a835d242b29208f5a3cd014fb4ba6d
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 26 21:28:37 2005 +0000

    move unset_env call to read_config, remove from all the binaries.  Environment
    is unset before reading the config, so that any binaries referenced in the
    config with ` will have the sanitized environment.

commit 6f43b5fe49df8495423f2b3aae23e5a2b72bbedd
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 26 21:21:27 2005 +0000

    always purge packages if we're building in a chroot.

commit a7336ebfec167832a89bf707fd0e9a79bc0b5b3c
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Mar 25 19:25:43 2005 +0000

    move environment cleansing to Buildd.pm unset_env
    cleanse environment from buildd-mail, buildd-watcher, and buildd-uploader, too.

commit 51892028d341aae333d0a5c6ed93dc4ab3224752
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Mar 25 08:15:58 2005 +0000

    change length limit in changes to 990.  The RFC says 998, postfix's default is
    990, and others are somewhere in the 998-1000 range, or don't care...

commit 04979df8d31cda1365091f42f628d28f87c5f17e
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Mar 22 07:06:01 2005 +0000

    update version

commit 08609e7f929612ecc2c686b0943e963f6f7312ae
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Mar 22 07:02:13 2005 +0000

    re-append the slave option after the config is reloaded

commit bbeb9f598d8806b9f6bbd40daec76adc197f3038
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Mar 20 19:24:39 2005 +0000

    setup master link before doing rebuilds, incase they auto-giveback

commit 606ec7881540a4aafa5f851b32cb942a04a01752
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Mar 20 02:55:27 2005 +0000

    unset all locale related environment variables at startup
    kill ssh with TERM (which is caught) instead of HUP (which isn't)
    watch for the error message when the master is dead and the socket is left
    behind (Connection refused).

commit e7720a786b0587146397423f4abcf024b33b45b8
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Mar 20 00:53:19 2005 +0000

    update version

commit 7a48c0f43f9075c1a51b5d72043e8cdc62ccd4d8
Author: Ryan Murray <rmurray@debian.org>
Date:   Sun Mar 20 00:22:10 2005 +0000

    Always show versions of installed build dependencies.

commit 31909998e2cdc53c0d704777f9b09c3aaccd0430
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 19 23:18:02 2005 +0000

    add support for passing the buildd sshsocket to sbuild for autogivebacks.

commit 7a1e83f30df388d23a904581a18881d6b4363ab0
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 19 22:14:47 2005 +0000

    Make the mailing of rotated logs optional.

commit a18fc803b3dcbd0c224b7dfcee29d4e7b7704f9d
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 19 18:08:11 2005 +0000

    finish conversion of weak_no_auto to be per-dist

commit 77eb3fc5a4e548bdbd8cff4af9ec3f5d1736529a
Author: Ryan Murray <rmurray@debian.org>
Date:   Sat Mar 19 16:48:48 2005 +0000

    add comment indicating that the socket must be a relative path

commit 52bb13f764a9f08f60ac252eed583d711fa8ccc2
Author: Ryan Murray <rmurray@debian.org>
Date:   Fri Mar 18 22:01:25 2005 +0000

    fix case where $conf::should_build_msgs is off to only build the prevfailed
    package once.

commit 9827d00f8ec15b75460250d3ceb58d1927b1e5c6
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 08:12:08 2005 +0000

    fix kill parameters and check for existence of the socket before starting a new
    master.

commit 88752911d2ee52c1b55f8834e7662fe48ed2fa1a
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 08:04:21 2005 +0000

    fix missing package qualifiers

commit ef4ec7580b319ed26b498c83ade6bbf5a92d4270
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 08:03:57 2005 +0000

    kill the ssh process before exiting or shutting down

commit ea8bcaad18c8d785aa973dc1820da653ffdd3d84
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 07:47:49 2005 +0000

    Revert wait-for-sbuild test, the extra check for ssh isn't needed.
    Add socket support to buildd-mail and buildd-uploader

commit ec3f139f23ce71d046d7f67ede4d1cdc58d34302
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 06:56:44 2005 +0000

    add support for ssh 3.9's -M and -S options.  set $conf::sshsocket to the
    filename for the socket.  Requires ssh 3.9 on both ends, and doesn't attempt to
    fall back if you have an older version installed.

commit 512e6aef6a9d90dc28608c21e1e225eae964a0dc
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 04:46:09 2005 +0000

    fix $conf::should_build_msgs and setting $conf::nice_level to 0

commit 75cdd378c73d27c239f6b05008730793df55f085
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 03:28:26 2005 +0000

    build weak_no_auto packages at the end of each dist, rather than after all
    dists, making it useful for security buildds.

commit 2d3681782f7a715149eef36ea8ddcb398115b1ed
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 02:36:38 2005 +0000

    add missing file handle

commit b8e396928d0930cdf387523b68779ee2cdb0e210
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 02:10:46 2005 +0000

    Split changes files sent in the log correctly, every 1000 characters, to better
    behave the mail RFCs.

commit 07257bdd0bf35a2ac6466c8cfb8ebb2622436b49
Author: Ryan Murray <rmurray@debian.org>
Date:   Wed Mar 16 02:01:18 2005 +0000

    Misc cleanups to the source:
      * Add license to repository.
      * Update FSF address.
      * Update Copyright.
      * Set svn:eol-style to LF for all files
      * Set svn:keywords to appropriate values for files that use them.
      * Remove $Log$ keyword and contents where used (see revision 1 for the log)
      * Set svn:mime-type for several files

commit 64a4283468acad981b80d49accb7b6594aeff630
Author: Ryan Murray <rmurray@debian.org>
Date:   Tue Mar 15 20:05:09 2005 +0000

    initial import to svn

commit 36979e460b959ea3f6bc28d08b2e3f47b6de83e8
Author: Subversion Mirror <root@localhost>
Date:   Fri Jun 9 11:26:15 2006 +0000

    SVM: initializing mirror for /trunk/buildd

commit bc65d30105e767ef8ed0606e2a14bd6288cc2b22
Author: Roger Leigh <rleigh@debian.org>
Date:   Fri Jun 9 09:39:53 2006 +0000

    Add buildd project.

commit beff91eebe2b47aa3d2f404e84162e1d29c0b623
Author: Michael Banck <mbanck@debian.org>
Date:   Tue Jan 25 11:19:59 2005 +0000

    Fixed up changelog to not get CVS commit messages

commit 58fc2f0facc5cc118b8a4d0faa5ac004461691e2
Author: Michael Banck <mbanck@debian.org>
Date:   Tue Jan 25 11:14:38 2005 +0000

    Add closes #287672 to changelog

commit 93aa87c75a0854d63a89ec27a2c90c2daefa5a87
Author: Michael Banck <mbanck@debian.org>
Date:   Tue Jan 25 10:40:52 2005 +0000

      * sbuild: Removed check for specific distributions. Instead, fail if
        build/chroot-$dist is not there.

commit 0396469e73652e461801c0bc9cdb53ccb37c3572
Author: Michael Banck <mbanck@debian.org>
Date:   Sat Jan 8 23:08:34 2005 +0000

      * sbuild: Set the locale to `POSIX' to make debconf and debhelper calls in
        the chroot not spew out locale warnings all the time.

commit 190b929bca6b118f166ba7eec0d3c2f4136da1e4
Author: Michael Banck <mbanck@debian.org>
Date:   Sat Jan 8 22:39:12 2005 +0000

      * bin/abort-current-build: Remove the `-B' from the grep line as
       `sbuild -s' does not pass that option to dpkg-configure and abort-
        current-build fails in that case.

commit 3b7d782fb1ccb89ddc12dfec60ee54d53a30c437
Author: Michael Banck <mbanck@debian.org>
Date:   Sat Jan 8 22:27:21 2005 +0000

    * bin/abort-current-build: Remove the -B from the grep line as sbuild -s does not pass that option to dpkg-configure and abort-current-build fails in that case.

commit ca7ee72a00c211fa0f7ec2bbb091120307024f60
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Thu Sep 30 11:19:17 2004 +0000

    Little modification to last note.

commit 0c360071e0b01681971a61720768d8298eb50feb
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Thu Sep 30 11:16:53 2004 +0000

    Missing file cvslogs.old added to CVS repo.
    Changed rules to correctly manage configs and chroot files copies, due to new CVS dirs.

commit 6116491261c325af339b7da6a903a955f8efd433
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Thu Sep 30 11:06:14 2004 +0000

    Minimal change to doc for configs.

commit 92f6d3a0055b6ecb35bd549e0e979d320fb39272
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Wed Sep 29 12:58:10 2004 +0000

    New ref-* uptodate for sarge/sid.
    Changed depends and checkchroot to solve critical bug.

commit 3aa23f7bf188b4e8b0ea1a841a3d1c5909c25806
Author: Francesco Paolo Lovergine <frankie@debian.org>
Date:   Fri Sep 17 13:17:40 2004 +0000

    Initial revision
